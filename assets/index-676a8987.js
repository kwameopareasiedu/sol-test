(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();const Oi=(s,e)=>s===e,Dt=Symbol("solid-proxy"),Ei=Symbol("solid-track"),Mt={equals:Oi};let Yn=ti;const nt=1,Lt=2,Zn={owned:null,cleanups:null,context:null,owner:null};var re=null;let Jt=null,se=null,Ee=null,Ye=null,Ut=0;function St(s,e){const t=se,n=re,o=s.length===0,l=o?Zn:{owned:null,cleanups:null,context:null,owner:e===void 0?n:e},u=o?s:()=>s(()=>Pe(()=>Wt(l)));re=l,se=null;try{return lt(u,!0)}finally{se=t,re=n}}function W(s,e){e=e?Object.assign({},Mt,e):Mt;const t={value:s,observers:null,observerSlots:null,comparator:e.equals||void 0},n=o=>(typeof o=="function"&&(o=o(t.value)),ei(t,o));return[Qn.bind(t),n]}function Ce(s,e,t){const n=fn(s,e,!1,nt);Ct(n)}function vt(s,e,t){Yn=Pi;const n=fn(s,e,!1,nt);(!t||!t.render)&&(n.user=!0),Ye?Ye.push(n):Ct(n)}function be(s,e,t){t=t?Object.assign({},Mt,t):Mt;const n=fn(s,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,Ct(n),Qn.bind(n)}function Pe(s){if(se===null)return s();const e=se;se=null;try{return s()}finally{se=e}}function Kn(s,e,t){const n=Array.isArray(s);let o,l=t&&t.defer;return u=>{let f;if(n){f=Array(s.length);for(let g=0;g<s.length;g++)f[g]=s[g]()}else f=s();if(l){l=!1;return}const c=Pe(()=>e(f,o,u));return o=f,c}}function at(s){vt(()=>Pe(s))}function it(s){return re===null||(re.cleanups===null?re.cleanups=[s]:re.cleanups.push(s)),s}function Ii(){return re}function ki(s,e){const t=re,n=se;re=s,se=null;try{return lt(e,!0)}catch(o){hn(o)}finally{re=t,se=n}}function $i(s){const e=se,t=re;return Promise.resolve().then(()=>{se=e,re=t;let n;return lt(s,!1),se=re=null,n?n.done:void 0})}function Jn(s,e){const t=Symbol("context");return{id:t,Provider:Di(t),defaultValue:s}}function cn(s){let e;return(e=ii(re,s.id))!==void 0?e:s.defaultValue}function Ft(s){const e=be(s),t=be(()=>ln(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}function Qn(){if(this.sources&&this.state)if(this.state===nt)Ct(this);else{const s=Ee;Ee=null,lt(()=>Ht(this),!1),Ee=s}if(se){const s=this.observers?this.observers.length:0;se.sources?(se.sources.push(this),se.sourceSlots.push(s)):(se.sources=[this],se.sourceSlots=[s]),this.observers?(this.observers.push(se),this.observerSlots.push(se.sources.length-1)):(this.observers=[se],this.observerSlots=[se.sources.length-1])}return this.value}function ei(s,e,t){let n=s.value;return(!s.comparator||!s.comparator(n,e))&&(s.value=e,s.observers&&s.observers.length&&lt(()=>{for(let o=0;o<s.observers.length;o+=1){const l=s.observers[o],u=Jt&&Jt.running;u&&Jt.disposed.has(l),(u?!l.tState:!l.state)&&(l.pure?Ee.push(l):Ye.push(l),l.observers&&ni(l)),u||(l.state=nt)}if(Ee.length>1e6)throw Ee=[],new Error},!1)),e}function Ct(s){if(!s.fn)return;Wt(s);const e=re,t=se,n=Ut;se=re=s,Ni(s,s.value,n),se=t,re=e}function Ni(s,e,t){let n;try{n=s.fn(e)}catch(o){return s.pure&&(s.state=nt,s.owned&&s.owned.forEach(Wt),s.owned=null),s.updatedAt=t+1,hn(o)}(!s.updatedAt||s.updatedAt<=t)&&(s.updatedAt!=null&&"observers"in s?ei(s,n):s.value=n,s.updatedAt=t)}function fn(s,e,t,n=nt,o){const l={fn:s,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:re,context:null,pure:t};return re===null||re!==Zn&&(re.owned?re.owned.push(l):re.owned=[l]),l}function jt(s){if(s.state===0)return;if(s.state===Lt)return Ht(s);if(s.suspense&&Pe(s.suspense.inFallback))return s.suspense.effects.push(s);const e=[s];for(;(s=s.owner)&&(!s.updatedAt||s.updatedAt<Ut);)s.state&&e.push(s);for(let t=e.length-1;t>=0;t--)if(s=e[t],s.state===nt)Ct(s);else if(s.state===Lt){const n=Ee;Ee=null,lt(()=>Ht(s,e[0]),!1),Ee=n}}function lt(s,e){if(Ee)return s();let t=!1;e||(Ee=[]),Ye?t=!0:Ye=[],Ut++;try{const n=s();return Ri(t),n}catch(n){t||(Ye=null),Ee=null,hn(n)}}function Ri(s){if(Ee&&(ti(Ee),Ee=null),s)return;const e=Ye;Ye=null,e.length&&lt(()=>Yn(e),!1)}function ti(s){for(let e=0;e<s.length;e++)jt(s[e])}function Pi(s){let e,t=0;for(e=0;e<s.length;e++){const n=s[e];n.user?s[t++]=n:jt(n)}for(e=0;e<t;e++)jt(s[e])}function Ht(s,e){s.state=0;for(let t=0;t<s.sources.length;t+=1){const n=s.sources[t];if(n.sources){const o=n.state;o===nt?n!==e&&(!n.updatedAt||n.updatedAt<Ut)&&jt(n):o===Lt&&Ht(n,e)}}}function ni(s){for(let e=0;e<s.observers.length;e+=1){const t=s.observers[e];t.state||(t.state=Lt,t.pure?Ee.push(t):Ye.push(t),t.observers&&ni(t))}}function Wt(s){let e;if(s.sources)for(;s.sources.length;){const t=s.sources.pop(),n=s.sourceSlots.pop(),o=t.observers;if(o&&o.length){const l=o.pop(),u=t.observerSlots.pop();n<o.length&&(l.sourceSlots[u]=n,o[n]=l,t.observerSlots[n]=u)}}if(s.owned){for(e=s.owned.length-1;e>=0;e--)Wt(s.owned[e]);s.owned=null}if(s.cleanups){for(e=s.cleanups.length-1;e>=0;e--)s.cleanups[e]();s.cleanups=null}s.state=0,s.context=null}function hn(s){throw s}function ii(s,e){return s?s.context&&s.context[e]!==void 0?s.context[e]:ii(s.owner,e):void 0}function ln(s){if(typeof s=="function"&&!s.length)return ln(s());if(Array.isArray(s)){const e=[];for(let t=0;t<s.length;t++){const n=ln(s[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return s}function Di(s,e){return function(n){let o;return Ce(()=>o=Pe(()=>(re.context={[s]:n.value},Ft(()=>n.children))),void 0),o}}const Mi=Symbol("fallback");function yn(s){for(let e=0;e<s.length;e++)s[e]()}function Li(s,e,t={}){let n=[],o=[],l=[],u=0,f=e.length>1?[]:null;return it(()=>yn(l)),()=>{let c=s()||[],g,y;return c[Ei],Pe(()=>{let r=c.length,d,m,a,p,h,_,w,E,D;if(r===0)u!==0&&(yn(l),l=[],n=[],o=[],u=0,f&&(f=[])),t.fallback&&(n=[Mi],o[0]=St(M=>(l[0]=M,t.fallback())),u=1);else if(u===0){for(o=new Array(r),y=0;y<r;y++)n[y]=c[y],o[y]=St(i);u=r}else{for(a=new Array(r),p=new Array(r),f&&(h=new Array(r)),_=0,w=Math.min(u,r);_<w&&n[_]===c[_];_++);for(w=u-1,E=r-1;w>=_&&E>=_&&n[w]===c[E];w--,E--)a[E]=o[w],p[E]=l[w],f&&(h[E]=f[w]);for(d=new Map,m=new Array(E+1),y=E;y>=_;y--)D=c[y],g=d.get(D),m[y]=g===void 0?-1:g,d.set(D,y);for(g=_;g<=w;g++)D=n[g],y=d.get(D),y!==void 0&&y!==-1?(a[y]=o[g],p[y]=l[g],f&&(h[y]=f[g]),y=m[y],d.set(D,y)):l[g]();for(y=_;y<r;y++)y in a?(o[y]=a[y],l[y]=p[y],f&&(f[y]=h[y],f[y](y))):o[y]=St(i);o=o.slice(0,u=r),n=c.slice(0)}return o});function i(r){if(l[y]=r,f){const[d,m]=W(y);return f[y]=m,e(c[y],d)}return e(c[y])}}}let ji=!1;function I(s,e){return Pe(()=>s(e||{}))}function It(){return!0}const un={get(s,e,t){return e===Dt?t:s.get(e)},has(s,e){return e===Dt?!0:s.has(e)},set:It,deleteProperty:It,getOwnPropertyDescriptor(s,e){return{configurable:!0,enumerable:!0,get(){return s.get(e)},set:It,deleteProperty:It}},ownKeys(s){return s.keys()}};function Qt(s){return(s=typeof s=="function"?s():s)?s:{}}function Hi(){for(let s=0,e=this.length;s<e;++s){const t=this[s]();if(t!==void 0)return t}}function We(...s){let e=!1;for(let l=0;l<s.length;l++){const u=s[l];e=e||!!u&&Dt in u,s[l]=typeof u=="function"?(e=!0,be(u)):u}if(e)return new Proxy({get(l){for(let u=s.length-1;u>=0;u--){const f=Qt(s[u])[l];if(f!==void 0)return f}},has(l){for(let u=s.length-1;u>=0;u--)if(l in Qt(s[u]))return!0;return!1},keys(){const l=[];for(let u=0;u<s.length;u++)l.push(...Object.keys(Qt(s[u])));return[...new Set(l)]}},un);const t={},n={};let o=!1;for(let l=s.length-1;l>=0;l--){const u=s[l];if(!u)continue;const f=Object.getOwnPropertyNames(u);o=o||l!==0&&!!f.length;for(let c=0,g=f.length;c<g;c++){const y=f[c];if(!(y==="__proto__"||y==="constructor"))if(y in t){const i=n[y],r=Object.getOwnPropertyDescriptor(u,y);i?r.get?i.push(r.get.bind(u)):r.value!==void 0&&i.push(()=>r.value):t[y]===void 0&&(t[y]=r.value)}else{const i=Object.getOwnPropertyDescriptor(u,y);i.get?Object.defineProperty(t,y,{enumerable:!0,configurable:!0,get:Hi.bind(n[y]=[i.get.bind(u)])}):t[y]=i.value}}}return t}function _t(s,...e){if(Dt in s){const o=new Set(e.length>1?e.flat():e[0]),l=e.map(u=>new Proxy({get(f){return u.includes(f)?s[f]:void 0},has(f){return u.includes(f)&&f in s},keys(){return u.filter(f=>f in s)}},un));return l.push(new Proxy({get(u){return o.has(u)?void 0:s[u]},has(u){return o.has(u)?!1:u in s},keys(){return Object.keys(s).filter(u=>!o.has(u))}},un)),l}const t={},n=e.map(()=>({}));for(const o of Object.getOwnPropertyNames(s)){const l=Object.getOwnPropertyDescriptor(s,o),u=!l.get&&!l.set&&l.enumerable&&l.writable&&l.configurable;let f=!1,c=0;for(const g of e)g.includes(o)&&(f=!0,u?n[c][o]=l.value:Object.defineProperty(n[c],o,l)),++c;f||(u?t[o]=l.value:Object.defineProperty(t,o,l))}return[...n,t]}const Bi=s=>`Stale read from <${s}>.`;function Ui(s){const e="fallback"in s&&{fallback:()=>s.fallback};return be(Li(()=>s.each,s.children,e||void 0))}function ie(s){const e=s.keyed,t=be(()=>s.when,void 0,{equals:(n,o)=>e?n===o:!n==!o});return be(()=>{const n=t();if(n){const o=s.children;return typeof o=="function"&&o.length>0?Pe(()=>o(e?n:()=>{if(!Pe(t))throw Bi("Show");return s.when})):o}return s.fallback},void 0,void 0)}const Fi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Wi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Fi]),zi=new Set(["innerHTML","textContent","innerText","children"]),Gi=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),qi=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Xi(s,e){const t=qi[s];return typeof t=="object"?t[e]?t.$:void 0:t}const Vi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Yi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Zi(s,e,t){let n=t.length,o=e.length,l=n,u=0,f=0,c=e[o-1].nextSibling,g=null;for(;u<o||f<l;){if(e[u]===t[f]){u++,f++;continue}for(;e[o-1]===t[l-1];)o--,l--;if(o===u){const y=l<n?f?t[f-1].nextSibling:t[l-f]:c;for(;f<l;)s.insertBefore(t[f++],y)}else if(l===f)for(;u<o;)(!g||!g.has(e[u]))&&e[u].remove(),u++;else if(e[u]===t[l-1]&&t[f]===e[o-1]){const y=e[--o].nextSibling;s.insertBefore(t[f++],e[u++].nextSibling),s.insertBefore(t[--l],y),e[o]=t[l]}else{if(!g){g=new Map;let i=f;for(;i<l;)g.set(t[i],i++)}const y=g.get(e[u]);if(y!=null)if(f<y&&y<l){let i=u,r=1,d;for(;++i<o&&i<l&&!((d=g.get(e[i]))==null||d!==y+r);)r++;if(r>y-f){const m=e[u];for(;f<y;)s.insertBefore(t[f++],m)}else s.replaceChild(t[f++],e[u++])}else u++;else e[u++].remove()}}}const vn="_$DX_DELEGATE";function Ki(s,e,t,n={}){let o;return St(l=>{o=l,e===document?s():C(e,s(),e.firstChild?null:void 0,t)},n.owner),()=>{o(),e.textContent=""}}function G(s,e,t){let n;const o=()=>{const u=document.createElement("template");return u.innerHTML=s,t?u.content.firstChild.firstChild:u.content.firstChild},l=e?()=>Pe(()=>document.importNode(n||(n=o()),!0)):()=>(n||(n=o())).cloneNode(!0);return l.cloneNode=l,l}function ot(s,e=window.document){const t=e[vn]||(e[vn]=new Set);for(let n=0,o=s.length;n<o;n++){const l=s[n];t.has(l)||(t.add(l),e.addEventListener(l,io))}}function Ue(s,e,t){t==null?s.removeAttribute(e):s.setAttribute(e,t)}function Ji(s,e,t,n){n==null?s.removeAttributeNS(e,t):s.setAttributeNS(e,t,n)}function Re(s,e){e==null?s.removeAttribute("class"):s.className=e}function Bt(s,e,t,n){if(n)Array.isArray(t)?(s[`$$${e}`]=t[0],s[`$$${e}Data`]=t[1]):s[`$$${e}`]=t;else if(Array.isArray(t)){const o=t[0];s.addEventListener(e,t[0]=l=>o.call(s,t[1],l))}else s.addEventListener(e,t)}function Qi(s,e,t={}){const n=Object.keys(e||{}),o=Object.keys(t);let l,u;for(l=0,u=o.length;l<u;l++){const f=o[l];!f||f==="undefined"||e[f]||(_n(s,f,!1),delete t[f])}for(l=0,u=n.length;l<u;l++){const f=n[l],c=!!e[f];!f||f==="undefined"||t[f]===c||!c||(_n(s,f,!0),t[f]=c)}return t}function eo(s,e,t){if(!e)return t?Ue(s,"style"):e;const n=s.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let o,l;for(l in t)e[l]==null&&n.removeProperty(l),delete t[l];for(l in e)o=e[l],o!==t[l]&&(n.setProperty(l,o),t[l]=o);return t}function ut(s,e={},t,n){const o={};return n||Ce(()=>o.children=gt(s,e.children,o.children)),Ce(()=>e.ref&&e.ref(s)),Ce(()=>to(s,e,t,!0,o,!0)),o}function mt(s,e,t){return Pe(()=>s(e,t))}function C(s,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return gt(s,e,n,t);Ce(o=>gt(s,e(),o,t),n)}function to(s,e,t,n,o={},l=!1){e||(e={});for(const u in o)if(!(u in e)){if(u==="children")continue;o[u]=bn(s,u,null,o[u],t,l)}for(const u in e){if(u==="children"){n||gt(s,e.children);continue}const f=e[u];o[u]=bn(s,u,f,o[u],t,l)}}function no(s){return s.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function _n(s,e,t){const n=e.trim().split(/\s+/);for(let o=0,l=n.length;o<l;o++)s.classList.toggle(n[o],t)}function bn(s,e,t,n,o,l){let u,f,c,g,y;if(e==="style")return eo(s,t,n);if(e==="classList")return Qi(s,t,n);if(t===n)return n;if(e==="ref")l||t(s);else if(e.slice(0,3)==="on:"){const i=e.slice(3);n&&s.removeEventListener(i,n),t&&s.addEventListener(i,t)}else if(e.slice(0,10)==="oncapture:"){const i=e.slice(10);n&&s.removeEventListener(i,n,!0),t&&s.addEventListener(i,t,!0)}else if(e.slice(0,2)==="on"){const i=e.slice(2).toLowerCase(),r=Vi.has(i);if(!r&&n){const d=Array.isArray(n)?n[0]:n;s.removeEventListener(i,d)}(r||t)&&(Bt(s,i,t,r),r&&ot([i]))}else if(e.slice(0,5)==="attr:")Ue(s,e.slice(5),t);else if((y=e.slice(0,5)==="prop:")||(c=zi.has(e))||!o&&((g=Xi(e,s.tagName))||(f=Wi.has(e)))||(u=s.nodeName.includes("-")))y&&(e=e.slice(5),f=!0),e==="class"||e==="className"?Re(s,t):u&&!f&&!c?s[no(e)]=t:s[g||e]=t;else{const i=o&&e.indexOf(":")>-1&&Yi[e.split(":")[0]];i?Ji(s,i,e,t):Ue(s,Gi[e]||e,t)}return t}function io(s){const e=`$$${s.type}`;let t=s.composedPath&&s.composedPath()[0]||s.target;for(s.target!==t&&Object.defineProperty(s,"target",{configurable:!0,value:t}),Object.defineProperty(s,"currentTarget",{configurable:!0,get(){return t||document}});t;){const n=t[e];if(n&&!t.disabled){const o=t[`${e}Data`];if(o!==void 0?n.call(t,o,s):n.call(t,s),s.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function gt(s,e,t,n,o){for(;typeof t=="function";)t=t();if(e===t)return t;const l=typeof e,u=n!==void 0;if(s=u&&t[0]&&t[0].parentNode||s,l==="string"||l==="number")if(l==="number"&&(e=e.toString()),u){let f=t[0];f&&f.nodeType===3?f.data=e:f=document.createTextNode(e),t=dt(s,t,n,f)}else t!==""&&typeof t=="string"?t=s.firstChild.data=e:t=s.textContent=e;else if(e==null||l==="boolean")t=dt(s,t,n);else{if(l==="function")return Ce(()=>{let f=e();for(;typeof f=="function";)f=f();t=gt(s,f,t,n)}),()=>t;if(Array.isArray(e)){const f=[],c=t&&Array.isArray(t);if(dn(f,e,t,o))return Ce(()=>t=gt(s,f,t,n,!0)),()=>t;if(f.length===0){if(t=dt(s,t,n),u)return t}else c?t.length===0?wn(s,f,n):Zi(s,t,f):(t&&dt(s),wn(s,f));t=f}else if(e.nodeType){if(Array.isArray(t)){if(u)return t=dt(s,t,n,e);dt(s,t,null,e)}else t==null||t===""||!s.firstChild?s.appendChild(e):s.replaceChild(e,s.firstChild);t=e}else console.warn("Unrecognized value. Skipped inserting",e)}return t}function dn(s,e,t,n){let o=!1;for(let l=0,u=e.length;l<u;l++){let f=e[l],c=t&&t[l],g;if(!(f==null||f===!0||f===!1))if((g=typeof f)=="object"&&f.nodeType)s.push(f);else if(Array.isArray(f))o=dn(s,f,c)||o;else if(g==="function")if(n){for(;typeof f=="function";)f=f();o=dn(s,Array.isArray(f)?f:[f],Array.isArray(c)?c:[c])||o}else s.push(f),o=!0;else{const y=String(f);c&&c.nodeType===3&&c.data===y?s.push(c):s.push(document.createTextNode(y))}}return o}function wn(s,e,t=null){for(let n=0,o=e.length;n<o;n++)s.insertBefore(e[n],t)}function dt(s,e,t,n){if(t===void 0)return s.textContent="";const o=n||document.createTextNode("");if(e.length){let l=!1;for(let u=e.length-1;u>=0;u--){const f=e[u];if(o!==f){const c=f.parentNode===s;!l&&!u?c?s.replaceChild(o,f):s.insertBefore(o,t):c&&f.remove()}else l=!0}}else s.insertBefore(o,t);return[o]}const oi=!1;function si(s,e,t){return s.addEventListener(e,t),()=>s.removeEventListener(e,t)}function oo([s,e],t,n){return[t?()=>t(s()):s,n?o=>e(n(o)):e]}function so(s){try{return document.querySelector(s)}catch{return null}}function ri(s,e){const t=so(`#${s}`);t?t.scrollIntoView():e&&window.scrollTo(0,0)}function ai(s,e,t,n){let o=!1;const l=f=>typeof f=="string"?{value:f}:f,u=oo(W(l(s()),{equals:(f,c)=>f.value===c.value}),void 0,f=>(!o&&e(f),f));return t&&it(t((f=s())=>{o=!0,u[1](l(f)),o=!1})),{signal:u,utils:n}}function ro(s){if(s){if(Array.isArray(s))return{signal:s}}else return{signal:W({value:""})};return s}function ao(){return ai(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:s,replace:e,scroll:t,state:n})=>{e?window.history.replaceState(n,"",s):window.history.pushState(n,"",s),ri(window.location.hash.slice(1),t)},s=>si(window,"popstate",()=>s()),{go:s=>window.history.go(s)})}function lo(){return ai(()=>window.location.hash.slice(1),({value:s,replace:e,scroll:t,state:n})=>{e?window.history.replaceState(n,"","#"+s):window.location.hash=s;const o=s.indexOf("#"),l=o>=0?s.slice(o+1):"";ri(l,t)},s=>si(window,"hashchange",()=>s()),{go:s=>window.history.go(s),renderPath:s=>`#${s}`,parsePath:s=>{const e=s.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return`${t}#${e}`}return e}})}function uo(){let s=new Set;function e(o){return s.add(o),()=>s.delete(o)}let t=!1;function n(o,l){if(t)return!(t=!1);const u={to:o,options:l,defaultPrevented:!1,preventDefault:()=>u.defaultPrevented=!0};for(const f of s)f.listener({...u,from:f.location,retry:c=>{c&&(t=!0),f.navigate(o,l)}});return!u.defaultPrevented}return{subscribe:e,confirm:n}}const co=/^(?:[a-z0-9]+:)?\/\//i,fo=/^\/+|(\/)\/+$/g;function xt(s,e=!1){const t=s.replace(fo,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function Rt(s,e,t){if(co.test(e))return;const n=xt(s),o=t&&xt(t);let l="";return!o||e.startsWith("/")?l=n:o.toLowerCase().indexOf(n.toLowerCase())!==0?l=n+o:l=o,(l||"/")+xt(e,!l)}function ho(s,e){if(s==null)throw new Error(e);return s}function li(s,e){return xt(s).replace(/\/*(\*.*)?$/g,"")+xt(e)}function po(s){const e={};return s.searchParams.forEach((t,n)=>{e[n]=t}),e}function mo(s,e,t){const[n,o]=s.split("/*",2),l=n.split("/").filter(Boolean),u=l.length;return f=>{const c=f.split("/").filter(Boolean),g=c.length-u;if(g<0||g>0&&o===void 0&&!e)return null;const y={path:u?"":"/",params:{}},i=r=>t===void 0?void 0:t[r];for(let r=0;r<u;r++){const d=l[r],m=c[r],a=d[0]===":",p=a?d.slice(1):d;if(a&&en(m,i(p)))y.params[p]=m;else if(a||!en(m,d))return null;y.path+=`/${m}`}if(o){const r=g?c.slice(-g).join("/"):"";if(en(r,i(o)))y.params[o]=r;else return null}return y}}function en(s,e){const t=n=>n.localeCompare(s,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(s):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(s):!1}function go(s){const[e,t]=s.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((o,l)=>o+(l.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function ui(s){const e=new Map,t=Ii();return new Proxy({},{get(n,o){return e.has(o)||ki(t,()=>e.set(o,be(()=>s()[o]))),e.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(s())}})}function yo(s,e){const t=new URLSearchParams(s);Object.entries(e).forEach(([o,l])=>{l==null||l===""?t.delete(o):t.set(o,String(l))});const n=t.toString();return n?`?${n}`:""}function di(s){let e=/(\/?\:[^\/]+)\?/.exec(s);if(!e)return[s];let t=s.slice(0,e.index),n=s.slice(e.index+e[0].length);const o=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)o.push(t+=e[1]),n=n.slice(e[0].length);return di(n).reduce((l,u)=>[...l,...o.map(f=>f+u)],[])}const vo=100,ci=Jn(),zt=Jn(),Gt=()=>ho(cn(ci),"Make sure your app is wrapped in a <Router />");let At;const fi=()=>At||cn(zt)||Gt().base,_o=()=>Gt().navigatorFactory(),bo=()=>Gt().location,wo=()=>{const s=bo(),e=_o(),t=(n,o)=>{const l=Pe(()=>yo(s.search,n));e(s.pathname+l+s.hash,{scroll:!1,resolve:!1,...o})};return[s.query,t]};function To(s,e="",t){const{component:n,data:o,children:l}=s,u=!l||Array.isArray(l)&&!l.length,f={key:s,element:n?()=>I(n,{}):()=>{const{element:c}=s;return c===void 0&&t?I(t,{}):c},preload:s.component?n.preload:s.preload,data:o};return hi(s.path).reduce((c,g)=>{for(const y of di(g)){const i=li(e,y),r=u?i:i.split("/*",1)[0];c.push({...f,originalPath:y,pattern:r,matcher:mo(r,!u,s.matchFilters)})}return c},[])}function So(s,e=0){return{routes:s,score:go(s[s.length-1])*1e4-e,matcher(t){const n=[];for(let o=s.length-1;o>=0;o--){const l=s[o],u=l.matcher(t);if(!u)return null;n.unshift({...u,route:l})}return n}}}function hi(s){return Array.isArray(s)?s:[s]}function pi(s,e="",t,n=[],o=[]){const l=hi(s);for(let u=0,f=l.length;u<f;u++){const c=l[u];if(c&&typeof c=="object"&&c.hasOwnProperty("path")){const g=To(c,e,t);for(const y of g){n.push(y);const i=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!i)pi(c.children,y.pattern,t,n,o);else{const r=So([...n],o.length);o.push(r)}n.pop()}}}return n.length?o:o.sort((u,f)=>f.score-u.score)}function xo(s,e){for(let t=0,n=s.length;t<n;t++){const o=s[t].matcher(e);if(o)return o}return[]}function Ao(s,e){const t=new URL("http://sar"),n=be(c=>{const g=s();try{return new URL(g,t)}catch{return console.error(`Invalid path ${g}`),c}},t,{equals:(c,g)=>c.href===g.href}),o=be(()=>n().pathname),l=be(()=>n().search,!0),u=be(()=>n().hash),f=be(()=>"");return{get pathname(){return o()},get search(){return l()},get hash(){return u()},get state(){return e()},get key(){return f()},query:ui(Kn(l,()=>po(n())))}}function Co(s,e="",t,n){const{signal:[o,l],utils:u={}}=ro(s),f=u.parsePath||(A=>A),c=u.renderPath||(A=>A),g=u.beforeLeave||uo(),y=Rt("",e),i=void 0;if(y===void 0)throw new Error(`${y} is not a valid base path`);y&&!o().value&&l({value:y,replace:!0,scroll:!1});const[r,d]=W(!1),m=async A=>{d(!0);try{await $i(A)}finally{d(!1)}},[a,p]=W(o().value),[h,_]=W(o().state),w=Ao(a,h),E=[],D={pattern:y,params:{},path:()=>y,outlet:()=>null,resolvePath(A){return Rt(y,A)}};if(t)try{At=D,D.data=t({data:void 0,params:{},location:w,navigate:j(D)})}finally{At=void 0}function M(A,L,z){Pe(()=>{if(typeof L=="number"){L&&(u.go?g.confirm(L,z)&&u.go(L):console.warn("Router integration does not support relative routing"));return}const{replace:U,resolve:$,scroll:x,state:F}={replace:!1,resolve:!0,scroll:!0,...z},N=$?A.resolvePath(L):Rt("",L);if(N===void 0)throw new Error(`Path '${L}' is not a routable path`);if(E.length>=vo)throw new Error("Too many redirects");const O=a();if((N!==O||F!==h())&&!oi){if(g.confirm(N,z)){const B=E.push({value:O,replace:U,scroll:x,state:h()});m(()=>{p(N),_(F)}).then(()=>{E.length===B&&T({value:N,state:F})})}}})}function j(A){return A=A||cn(zt)||D,(L,z)=>M(A,L,z)}function T(A){const L=E[0];L&&((A.value!==L.value||A.state!==L.state)&&l({...A,replace:L.replace,scroll:L.scroll}),E.length=0)}Ce(()=>{const{value:A,state:L}=o();Pe(()=>{A!==a()&&m(()=>{p(A),_(L)})})});{let A=function(L){if(L.defaultPrevented||L.button!==0||L.metaKey||L.altKey||L.ctrlKey||L.shiftKey)return;const z=L.composedPath().find(O=>O instanceof Node&&O.nodeName.toUpperCase()==="A");if(!z||!z.hasAttribute("link"))return;const U=z.href;if(z.target||!U&&!z.hasAttribute("state"))return;const $=(z.getAttribute("rel")||"").split(/\s+/);if(z.hasAttribute("download")||$&&$.includes("external"))return;const x=new URL(U);if(x.origin!==window.location.origin||y&&x.pathname&&!x.pathname.toLowerCase().startsWith(y.toLowerCase()))return;const F=f(x.pathname+x.search+x.hash),N=z.getAttribute("state");L.preventDefault(),M(D,F,{resolve:!1,replace:z.hasAttribute("replace"),scroll:!z.hasAttribute("noscroll"),state:N&&JSON.parse(N)})};var S=A;ot(["click"]),document.addEventListener("click",A),it(()=>document.removeEventListener("click",A))}return{base:D,out:i,location:w,isRouting:r,renderPath:c,parsePath:f,navigatorFactory:j,beforeLeave:g}}function Oo(s,e,t,n,o){const{base:l,location:u,navigatorFactory:f}=s,{pattern:c,element:g,preload:y,data:i}=n().route,r=be(()=>n().path);y&&y();const d={parent:e,pattern:c,get child(){return t()},path:r,params:o,data:e.data,outlet:g,resolvePath(m){return Rt(l.path(),m,r())}};if(i)try{At=d,d.data=i({data:e.data,params:o,location:u,navigate:f(d)})}finally{At=void 0}return d}const Eo=s=>{const{source:e,url:t,base:n,data:o,out:l}=s,u=e||ao(),f=Co(u,n,o);return I(ci.Provider,{value:f,get children(){return s.children}})},Io=s=>{const e=Gt(),t=fi(),n=Ft(()=>s.children),o=be(()=>pi(n(),li(t.pattern,s.base||""),ko)),l=be(()=>xo(o(),e.location.pathname)),u=ui(()=>{const y=l(),i={};for(let r=0;r<y.length;r++)Object.assign(i,y[r].params);return i});e.out&&e.out.matches.push(l().map(({route:y,path:i,params:r})=>({originalPath:y.originalPath,pattern:y.pattern,path:i,params:r})));const f=[];let c;const g=be(Kn(l,(y,i,r)=>{let d=i&&y.length===i.length;const m=[];for(let a=0,p=y.length;a<p;a++){const h=i&&i[a],_=y[a];r&&h&&_.route.key===h.route.key?m[a]=r[a]:(d=!1,f[a]&&f[a](),St(w=>{f[a]=w,m[a]=Oo(e,m[a-1]||t,()=>g()[a+1],()=>l()[a],u)}))}return f.splice(y.length).forEach(a=>a()),r&&d?r:(c=m[0],m)}));return I(ie,{get when(){return g()&&c},keyed:!0,children:y=>I(zt.Provider,{value:y,get children(){return y.outlet()}})})},kt=s=>{const e=Ft(()=>s.children);return We(s,{get children(){return e()}})},ko=()=>{const s=fi();return I(ie,{get when(){return s.child},keyed:!0,children:e=>I(zt.Provider,{value:e,get children(){return e.outlet()}})})},qt="/",mi="/intro",gi="/game",yi="/outro";let $t;const $o=new Uint8Array(16);function No(){if(!$t&&($t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $t($o)}const xe=[];for(let s=0;s<256;++s)xe.push((s+256).toString(16).slice(1));function Ro(s,e=0){return(xe[s[e+0]]+xe[s[e+1]]+xe[s[e+2]]+xe[s[e+3]]+"-"+xe[s[e+4]]+xe[s[e+5]]+"-"+xe[s[e+6]]+xe[s[e+7]]+"-"+xe[s[e+8]]+xe[s[e+9]]+"-"+xe[s[e+10]]+xe[s[e+11]]+xe[s[e+12]]+xe[s[e+13]]+xe[s[e+14]]+xe[s[e+15]]).toLowerCase()}const Po=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tn={randomUUID:Po};function vi(s,e,t){if(Tn.randomUUID&&!e&&!s)return Tn.randomUUID();s=s||{};const n=s.random||(s.rng||No)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let o=0;o<16;++o)e[t+o]=n[o];return e}return Ro(n)}class Do{id;msg;at;type;status;constructor(e){this.id=vi(),this.msg=e.msg,this.type=e?.type||"input",this.status=e?.status||"success",this.at=new Date}}class Ge{name;regex;constructor(e,t){this.name=e,this.regex=t}test(e){return this.regex.test(this.trimInput(e))}findRegexMatches(e){const t=this.trimInput(e).match(this.regex);return t?Array.from(t):[]}trimInput(e){return e.trim().toLowerCase()}}class Mo extends Ge{constructor(){super("help",/^help$/)}process(){}}class Lo extends Ge{constructor(){super("list unit types",/^list types$/)}process(){}}class jo extends Ge{constructor(){super("select",/^select (\w+)$/)}process(e){return this.findRegexMatches(e)[1].toString().trim().toLowerCase()}}class Ho extends Ge{constructor(){super("build",/^build (miner|refinery|transporter|hauler)$/)}process(e){return this.findRegexMatches(e)[1].toString().trim().toLowerCase()}}class Bo extends Ge{constructor(){super("mine",/^mine (\w+)$/)}process(e){return this.findRegexMatches(e)[1].toString().trim().toLowerCase()}}class Uo extends Ge{constructor(){super("scan",/^scan$/)}process(){}}class Fo extends Ge{constructor(){super("exit",/^exit$/)}process(){}}class Wo extends Ge{constructor(){super("deploy",/^deploy (\w+)$/)}process(e){return this.findRegexMatches(e)[1].toString().trim().toLowerCase()}}class zo extends Ge{constructor(){super("load",/^load (\d+) (\d+) (\d+)$/)}process(e){const t=this.findRegexMatches(e),n=parseInt(t[1].toString().trim().toLowerCase()),o=parseInt(t[2].toString().trim().toLowerCase()),l=parseInt(t[3].toString().trim().toLowerCase());return[n,o,l]}}class Go extends Ge{constructor(){super("haul",/^haul$/)}process(){}}class qo extends Ge{constructor(){super("unload",/^unload$/)}process(){}}const bt=new Mo,Xo=new Lo,Sn=new jo,xn=new Ho,An=new Bo,Vo=new Uo,Yo=new Fo,yt=new Wo,Cn=new zo,Zo=new Go,_i=new qo;class P{x;y;constructor(e,t){this.x=e||0,this.y=t||0}static fromAngle(e){return new P(Math.sin(e),-Math.cos(e))}static zero(){return new P(0,0)}copy(e){return this.x=e.x,this.y=e.y,this}clone(){return new P(this.x,this.y)}add(e,t=!1){return t?(this.x+=e.x,this.y+=e.y,this):new P(this.x+e.x,this.y+e.y)}subtract(e,t=!1){return t?(this.x-=e.x,this.y-=e.y,this):new P(this.x-e.x,this.y-e.y)}multiply(e,t=!1){return t?(this.x*=e,this.y*=e,this):new P(this.x*e,this.y*e)}size(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){if(this.size()===0)return 0;let e=Math.atan(this.y/this.x)+.5*Math.PI;return this.x<0&&(e+=Math.PI),e}normalize(e=!1){if(this.x===0&&this.y===0)return P.zero();const t=this.size();return e?(this.x/=t,this.y/=t,this):new P(this.x/t,this.y/t)}distanceTo(e){const t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)}equals(e){return this.x===e.x&&this.y===e.y}toString(){return`Vector { x: ${this.x}, y: ${this.y} }`}}class wt{x;y;w;h;constructor(e,t,n,o){this.x=e,this.y=t,this.w=n,this.h=o}static zero(){return new wt(0,0,0,0)}contains(e,t){return this.x<=e&&e<=this.x+this.w&&this.y<=t&&t<=this.y+this.h}edgePoint(e){const t=2*(this.w+this.h),n=.5*t,o=$e(e,0,1)*t;return o<=this.w?new P(this.x+o,this.y):o<=n?new P(this.x+this.w,this.y+(o-this.w)):o<=n+this.w?new P(this.x+this.w-(o-n),this.y+this.h):new P(this.x,this.y+t-o)}}let Me=class{x;y;r;constructor(e,t,n){this.x=e,this.y=t,this.r=n}intersectsWith(e){return Math.sqrt((e.x-this.x)**2+(e.y-this.y)**2)<=this.r+e.r}midpointTo(e){const t=this.r/(this.r+e.r),n=e.x-this.x,o=e.y-this.y;return new P(this.x+t*n,this.y+t*o)}contains(e,t){return new P(this.x,this.y).distanceTo(new P(e,t))<=this.r}};const R=s=>Math.PI*s/180,$e=(s,e,t)=>Math.max(e,Math.min(s,t)),qe=(s,e,t)=>{const n=s+t*(e-s);return s<e?$e(n,s,e):$e(n,e,s)};function Ko(s,e){const t=Math.PI*2,n=(e-s)%t;return 2*n%t-n}const Jo=(s,e,t)=>s+Ko(s,e)*t,Ke=(s,e,t)=>{const[n,o,l,u]=On(s),[f,c,g,y]=On(e),i=qe(n,f,t),r=qe(o,c,t),d=qe(l,g,t),m=qe(u,y,t);return`rgba(${i},${r},${d},${m})`},On=s=>{const e=parseInt(s.substring(1,3)||"0",16),t=parseInt(s.substring(3,5)||"0",16),n=parseInt(s.substring(5,7)||"0",16),o=parseInt(s.substring(7)||"ff",16)/255;return[e,t,n,o]},V=(s,e,t=!1)=>{const n=s+Math.random()*(e-s);return t?Math.trunc(n):n};var Y=(s=>(s.NONE="None",s.CONSOLE="Console",s.WEAPONS="Weapons",s))(Y||{});function tn(s,e,t,n,o,l,u){const f=.5*l,c=.5*u,g=n/t,y=o/t,i=.5*g,r=.5*y,d=[-f+i,f-i],m=[-c+r,c-r],a=$e(s,d[0],d[1]),p=$e(e,m[0],m[1]);return new wt(a,p,g,y)}const bi=(s=.5)=>{s=$e(s,0,1);const e=s*255,t=255-e,n=V(e,e+t),o=V(e,e+t),l=V(e,e+t);return`rgb(${n},${o},${l})`};function wi(s){if(s>=60){const e=Math.trunc(s/60),t=s%60;return t===0?e===1?"1 min":`${e} mins`:e===1?`1 min ${t}s`:`${e} mins ${t}s`}else return`${s}s`}function ze(s,e){s.save(),s.beginPath(),s.roundRect(e.x,e.y,e.width,e.height,e.radius||2),s.shadowBlur=e.shadowBlur||0,s.shadowColor=e.shadowColor||"",s.fillStyle=e.trackColor||"orange",s.fill(),s.beginPath(),s.roundRect(e.x,e.y,e.progress*e.width,e.height,e.radius||2),s.fillStyle=e.fillColor||"green",s.fill(),e.label&&(s.beginPath(),s.fillStyle="white",s.textAlign="left",s.font='normal 8px "Monospace"',s.textBaseline="middle",s.fillText(e.label,e.x+e.width+4,e.y+.5*e.height)),s.restore()}class Qo{cb;timeout;constructor(e,t){this.cb=e,this.timeout=t}get isTimedOut(){return this.timeout<=0}update(e){this.timeout>=0&&(this.timeout-=e,this.timeout<=0&&this.cb())}}class pn{constructor(e,t=0){this.bounds={x:e.x||0,y:e.y||0,width:e.width,height:e.height},this.maxObjects=typeof e.maxObjects=="number"?e.maxObjects:10,this.maxLevels=typeof e.maxLevels=="number"?e.maxLevels:4,this.level=t,this.objects=[],this.nodes=[]}getIndex(e){return e.qtIndex(this.bounds)}split(){const e=this.level+1,t=this.bounds.width/2,n=this.bounds.height/2,o=this.bounds.x,l=this.bounds.y,u=[{x:o+t,y:l},{x:o,y:l},{x:o,y:l+n},{x:o+t,y:l+n}];for(let f=0;f<4;f++)this.nodes[f]=new pn({x:u[f].x,y:u[f].y,width:t,height:n,maxObjects:this.maxObjects,maxLevels:this.maxLevels},e)}insert(e){if(this.nodes.length){const t=this.getIndex(e);for(let n=0;n<t.length;n++)this.nodes[t[n]].insert(e);return}if(this.objects.push(e),this.objects.length>this.maxObjects&&this.level<this.maxLevels){this.nodes.length||this.split();for(let t=0;t<this.objects.length;t++){const n=this.getIndex(this.objects[t]);for(let o=0;o<n.length;o++)this.nodes[n[o]].insert(this.objects[t])}this.objects=[]}}retrieve(e){const t=this.getIndex(e);let n=this.objects;if(this.nodes.length)for(let o=0;o<t.length;o++)n=n.concat(this.nodes[t[o]].retrieve(e));return n=n.filter(function(o,l){return n.indexOf(o)>=l}),n}clear(){this.objects=[];for(let e=0;e<this.nodes.length;e++)this.nodes.length&&this.nodes[e].clear();this.nodes=[]}}class De{constructor(e){this.x=e.x,this.y=e.y,this.r=e.r,this.data=e.data}qtIndex(e){const t=[],n=e.width/2,o=e.height/2,l=e.x+n,u=e.y+o,f=[[l,e.y],[e.x,e.y],[e.x,u],[l,u]];for(let c=0;c<f.length;c++)De.intersectRect(this.x,this.y,this.r,f[c][0],f[c][1],f[c][0]+n,f[c][1]+o)&&t.push(c);return t}static intersectRect(e,t,n,o,l,u,f){const c=e-Math.max(o,Math.min(e,u)),g=t-Math.max(l,Math.min(t,f));return c*c+g*g<n*n}}function es(){const[n,o]=W({w:0,h:0}),[l,u]=W(wt.zero()),[f,c]=W(P.zero()),[g,y]=W(1),[i,r]=W(1);function d(){r(1)}function m(){r(0)}return{mapSize:5e3,minZoom:.5,maxZoom:4,opacity:i,screen:n,view:l,pan:f,zoom:g,setScreen:o,setView:u,setPan:c,setZoom:y,showOutput:d,hideOutput:m}}const k=es();function ts(){const[s,e]=W(!1),[t,n]=W(1),[o,l]=W(1),[u,f]=W([]),c=new pn({x:-.5*k.mapSize,y:-.5*k.mapSize,width:k.mapSize,height:k.mapSize}),g=[];function y(){n(0),l(0),e(!0)}function i(){n(1),l(1),e(!1)}function r(w,E){const D=new Qo(w,E);f(M=>[...M,D])}function d(w){f(E=>E.filter(D=>!w.includes(D)))}function m(w){c.clear(),w.forEach(E=>c.insert(E))}function a(w,E){return c.retrieve(w).filter(D=>w!==D&&w.getBounds().intersectsWith(D.getBounds())&&(E?E(D):!0))}function p(w,E){if(!g.find(M=>M.type===w&&M.handler===E)){const M={type:w,handler:E};g.push(M)}}function h(w,E){for(let D=0;D<g.length;D++){const M=g[D];if(M.type===w&&M.handler===E){g.splice(D,1);break}}}function _(w){g.filter(E=>E.type===w.type).forEach(E=>E.handler(w))}return{isPaused:s,timeScale:t,inputScale:o,schedules:u,pause:y,resume:i,setInputScale:l,schedule:r,unschedule:d,updateCollisionObjects:m,findCollisionObjects:a,onEvent:p,offEvent:h,broadcastEvent:_}}const H=ts();class he{type;data;constructor(e){this.type=e.type,this.data=e.data}}function ns(){const[s,e]=W([]),[t,n]=W([]),[o,l]=W({}),[u,f]=W(Y.NONE),[c,g]=W(!1),[y,i]=W(),[r,d]=W(0),[m,a]=W(!1),[p,h]=W(!1);function _(O){m()||(n(O?.objects||[]),e(O?.logs||[]),a(!0),t().forEach(B=>B.onStart()))}function w(O){const B=new Do(O);e([...s(),B])}function E(O){if(!p())if(O)f(O);else{const B=[Y.NONE,Y.CONSOLE];c()&&B.push(Y.WEAPONS);const ee=(B.indexOf(u())+1)%B.length;f(B[ee])}}function D(){g(!0)}function M(O){t().includes(O)||(n([...t(),O]),O.onStart(),H.broadcastEvent(new he({type:"objectadd",data:{object:O}})))}function j(O){return t().filter(O)}function T(O,B){return O.name.trim().toLowerCase()===B.trim().toLowerCase()}function S(O){if(O)return t().find(typeof O=="string"?B=>T(B,O):O)}function A(O){o().object?.deselect(),l({object:O}),O?.select()}function L(){return o().object}function z(O){O.onDestroy(),O===L()&&A(void 0),n(t().filter(B=>B!==O)),H.broadcastEvent(new he({type:"objectremove",data:{object:O}}))}function U(){n([...t()]),l({object:o().object}),H.updateCollisionObjects(t())}function $(O){w({msg:O});const B=o().object;if(Sn.test(O)){const q=Sn.process(O),ee=S(te=>te.name.trim().toLowerCase()===q.trim().toLowerCase()&&te.isRevealed);ee?A(ee):w({msg:`Unknown object "${q}". Scan to reveal hidden objects`,type:"output",status:"error"})}else Yo.test(O)?A(void 0):B?B.onCommand(O):bt.test(O)?w({msg:["select <name> - Select object named <name>","exit          - Exit from selected object","","help          - Show this help message"].join(`
`),type:"output",status:"info"}):w({msg:`Unknown command "${O}"!`,type:"output",status:"error"})}function x(O){i(O)}function F(O){d(B=>{const q=$e(B+O,0,1);return q>=1&&H.broadcastEvent(new he({type:"repaircomplete",data:void 0})),q})}function N(){h(!0)}return{logs:s,objects:t,selected:L,activeHud:u,currentObjective:y,repairProgress:r,isOver:p,init:_,log:w,cycleHud:E,activateWeapons:D,addObject:M,findObjects:j,findObject:S,selectObject:A,removeObject:z,refreshObjects:U,processCommand:$,updateObjective:x,updateRepairProgress:F,end:N}}const v=ns(),Xt=(s,e,t,n)=>{if(!e.includes(t)){e.push(t);const o=Ti(e.length,n);for(let l=0;l<e.length;l++){const u=o[l];e[l].redock(u)}t.dockableName=s}},Vt=(s,e,t)=>{if(s.includes(e)){const n=s.indexOf(e);if(n!==-1){s.splice(n,1);const o=Ti(s.length,t);for(let l=0;l<s.length;l++){const u=o[l];s[l].redock(u)}e.dockableName=void 0}}},Yt=(s,e)=>{s.copy(e)},Ti=(s,e=P.zero(),t=new P(50,35),n=3)=>{if(s<=0)return[];const o=[],l=Math.ceil(s/n);let u=s,f=0;for(let c=0;c<l;c++){const g=Math.min(n,u);for(let y=0;y<g;y++)o.push(new P((-.5*(g-1)+y)*t.x+e.x,f*t.y+e.y));u-=g,f+=1}return o};class Le{duration;repeat;alternate;multiplier;onStatusChanged;$value;$status;direction;constructor(e){this.duration=e.duration,this.repeat=e.repeat||!1,this.alternate=e.alternate||!1,this.multiplier=1e3/this.duration,this.onStatusChanged=e.onStatusChanged,this.direction="forward",this.$status="idle",this.$value=0}get value(){return this.$value}get status(){return this.$status}update(e){if(this.$status==="playing"){const t=(this.direction==="forward"?1:-1)*e*this.multiplier;this.$value=$e(this.$value+t,0,1),this.direction==="forward"&&this.$value===1?this.repeat?this.alternate?this.direction="reverse":this.$value=0:this.pause():this.direction==="reverse"&&this.$value===0&&(this.repeat?this.alternate?this.direction="forward":this.$value=1:this.pause())}}play(){return this.$status="playing",this.updateStatusListeners(),this}pause(){return this.$status="idle",this.updateStatusListeners(),this}stop(){return this.$value=0,this.$status="idle",this.updateStatusListeners(),this}updateStatusListeners(){this.onStatusChanged?.(this.$status)}}class Te{static SELECTED_INDICATOR_COLOR="#ffff00";static SELECTED_INDICATOR_WIDTH=1;id;name;position;rotation;isSelected;isRevealed;selectedAnimation;constructor(e){this.id=vi(),this.name=e,this.position=P.zero(),this.rotation=R(0),this.isSelected=!1,this.isRevealed=!0,this.selectedAnimation=new Le({duration:2e3,repeat:!0}).play()}onStart(){}onUpdate(e){}onDraw(e){}onCommand(e){}onCollision(e){}onMessage(e){}onDestroy(){}getBounds(){return new Me(0,0,0)}qtIndex(e){return De.prototype.qtIndex.call({x:0,y:0,r:0},e)}renderOutsideView(){return!1}select(){this.isSelected||(this.isSelected=!0,this.selectedAnimation.play())}deselect(){this.isSelected&&(this.isSelected=!1,this.selectedAnimation.stop())}updateSelectedAnimation(e){this.isSelected&&this.selectedAnimation.update(e)}drawSelectedIndicator(e,t){if(this.isSelected){const n=this.position.x+(t.offset?.x||0),o=this.position.y+(t.offset?.y||0),l=this.selectedAnimation.value*R(360);e.save(),e.translate(n,o),e.rotate(l),e.translate(-n,-o),e.setLineDash([]),e.strokeStyle=Te.SELECTED_INDICATOR_COLOR,e.lineWidth=Te.SELECTED_INDICATOR_WIDTH,e.shadowColor=Te.SELECTED_INDICATOR_COLOR,e.shadowBlur=48;for(let u=0;u<4;u++){const f=R(u*90+15),c=R((u+1)*90-15);e.beginPath(),e.arc(n,o,t.radius,f,c),e.stroke()}e.restore()}}translate(e){this.position.add(e,!0),this.rotation=e.angle()}}class st extends Te{health;constructor(e,t,n){super(e),this.position.copy(t),this.health=n}onMessage(e){super.onMessage(e),e.damage&&(this.health-=parseFloat(e.damage),this.health<=0&&v.removeObject(this))}}class Ot extends Te{constructor(e,t){super(e),this.position.copy(t),this.isRevealed=!1}}class K extends Ot{static COUNT=0;static NAME_PREFIX="C";static TOP_COLOR="#f3ff00";static BOTTOM_COLOR="#b3bb00";static BORDER_SPACING=5;static DOCKING_OFFSET=new P(0,35);static MIN_CREDITS=50;static MAX_CREDITS=350;dockers;totalCredits;startingSize;size;$credits;constructor(e,t){super(`${K.NAME_PREFIX}${K.COUNT++}`,e),t=t||V(K.MIN_CREDITS,K.MAX_CREDITS),this.totalCredits=this.$credits=t,this.startingSize=this.size=Math.min(10,t/15),this.dockers=[]}get credits(){return this.$credits}onUpdate(e){super.onUpdate(e),super.updateSelectedAnimation(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=this.startingSize+K.BORDER_SPACING;e.beginPath(),e.moveTo(t,n-.5*o),e.lineTo(t-.5*o,n),e.lineTo(t,n+.5*o),e.lineTo(t+.5*o,n),e.closePath(),e.strokeStyle=K.TOP_COLOR,e.stroke(),e.beginPath(),e.moveTo(t,n-.5*this.size),e.lineTo(t-.5*this.size,n),e.lineTo(t+.5*this.size,n),e.closePath(),e.fillStyle=K.TOP_COLOR,e.shadowColor=K.TOP_COLOR,e.shadowBlur=48,e.fill(),e.beginPath(),e.moveTo(t,n+.5*this.size),e.lineTo(t-.5*this.size,n),e.lineTo(t+.5*this.size,n),e.closePath(),e.fillStyle=K.BOTTOM_COLOR,e.fill(),e.fillStyle="white",e.font="normal 11px Monospace",e.textBaseline="middle",e.textAlign="center",e.fillText(this.isRevealed?this.name:"???",t,n-o-4),ze(e,{x:t-10,y:n+15,width:20,height:2,radius:2,progress:this.$credits/this.totalCredits,trackColor:K.BOTTOM_COLOR+"66",fillColor:K.TOP_COLOR}),super.drawSelectedIndicator(e,{radius:o})}onCommand(e){super.onCommand(e),v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}canDock(){return!0}dock(e){this.canDock()&&Xt(this.name,this.dockers,e,this.position.add(K.DOCKING_OFFSET))}undock(e){this.canDock()&&Vt(this.dockers,e,this.position.add(K.DOCKING_OFFSET))}mine(e){if(this.$credits<=0)return 0;const t=this.$credits,n=this.$credits-e;if(this.$credits=Math.max(0,n),this.size=this.startingSize*(this.$credits/this.totalCredits),this.$credits<=0){for(const o of this.dockers)this.undock(o);H.broadcastEvent(new he({type:"crystalexhaust",data:void 0})),v.removeObject(this)}return Math.abs(t-this.$credits)}getBounds(){return new Me(this.position.x,this.position.y,.5*this.startingSize+K.BORDER_SPACING)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:.5*this.startingSize+K.BORDER_SPACING},e)}}class Ae extends Ot{static DOCKING_OFFSET=new P(0,35);size;color;dockers;constructor(e,t,n,o){super(e,t),this.size=n,this.color=o,this.dockers=[]}onUpdate(e){super.onUpdate(e),super.updateSelectedAnimation(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;e.beginPath(),e.arc(t,n,this.size,R(0),R(360)),e.fillStyle=this.color,e.fill(),e.rotate(-this.rotation),e.beginPath(),e.fillStyle="white",e.font='normal 11px "Monospace"',e.textAlign="center",e.fillText(this.isRevealed?this.name:"???",t,n-this.size-10),super.drawSelectedIndicator(e,{radius:this.size+4})}onCommand(e){super.onCommand(e),v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}canDock(){return!0}dock(e){this.canDock()&&Xt(this.name,this.dockers,e,this.position.add(Ae.DOCKING_OFFSET))}undock(e){this.canDock()&&Vt(this.dockers,e,this.position.add(Ae.DOCKING_OFFSET))}getBounds(){return new Me(this.position.x,this.position.y,this.size)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:this.size},e)}}class Ie{base;multiplier;increment;constructor(e,t,n){this.base=e,this.multiplier=t,this.increment=n}get val(){return this.base*this.multiplier}upgrade(){return new Ie(this.base,this.multiplier+this.increment,this.increment)}}function is(){const[s,e]=W(new Ie(12,1,1)),[t,n]=W(new Ie(30,1,1)),[o,l]=W(new Ie(25,1,1)),[u,f]=W(new Ie(1,1,1)),[c,g]=W(new Ie(35,1,1)),[y,i]=W(new Ie(20,1,1)),[r,d]=W(new Ie(.75,1,1)),[m,a]=W(new Ie(25,1,1)),[p,h]=W(new Ie(35,1,1)),[_,w]=W(new Ie(20,1,1)),[E,D]=W(new Ie(3,1,1)),[M,j]=W(new Ie(8,1,1)),[T,S]=W(new Ie(15,1,1));return{starshipFireRate:s,starshipScanTime:t,minerMoveSpeed:o,minerMineSpeed:u,minerCapacity:c,refineryMoveSpeed:y,refineryBuildSpeed:r,transporterMoveSpeed:m,transporterCapacity:p,haulerMoveSpeed:_,droneFireRate:E,missileDamage:M,asteroidDamage:T,setStarshipFireRate:e,setStarshipScanTime:n,setMinerMoveSpeed:l,setMinerMineSpeed:f,setMinerCapacity:g,setRefineryMoveSpeed:i,setRefineryBuildSpeed:d,setTransporterMoveSpeed:a,setTransporterCapacity:h,setHaulerMoveSpeed:w,setDroneFireRate:D,setMissileDamage:j,setAsteroidDamage:S}}const we=is();class Z extends st{static COST=1e3;static MAX_COUNT=3;static COUNT=0;static HEALTH=150;static DOCKING_OFFSET=new P(0,35);static COLOR="#34ff78";static NAME_PREFIX="R";dockers;dockableName;status;planetName;buildProgress=0;nextBuildProgressStop=0;requisition;shipName;totalRequisitions;requisitionCount;buildSpeed;requisitionAnimation;constructor(e){super(`${Z.NAME_PREFIX}${Z.COUNT++}`,P.zero(),Z.HEALTH),this.shipName=e,this.dockableName=void 0,this.status="Docked",this.requisition=void 0,this.totalRequisitions=V(5,10,!0),this.buildSpeed=we.refineryBuildSpeed().val,this.requisitionCount=0,this.requisitionAnimation=new Le({duration:1e3,repeat:!0,alternate:!0}).play(),this.dockers=[]}processShipment(e){if(this.status!=="Disabled"&&this.requisition){const t=e.anythium-this.requisition.anythium,n=e.divinium-this.requisition.divinium,o=e.materium-this.requisition.materium;return t>=0&&n>=0&&o>=0?(this.requisition=void 0,this.buildSpeed*=.5):(this.requisition.anythium=Math.abs(Math.min(0,t)),this.requisition.divinium=Math.abs(Math.min(0,n)),this.requisition.materium=Math.abs(Math.min(0,o))),{credits:0,anythium:Math.max(0,t),divinium:Math.max(0,n),materium:Math.max(0,o)}}else return{...e}}transferHyperDriveComponent(){return this.status==="Completed"?(this.status="Disabled",!0):!1}onUpdate(e){if(super.onUpdate(e),super.updateSelectedAnimation(e),this.status!=="Disabled"){const t=v.findObject(this.shipName),n=v.findObject(this.planetName),o=this.dockableName===t?.name,l=this.dockableName===n?.name,u=!!n&&this.position.distanceTo(n.position)<5;if(this.requisitionAnimation.update(e),n)if(o&&t?.undock(this),l)this.buildProgress<1?this.requisition?this.status="Awaiting Requisition":this.buildProgress<this.nextBuildProgressStop?(this.buildProgress+=this.buildSpeed*e,this.status="Processing"):(this.requisition={credits:0,anythium:V(0,10,!0),divinium:V(0,10,!0),materium:V(0,10,!0)},this.requisitionCount++,this.nextBuildProgressStop=this.requisitionCount/this.totalRequisitions,this.status="Docked"):(this.status="Completed",H.broadcastEvent(new he({type:"hyperdrivepartbuild",data:{count:le.hyperDriveParts()+1}})));else if(u)n?.dock(this),this.status="Docked",H.broadcastEvent(new he({type:"refinerydock",data:void 0}));else{const f=n.position.subtract(this.position).normalize(!0).multiply(e*we.refineryMoveSpeed().val,!0);this.translate(f),this.status="En route"}}}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;if(e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),e.beginPath(),e.moveTo(t-4,n-10),e.lineTo(t-5,n+8),e.lineTo(t+5,n+8),e.lineTo(t+4,n-10),e.closePath(),e.lineCap="round",e.lineJoin="round",e.shadowBlur=48,e.shadowColor=Z.COLOR,e.strokeStyle=Z.COLOR,e.stroke(),this.status==="En route"&&(e.beginPath(),e.moveTo(t-3,n+10),e.lineTo(t+3,n+10),e.lineTo(t,n+13),e.closePath(),e.fillStyle=Z.COLOR,e.lineCap="round",e.lineJoin="round",e.fill()),e.beginPath(),e.arc(t,n-4,2.5,0,R(360)),e.strokeStyle=Z.COLOR,e.stroke(),e.beginPath(),e.arc(t,n+2,3.5,0,R(360)),e.fillStyle=Z.COLOR,e.fill(),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),e.fillStyle="white",e.font='normal 12px "Ubuntu Mono"',e.fillText(this.name,t+15,n+5),ze(e,{x:t-10,y:n+15,width:20,height:2,progress:this.health/Z.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/Z.HEALTH),trackColor:"#ff000044"}),(this.status==="Processing"||this.status==="Awaiting Requisition")&&ze(e,{x:t+15,y:n+10,width:15,height:2,progress:this.buildProgress,fillColor:this.status==="Awaiting Requisition"?"red":void 0,label:`${Math.trunc(100*this.buildProgress)}%`}),this.status==="Awaiting Requisition"||this.status==="Completed"){const o=e.globalAlpha;e.globalAlpha=this.requisitionAnimation.value,e.beginPath(),e.fillStyle=this.status==="Completed"?"limegreen":"red",e.fillRect(t-15,n-4,4,8),e.beginPath(),e.arc(t-13,n+7,2,0,R(360)),e.fill(),e.globalAlpha=o}super.drawSelectedIndicator(e,{radius:15})}onDestroy(){super.onDestroy();for(const e of this.dockers)this.undock(e);this.dockableName&&v.findObject(this.dockableName)?.undock(this)}onCommand(e){if(super.onCommand(e),bt.test(e))v.log({msg:["deploy <name> - Deploy to planet <name>","","help          - Show this help message"].join(`
`),type:"output",status:"info"});else if(yt.test(e))if(this.planetName)v.log({msg:"Command rejected! Refinery cannot be redeployed",type:"output",status:"error"});else{const t=yt.process(e),n=v.findObject(t);n instanceof Ae&&n?.isRevealed?(v.findObject(this.shipName)?.undock(this),this.planetName=n.name):v.log({msg:"Command rejected! Object is not a planet",type:"output",status:"error"})}else v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}canDock(){const e=v.findObject(this.planetName);return this.dockableName===e?.name}dock(e){this.canDock()&&Xt(this.name,this.dockers,e,this.position.add(Z.DOCKING_OFFSET))}undock(e){this.canDock()&&Vt(this.dockers,e,this.position.add(Z.DOCKING_OFFSET))}redock(e){Yt(this.position,e),this.rotation=0}getBounds(){return new Me(this.position.x,this.position.y,10)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:10},e)}}function os(){const[s,e]=W(0),[t,n]=W(0),[o,l]=W(0),[u,f]=W(0),[c,g]=W(0),[y,i]=W(!1);function r(p){y()||(e(p?.credits||0),n(p?.anythium||0),l(p?.divinium||0),f(p?.materium||0),i(!0))}function d(p){let h=Math.random(),_=Math.random(),w=Math.random(),E=Math.random();const D=h+_+w+E;h/=D,_/=D,w/=D,E/=D,n(t()+Math.round(h*p)),l(o()+Math.round(_*p)),f(u()+Math.round(w*p)),e(s()+Math.round(E*p)),H.broadcastEvent(new he({type:"resourcesadd",data:{resource:{anythium:t(),divinium:o(),materium:u(),credits:s()}}}))}function m(p){e(Math.max(0,s())-(p?.credits||0)),n(Math.max(0,t())-(p?.anythium||0)),l(Math.max(0,o())-(p?.divinium||0)),f(Math.max(0,u())-(p?.materium||0)),H.broadcastEvent(new he({type:"resourcesconsume",data:{resource:{anythium:t(),divinium:o(),materium:u(),credits:s()}}}))}function a(){g($e(c()+1,0,Z.MAX_COUNT))}return{credits:s,anythium:t,divinium:o,materium:u,hyperDriveParts:c,init:r,add:d,consume:m,addHyperDrivePart:a}}const ss=os(),le=ss;class J extends st{static COST=150;static COUNT=0;static HEALTH=50;static RADIUS=3;static OUTLINE_RADIUS=7;static STROKE_WIDTH=1;static COLOR="#f7008a";static NAME_PREFIX="M";dockableName;status;resources=0;capacity=35;shipName;crystalName;isMining=!1;constructor(e){super(`${J.NAME_PREFIX}${J.COUNT++}`,P.zero(),J.HEALTH),this.shipName=e,this.dockableName=void 0,this.crystalName=void 0,this.status="Docked"}onUpdate(e){super.onUpdate(e),super.updateSelectedAnimation(e),this.isMining=!1;const t=v.findObject(this.shipName),n=v.findObject(this.crystalName),o=this.dockableName===t?.name,l=this.dockableName===n?.name,u=this.resources>=this.capacity,f=!!n&&n.credits>0,c=n&&this.position.distanceTo(n.position)<5,g=t&&this.position.distanceTo(t.position)<5;if(!u&&f)if(o&&t?.undock(this),l)this.resources+=n.mine(we.minerMineSpeed().val*e),this.status="Mining",this.isMining=!0;else if(c)n?.dock(this),this.status="Docked";else{const y=n.position.subtract(this.position).normalize(!0).multiply(e*we.minerMoveSpeed().val,!0);this.translate(y),this.status="En route"}else if(l&&n?.undock(this),t&&!o){const y=t.position.subtract(this.position).normalize(!0).multiply(e*we.minerMoveSpeed().val,!0);this.translate(y),this.status="En route",g&&(t.dock(this),le.add(this.resources),this.resources=0,this.status="Docked")}}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;if(e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),e.beginPath(),e.arc(t,n,J.RADIUS,R(0),R(360)),e.lineCap="round",e.lineJoin="round",e.shadowBlur=48,e.shadowColor=J.COLOR,e.fillStyle=J.COLOR,e.fill(),this.status==="En route"&&(e.beginPath(),e.moveTo(t-2,n+J.OUTLINE_RADIUS),e.lineTo(t+2,n+J.OUTLINE_RADIUS),e.lineTo(t,n+J.OUTLINE_RADIUS+5),e.lineTo(t-2,n+J.OUTLINE_RADIUS),e.fillStyle=J.COLOR,e.fill()),e.beginPath(),e.arc(t,n,J.OUTLINE_RADIUS,R(-180),R(0)),e.lineWidth=J.STROKE_WIDTH,e.strokeStyle=J.COLOR,e.stroke(),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),e.fillStyle="white",e.font='normal 12px "Ubuntu Mono"',e.fillText(this.name,t+J.RADIUS+10,n+5),ze(e,{x:t-10,y:n+15,width:20,height:2,progress:this.health/J.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/J.HEALTH),trackColor:"#ff000044"}),this.isMining){const o=this.resources/this.capacity;ze(e,{x:t-7.5,y:n+20,width:15,height:2,progress:o,label:`${Math.trunc(100*o)}%`})}super.drawSelectedIndicator(e,{radius:J.OUTLINE_RADIUS+5})}onCommand(e){if(super.onCommand(e),bt.test(e))v.log({msg:["mine <name> - Mine credits from crystal <name>","","help        - Show this help message"].join(`
`),type:"output",status:"info"});else if(An.test(e))if(this.status!=="En route"){const t=An.process(e),n=v.findObject(t);n instanceof K&&n.isRevealed?(v.findObject(this.crystalName)?.undock(this),this.crystalName=n.name):v.log({msg:"Command rejected! Object is not a crystal",type:"output",status:"error"})}else v.log({msg:"Command rejected! Miner is not docked",type:"output",status:"error"});else v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}onDestroy(){super.onDestroy(),this.dockableName&&v.findObject(this.dockableName)?.undock(this)}redock(e){Yt(this.position,e),this.rotation=0}getBounds(){return new Me(this.position.x,this.position.y,J.RADIUS)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:J.RADIUS},e)}}const de={credits:{hex:"#22c55e",classname:"!text-green-500"},anythium:{hex:"#a855f7",classname:"!text-purple-500"},divinium:{hex:"#fde047",classname:"!text-yellow-300"},materium:{hex:"#67e8f9",classname:"!text-cyan-300"}};class Oe extends st{static COST=350;static COUNT=0;static HEALTH=70;static COLOR="#ff8f34";static NAME_PREFIX="T";dockableName;targetName;status;cargo;shipName;constructor(e){super(`${Oe.NAME_PREFIX}${Oe.COUNT++}`,P.zero(),Oe.HEALTH),this.shipName=e,this.targetName=e,this.dockableName=void 0,this.status="Docked",this.cargo={credits:0,anythium:0,divinium:0,materium:0}}cargoAmount(){return this.cargo.credits+this.cargo.anythium+this.cargo.divinium+this.cargo.materium}onUpdate(e){super.onUpdate(e),super.updateSelectedAnimation(e);const t=v.findObject(this.targetName),n=this.dockableName===t?.name,o=n&&t instanceof ne,l=n&&t instanceof Z,u=t&&this.position.distanceTo(t.position)<5;if(t)if(n)this.status="Docked";else{(o||l)&&t.undock(this);const f=t.position.subtract(this.position).normalize(!0).multiply(e*we.transporterMoveSpeed().val,!0);this.translate(f),this.status="En route",u&&(t.dock(this),this.status="Docked",t instanceof Z&&H.broadcastEvent(new he({type:"transporterdock",data:void 0})))}else this.targetName="Ship"}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=12;e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),e.beginPath(),e.globalAlpha=.2,e.lineCap="round",e.lineJoin="round",e.shadowBlur=48,e.shadowColor=Oe.COLOR,e.fillStyle=Oe.COLOR,e.fillRect(t-3,n-6,6,o),e.globalAlpha=1,this.status==="En route"&&(e.beginPath(),e.moveTo(t-2.5,n+8),e.lineTo(t+2.5,n+8),e.lineTo(t,n+11),e.closePath(),e.fillStyle=Oe.COLOR,e.fill()),e.beginPath(),e.moveTo(t-3,n-7),e.lineTo(t-4,n-7),e.lineTo(t-5,n-5),e.lineTo(t-5,n-2),e.lineTo(t-4,n-1),e.lineTo(t-4,n+1),e.lineTo(t-5,n+2),e.lineTo(t-5,n+5),e.lineTo(t-4,n+7),e.lineTo(t-3,n+7),e.closePath(),e.fillStyle=Oe.COLOR,e.fill(),e.beginPath(),e.moveTo(t+3,n-7),e.lineTo(t+4,n-7),e.lineTo(t+5,n-5),e.lineTo(t+5,n-2),e.lineTo(t+4,n-1),e.lineTo(t+4,n+1),e.lineTo(t+5,n+2),e.lineTo(t+5,n+5),e.lineTo(t+4,n+7),e.lineTo(t+3,n+7),e.closePath(),e.fillStyle=Oe.COLOR,e.fill();const l=[[this.cargo.anythium,de.anythium.hex],[this.cargo.divinium,de.divinium.hex],[this.cargo.materium,de.materium.hex]];let u=n+6;for(const[f,c]of l){const g=o*f/we.transporterCapacity().val;u-=g,e.fillStyle=c,e.fillRect(t-3,u,6,g)}e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),e.fillStyle="white",e.font='normal 12px "Ubuntu Mono"',e.fillText(this.name,t+12,n+5),ze(e,{x:t-10,y:n+15,width:20,height:2,progress:this.health/Oe.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/Oe.HEALTH),trackColor:"#ff000044"}),super.drawSelectedIndicator(e,{radius:12})}onDestroy(){super.onDestroy(),this.dockableName&&v.findObject(this.dockableName)?.undock(this)}onCommand(e){if(super.onCommand(e),bt.test(e))v.log({msg:["deploy <name>    - Deploy to ship or refinery","                   <name>","load <x> <y> <z> - Load <x> anythium, <y>","                   divinium and <z> materium","                   from ship","unload           - Unloads resources to refinery","","help             - Show this help message"].join(`
`),type:"output",status:"info"});else if(yt.test(e))if(this.status!=="En route"){const t=yt.process(e),n=v.findObject(t);n instanceof ne||n instanceof Z?n.canDock()?(v.findObject(this.targetName)?.undock(this),this.targetName=n.name):v.log({msg:"Command rejected! Cannot dock to target at this time",type:"output",status:"error"}):v.log({msg:"Command rejected! Object is not a starship or refinery",type:"output",status:"error"})}else v.log({msg:"Command rejected! Transporter is not docked!",type:"output",status:"error"});else if(Cn.test(e)){const t=v.findObject(this.targetName),n=this.dockableName===t?.name;if(t instanceof ne&&n){const[o,l,u]=Cn.process(e),f=o+l+u;le.anythium()-o>=0&&le.divinium()-l>=0&&le.materium()-u>=0?this.cargoAmount()+f<=we.transporterCapacity().val?(this.cargo.anythium+=o,this.cargo.divinium+=l,this.cargo.materium+=u,le.consume({anythium:o,divinium:l,materium:u}),H.broadcastEvent(new he({type:"transporterload",data:void 0}))):v.log({msg:"Command rejected! Insufficient cargo space",type:"output",status:"error"}):v.log({msg:"Command rejected! Insufficient resource",type:"output",status:"error"})}else v.log({msg:"Command rejected! Transporter is not docked at ship!",type:"output",status:"error"})}else if(_i.test(e)){const t=v.findObject(this.targetName),n=this.dockableName===t?.name;t instanceof Z&&n?(this.cargo=t.processShipment(this.cargo),H.broadcastEvent(new he({type:"transporterunload",data:void 0}))):v.log({msg:"Command rejected! Transporter is not docked at refinery!",type:"output",status:"error"})}else v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}redock(e){Yt(this.position,e),this.rotation=0}getBounds(){return new Me(this.position.x,this.position.y,6)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:6},e)}}class ae extends st{static COST=650;static COUNT=0;static HEALTH=100;static COLOR="#b9b9b9";static NAME_PREFIX="H";dockableName;targetName;status;isLoaded;shipName;constructor(e){super(`${ae.NAME_PREFIX}${ae.COUNT++}`,P.zero(),ae.HEALTH),this.shipName=e,this.targetName=e,this.dockableName=void 0,this.status="Docked",this.isLoaded=!1}onUpdate(e){super.onUpdate(e),super.updateSelectedAnimation(e);const t=v.findObject(this.targetName),n=this.dockableName===t?.name,o=n&&t instanceof ne,l=n&&t instanceof Z,u=t&&this.position.distanceTo(t.position)<5;if(t)if(n)this.status="Docked";else{(o||l)&&t.undock(this);const f=t.position.subtract(this.position).normalize(!0).multiply(e*we.haulerMoveSpeed().val,!0);this.translate(f),this.status="En route",u&&(t.dock(this),this.status="Docked",H.broadcastEvent(new he({type:"haulerdock",data:{unit:t}})))}else this.targetName="Ship"}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),e.beginPath(),e.lineCap="round",e.lineJoin="round",e.shadowBlur=48,e.shadowColor=ae.COLOR,e.strokeStyle=ae.COLOR,e.strokeRect(t-3,n-10,6,20),e.beginPath(),e.moveTo(t-7,n),e.lineTo(t-10,n+2),e.lineTo(t-10,n+8),e.lineTo(t-7,n+8),e.closePath(),e.strokeStyle=ae.COLOR,e.stroke(),e.beginPath(),e.moveTo(t+7,n),e.lineTo(t+10,n+2),e.lineTo(t+10,n+8),e.lineTo(t+7,n+8),e.closePath(),e.strokeStyle=ae.COLOR,e.stroke(),e.beginPath(),e.strokeStyle=ae.COLOR,e.strokeRect(t-7,n+4,4,2),e.beginPath(),e.strokeStyle=ae.COLOR,e.strokeRect(t+3,n+4,4,2),this.status==="En route"&&(e.beginPath(),e.moveTo(t-10,n+10),e.lineTo(t-7,n+10),e.lineTo(t-8.5,n+13),e.closePath(),e.fillStyle=ae.COLOR,e.fill(),e.beginPath(),e.moveTo(t+10,n+10),e.lineTo(t+7,n+10),e.lineTo(t+8.5,n+13),e.closePath(),e.fillStyle=ae.COLOR,e.fill()),e.lineWidth=.5,e.beginPath(),e.roundRect(t-1.5,n-7,3,5,2),e.strokeStyle=ae.COLOR,e.stroke();for(let o=n+1;o<=n+7;o+=2.5)e.beginPath(),e.moveTo(t-1.5,o),e.lineTo(t+1.5,o),e.strokeStyle=ae.COLOR,e.stroke();e.lineWidth=1,this.isLoaded&&(e.beginPath(),e.moveTo(t,n+10),e.lineTo(t,n+18),e.strokeStyle=ae.COLOR,e.lineWidth=.5,e.stroke(),e.beginPath(),e.moveTo(t,n+18),e.lineTo(t+4,n+18),e.arc(t+6,n+18,2,R(-180),R(-270),!0),e.lineTo(t+6,n+30),e.arc(t+6,n+32,2,R(-90),R(-180),!0),e.lineTo(t-4,n+32),e.arc(t-6,n+32,2,R(0),R(-90),!0),e.lineTo(t-6,n+20),e.arc(t-6,n+18,2,R(90),R(0),!0),e.lineTo(t,n+18),e.strokeStyle=ae.COLOR,e.lineWidth=1,e.stroke(),e.beginPath(),e.roundRect(t-3,n+21,6,8,2),e.strokeStyle=ae.COLOR,e.stroke()),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),e.fillStyle="white",e.font='normal 12px "Ubuntu Mono"',e.fillText(this.name,t+15,n+5),ze(e,{x:t-10,y:n+15,width:20,height:2,progress:this.health/ae.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/ae.HEALTH),trackColor:"#ff000044"}),super.drawSelectedIndicator(e,{radius:15})}onDestroy(){super.onDestroy(),this.dockableName&&v.findObject(this.dockableName)?.undock(this)}onCommand(e){if(super.onCommand(e),bt.test(e))v.log({msg:["deploy <name> - Deploy to ship or refinery","                <name>","haul          - Haul hyper-drive part from","                refinery","unload        - Unload hyper-drive part at ship","","help          - Show this help message"].join(`
`),type:"output",status:"info"});else if(yt.test(e))if(this.status!=="En route"){const t=yt.process(e),n=v.findObject(t);n instanceof ne||n instanceof Z?n.canDock()?(v.findObject(this.targetName)?.undock(this),this.targetName=n.name):v.log({msg:"Command rejected! Cannot dock to target at this time",type:"output",status:"error"}):v.log({msg:"Command rejected! Object is not a starship or refinery",type:"output",status:"error"})}else v.log({msg:"Command rejected! Hauler is not docked!",type:"output",status:"error"});else if(Zo.test(e)){const t=v.findObject(this.targetName),n=this.dockableName===t?.name;t instanceof Z&&n?t.status==="Completed"?(this.isLoaded=t.transferHyperDriveComponent()||this.isLoaded,H.broadcastEvent(new he({type:"haulerhaul",data:void 0}))):v.log({msg:"Command rejected! Refinery is still building hyper-drive",type:"output",status:"error"}):v.log({msg:"Command rejected! Hauler is not docked at refinery!",type:"output",status:"error"})}else if(_i.test(e)){const t=v.findObject(this.targetName),n=this.dockableName===t?.name;t instanceof ne&&n?this.isLoaded?(le.addHyperDrivePart(),this.isLoaded=!1,H.broadcastEvent(new he({type:"haulerunload",data:{count:le.hyperDriveParts()}}))):v.log({msg:"Command rejected! Hauler is not loaded!",type:"output",status:"error"}):v.log({msg:"Command rejected! Hauler is not docked at ship!",type:"output",status:"error"})}else v.log({msg:`Unknown command "${e}"!`,type:"output",status:"error"})}redock(e){Yt(this.position,e),this.rotation=0}getBounds(){return new Me(this.position.x,this.position.y,10)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:10},e)}}class tt extends Te{static DURATION=15e3;static RADIUS=3536;static NAME="HyperDriveEMP";anim;radius;constructor(e){super(tt.NAME),this.position.copy(e),this.anim=new Le({duration:tt.DURATION,onStatusChanged:t=>{t==="idle"&&H.broadcastEvent(new he({type:"hyperdriveempend",data:void 0}))}}),this.radius=0}activate(){this.anim.status==="idle"&&this.anim.play()}onUpdate(e){super.onUpdate(e),this.anim.update(e),this.radius=qe(0,tt.RADIUS,Math.log(1.69*this.anim.value+1))}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=this.anim.value;e.beginPath(),e.arc(t,n,this.radius,R(0),R(360));const l=e.createRadialGradient(t,n,0,t,n,this.radius);l.addColorStop(0,"#00000000"),l.addColorStop(.75,"#00000000"),l.addColorStop(.95,"#a1ffef"),e.globalAlpha=1-o,e.shadowColor="#ffffff",e.shadowBlur=16,e.fillStyle=l,e.fill()}getBounds(){return new Me(this.position.x,this.position.y,this.radius)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:this.radius},e)}renderOutsideView(){return!0}}class mn extends Te{health;constructor(e,t,n){super(e),this.position.copy(t),this.health=n,this.isRevealed=!0}onMessage(e){super.onMessage(e),e.damage&&(this.health-=parseFloat(e.damage),this.health<=0&&v.removeObject(this))}}class Ve extends Te{static COUNT=0;static NAME_PREFIX="MI";static SPEED=850;static COLOR="#00e2f7";static ALT_COLOR="#f70000";designation;velocity;constructor(e,t,n="unit"){super(`${Ve.NAME_PREFIX}${Ve.COUNT++}`),this.position.copy(e),this.velocity=t.normalize().multiply(Ve.SPEED),this.designation=n;const o=.5*k.mapSize/this.velocity.size();H.schedule(()=>{v.removeObject(this)},o)}onUpdate(e){super.onUpdate(e),this.translate(this.velocity.multiply(e))}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=this.designation==="unit"?Ve.COLOR:Ve.ALT_COLOR;e.translate(t,n),e.rotate(this.velocity.angle()),e.translate(-t,-n),e.beginPath(),e.roundRect(t-3,n-3,1.5,6,2),e.roundRect(t+1.5,n-3,1.5,6,2),e.lineCap="round",e.lineJoin="round",e.shadowBlur=12,e.shadowColor=o,e.fillStyle=o,e.fill(),e.fill(),e.translate(t,n),e.rotate(-this.velocity.angle()),e.translate(-t,-n)}onCollision(e){super.onCollision(e),e.object instanceof Ve||e.object instanceof tt||this.designation==="unit"&&e.object instanceof st||this.designation==="enemy"&&e.object instanceof mn||(v.removeObject(this),e.object.onMessage({damage:we.missileDamage().val}))}getBounds(){return new Me(this.position.x,this.position.y,6)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:this.getBounds().r},e)}}function rs(){const[e,t]=W(0),[n,o]=W(0),[l,u]=W(0),[f,c]=W(!1),[g,y]=W(1);return{speed:500,hPan:e,vPan:n,zoom:l,fire:f,multiplier:g,setHPan:t,setVPan:o,setZoom:u,setFire:c,setMultiplier:y}}const ue=rs(),as=s=>{const e=n=>{n.key==="ArrowUp"&&ue.setVPan(-1),n.key==="ArrowDown"&&ue.setVPan(1),n.key==="ArrowLeft"&&ue.setHPan(-1),n.key==="ArrowRight"&&ue.setHPan(1),n.key==="Control"&&ue.setMultiplier(.25),n.key==="PageUp"&&ue.setZoom(1),n.key==="PageDown"&&ue.setZoom(-1),n.key===" "&&ue.setFire(!0),s.onKeyDown?.(n.key)},t=n=>{(n.key==="ArrowUp"||n.key==="ArrowDown")&&ue.setVPan(0),(n.key==="ArrowLeft"||n.key==="ArrowRight")&&ue.setHPan(0),(n.key==="PageUp"||n.key==="PageDown")&&ue.setZoom(0),n.key==="Control"&&ue.setMultiplier(1),n.key===" "&&ue.setFire(!1),s.onKeyUp?.(n.key)};return at(()=>{window.addEventListener("keydown",e),window.addEventListener("keyup",t),it(()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)})}),null};class Be extends Te{static COUNT=0;static NAME_PREFIX="E";static BASE_DURATION=750;static INNER_EXPLOSION_MAX_RADIUS=2;static INNER_EXPLOSION_COLOR="#ffd99f";static OUTER_EXPLOSION_MAX_RADIUS=5;static OUTER_EXPLOSION_COLOR="#ffc09f";anim;scale;constructor(e,t=1){super(`${Be.NAME_PREFIX}${Be.COUNT++}`),this.position.copy(e),this.anim=new Le({duration:Be.BASE_DURATION,onStatusChanged:n=>{n==="idle"&&v.removeObject(this)}}).play(),this.scale=t}onUpdate(e){super.onUpdate(e),this.anim.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=Math.log10(10-this.anim.value*9),l=this.anim.value*Be.INNER_EXPLOSION_MAX_RADIUS*this.scale,u=this.anim.value*Be.OUTER_EXPLOSION_MAX_RADIUS*this.scale,f=R(0),c=R(360);e.globalAlpha=o,e.beginPath(),e.arc(t,n,u,f,c),e.fillStyle=Ke("#ffffff",Be.OUTER_EXPLOSION_COLOR,this.anim.value),e.fill(),e.beginPath(),e.arc(t,n,l,f,c),e.fillStyle=Ke("#ffffff",Be.INNER_EXPLOSION_COLOR,this.anim.value),e.fill()}}class ne extends st{static NAME="Ship";static HEALTH=1e3;static DOCKING_OFFSET=new P(0,40);static COLOR="#00e2f7";static DECAL_COLOR="#00E2F76f";dockers;scanObjectNames;remainingScanTime;weaponsChargePercent;turretRotation=0;constructor(e){super(ne.NAME,e,ne.HEALTH),this.isSelected=!1,this.rotation=R(90),this.dockers=[],this.scanObjectNames=[],this.remainingScanTime=0,this.weaponsChargePercent=0}onUpdate(e){if(super.onUpdate(e),super.updateSelectedAnimation(e),v.activeHud()===Y.WEAPONS){const{x:t,y:n,w:o,h:l}=k.view(),u=t+.5*o,f=n+.5*l,c=new P(u,f),g=.5*Math.PI;this.turretRotation=c.subtract(this.position).angle()-g,ue.fire()?(this.weaponsChargePercent+=e*we.starshipFireRate().val,this.weaponsChargePercent>=1&&(this.weaponsChargePercent=0,this.fireWeapon(c))):this.weaponsChargePercent>0&&(this.weaponsChargePercent-=e*we.starshipFireRate().val,this.weaponsChargePercent=Math.max(this.weaponsChargePercent,0))}if(this.remainingScanTime>0&&this.scanObjectNames.length>0&&(this.remainingScanTime=Math.max(0,this.remainingScanTime-e),this.remainingScanTime===0)){const t=v.findObjects(o=>this.scanObjectNames.includes(o.name)),n=t.length;t.forEach(o=>o.isRevealed=!0),this.scanObjectNames.splice(0),v.log({msg:`Scan complete. ${n} new object${n!==1?"s":""} identified`,type:"output",status:"info"}),H.broadcastEvent(new he({type:"scancomplete",data:void 0}))}}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=1-this.remainingScanTime/we.starshipScanTime().val;e.translate(t,n),e.rotate(this.rotation),e.scale(1.25,1.25),e.translate(-t,-n),e.beginPath(),e.moveTo(t,n-25),e.lineTo(t-5,n-25),e.lineTo(t-8,n-8),e.lineTo(t-8,n+8),e.lineTo(t-5,n+15),e.lineTo(t-3,n+15),e.lineTo(t-3,n+13),e.lineTo(t+3,n+13),e.lineTo(t+3,n+15),e.lineTo(t+5,n+15),e.lineTo(t+5,n+15),e.lineTo(t+8,n+8),e.lineTo(t+8,n-8),e.lineTo(t+5,n-25),e.lineTo(t,n-25),e.lineJoin="round",e.lineCap="round",e.lineWidth=1,e.shadowBlur=48,e.shadowColor=ne.COLOR,e.strokeStyle=ne.COLOR,e.stroke(),e.setLineDash([2,3]),e.strokeStyle=ne.DECAL_COLOR,e.beginPath(),e.moveTo(t-5,n+6),e.lineTo(t-5,n-6),e.stroke(),e.beginPath(),e.moveTo(t+5,n+6),e.lineTo(t+5,n-6),e.stroke(),e.beginPath(),e.moveTo(t-2,n-21),e.lineTo(t+2,n-21),e.moveTo(t-3.5,n-18),e.lineTo(t+3.5,n-18),e.moveTo(t-3,n-15),e.lineTo(t+3,n-15),e.lineWidth=.5,e.setLineDash([]),e.stroke(),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),e.translate(t,n),e.rotate(this.rotation+this.turretRotation),e.translate(-t,-n),e.beginPath(),e.fillStyle="cyan",e.roundRect(t-3,n-3,6,6,1),e.rect(t-2,n-6.5,1,4),e.rect(t+1,n-6.5,1,4),e.fill(),e.translate(t,n),e.rotate(-(this.rotation+this.turretRotation)),e.translate(-t,-n),e.beginPath(),e.fillStyle="white",e.font='normal 10px "Monospace"',e.textAlign="center",e.fillText(this.name,t,n-20),ze(e,{x:t-15,y:n+15,width:30,height:2,progress:this.health/ne.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/ne.HEALTH),trackColor:"#ff000044"}),this.remainingScanTime&&o>0&&ze(e,{x:t-10,y:n+20,width:20,height:2,progress:o,label:`${Math.trunc(o*100)}%`}),e.translate(-t,-n),e.scale(1,1),super.drawSelectedIndicator(e,{radius:35})}onDestroy(){super.onDestroy();for(const t of this.dockers)this.undock(t);const e=new Be(this.position,7);v.addObject(e)}onCommand(e){if(super.onCommand(e),bt.test(e))v.log({msg:["scan         - Scan to reveal hidden objects","list types   - List buildable unit types","build <type> - Build unit of <type>","","help         - Show this help message"].join(`
`),type:"output",status:"info"});else if(Xo.test(e))v.log({msg:["miner       -  150 credits","refinery    - 1000 credits","transporter -  350 credits","hauler      -  650 credits","","Build a unit using 'build <type>'","E.g: 'build miner'"].join(`
`),type:"output",status:"info"});else if(xn.test(e))switch(xn.process(e)){case"miner":{if(le.credits()>=J.COST){const n=new J(this.name);this.dock(n),v.addObject(n),le.consume({credits:J.COST})}else v.log({msg:"Not enough credits!",status:"error",type:"output"});break}case"refinery":if(le.credits()>=Z.COST)if(v.findObjects(o=>o instanceof Z).length<Z.MAX_COUNT){const o=new Z(this.name);this.dock(o),v.addObject(o),le.consume({credits:Z.COST})}else v.log({msg:"Refinery limit reached!",status:"error",type:"output"});else v.log({msg:"Not enough credits!",status:"error",type:"output"});break;case"transporter":{if(le.credits()>=Oe.COST){const n=new Oe(this.name);this.dock(n),v.addObject(n),le.consume({credits:Oe.COST})}else v.log({msg:"Not enough credits!",status:"error",type:"output"});break}case"hauler":{if(le.credits()>=ae.COST){const n=new ae(this.name);this.dock(n),v.addObject(n),le.consume({credits:ae.COST})}else v.log({msg:"Not enough credits!",status:"error",type:"output"});break}}else if(Vo.test(e))if(this.scanObjectNames.length===0){const t=v.findObjects(n=>n instanceof Ot&&!n.isRevealed);if(t.length>0){const n=t.map(o=>o.name);this.scanObjectNames.splice(0,this.scanObjectNames.length,...n),this.remainingScanTime=we.starshipScanTime().val,v.log({msg:`Deep space scan started. ETA: ${wi(this.remainingScanTime)}...`,type:"output",status:"info"})}else v.log({msg:"No new objects to scan",type:"output",status:"info"})}else v.log({msg:"Scan already in progress",type:"output",status:"error"});else{const t=`Unknown command "${e}"!`;v.log({msg:t,type:"output",status:"error"})}}canDock(){return!0}dock(e){this.canDock()&&Xt(this.name,this.dockers,e,this.position.add(ne.DOCKING_OFFSET))}undock(e){this.canDock()&&Vt(this.dockers,e,this.position.add(ne.DOCKING_OFFSET))}getBounds(){return new Me(this.position.x,this.position.y,20)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:20},e)}fireWeapon(e){const t=e.subtract(this.position).normalize(!0);for(let n=-1;n<=1;n++){const o=P.fromAngle(t.angle()+n*R(1)),l=new Ve(this.position,o);v.addObject(l)}}}const Si="/sol-testing/assets/bg3-27c79aac.png",ls=G("<div>"),xi=s=>{const[e,t]=_t(s,["onResized"]);let n;return at(()=>{const o=new ResizeObserver(l=>{const u=l[0]?.contentRect;if(u){const[f,c]=[u.width,u.height];e.onResized?.({width:f,height:c})}});n&&o.observe(n),it(()=>{n&&o.unobserve(n)})}),(()=>{const o=ls(),l=n;return typeof l=="function"?mt(l,o):n=o,ut(o,t,!1,!1),o})()};class En{object;point;data;constructor(e,t,n={}){this.object=e,this.point=t,this.data=n}}const us=G("<div><canvas>"),ds=1/50,In=75,cs={clearColor:"#0f0f16",drawStats:!0,drawViewRect:!1,drawStarField:!0,drawBackground:!0,starFieldProbability:.5,starFieldJitterRadius:36,starFieldMinBrightness:.15,starFieldMaxBrightness:1},Zt=s=>{const[e,t]=_t(We(cs,s),["clearColor","drawStats","drawViewRect","drawStarField","drawBackground","starFieldProbability","starFieldJitterRadius","starFieldMinBrightness","starFieldMaxBrightness","backgroundImagePath","initialOpacity"]);let n,o;e.backgroundImagePath&&(o=new Image,o.src=e.backgroundImagePath);const[l,u]=W(0),[f,c]=W(0),[g,y]=W(0),[i,r]=W([1,0,0,1,0,0]),[d,m]=W([]),[a,p]=W(e.initialOpacity||0),h=()=>{if(n){const T=n.getContext("2d"),[S,A,L,z,U,$]=i();if(T){if(T.setTransform(S,A,L,z,U,$),T.fillStyle=e.clearColor||"",T.fillRect(-.5*k.mapSize,-.5*k.mapSize,k.mapSize,k.mapSize),e.drawBackground&&o?.complete&&(T.save(),T.drawImage(o,-.5*k.mapSize,-.5*k.mapSize,k.mapSize,k.mapSize),T.restore()),e.drawStarField){T.save();for(const[x,F,N,O,B]of d())k.view().contains(x,F)&&(T.translate(x,F),T.rotate(N),T.translate(-x,-F),T.globalAlpha=O,T.fillStyle=B,T.fillRect(x,F,2,2),T.translate(x,F),T.rotate(-N),T.translate(-x,-F));T.restore()}for(const x of v.objects())(k.view().contains(x.position.x,x.position.y)||x.renderOutsideView())&&(T.save(),x.onDraw(T),T.restore());if(e.drawViewRect){const{x,y:F,w:N,h:O}=k.view();T.save(),T.beginPath(),T.lineWidth=3,T.strokeStyle="red",T.strokeRect(x,F,N,O),T.restore()}e.drawStats&&(T.save(),T.beginPath(),T.fillStyle="white",T.textBaseline="top",T.font='bold 12px "Ubuntu Mono"',T.fillText(`FPS: ${Math.trunc(1/g())}`,k.view().x+20,k.view().y+20),T.textBaseline="bottom",T.fillText("!!!Development Build!!!",k.view().x+20,k.view().y+k.view().h-20),T.restore()),T.save(),T.globalAlpha=1-a(),T.fillStyle="#000000",T.fillRect(k.view().x,k.view().y,k.view().w,k.view().h),T.restore()}}},_=T=>{if(ue.vPan()!==0||ue.hPan()!==0){const S=ue.multiplier(),{x:A,y:L}=tn(k.pan().x+ue.hPan()*H.inputScale()*ue.speed*S*T,k.pan().y+ue.vPan()*H.inputScale()*ue.speed*S*T,k.zoom(),k.screen().w,k.screen().h,k.mapSize,k.mapSize);k.setPan(new P(A,L))}if(ue.zoom()!==0){const S=$e(k.zoom()+ue.zoom()*H.inputScale()*T,k.minZoom,k.maxZoom),{x:A,y:L}=tn(k.pan().x,k.pan().y,S,k.screen().w,k.screen().h,k.mapSize,k.mapSize);k.setPan(new P(A,L)),k.setZoom(S)}},w=()=>{const T=[],S=A=>!T.includes(A);for(const A of v.objects()){const L=H.findCollisionObjects(A,S);if(L.length>0)for(const z of L){const U=A.getBounds().midpointTo(z.getBounds()),$=new En(A,U),x=new En(z,U);A.onCollision(x),z.onCollision($)}T.push(A)}},E=T=>{H.schedules().forEach(S=>S.update(T)),H.unschedule(H.schedules().filter(S=>S.isTimedOut))},D=T=>{const S=Math.min(.001*(T-f()),ds)*H.timeScale(),A=$e(k.opacity(),0,1);p(qe(a(),A,S)),_(S),v.objects().forEach(L=>L.onUpdate(S)),w(),E(S),h(),v.refreshObjects(),c(T),y(S),M()},M=()=>{u(window.requestAnimationFrame(D))},j=()=>{l()&&window.cancelAnimationFrame(l())};return at(()=>{const T=[],S=.5*k.mapSize,A=.5*k.mapSize,L=e.starFieldProbability||.5,z=e.starFieldJitterRadius||1,U=e.starFieldMinBrightness||0,$=e.starFieldMaxBrightness||1;for(let x=-S;x<=S;x+=In)for(let F=-A;F<=A;F+=In)if(Math.random()<L){const[N,O]=[V(-z,z),V(-z,z)],B=V(0,2*Math.PI),q=$e(Math.random(),U,$),ee=bi(q);T.push([x+N,F+O,B,q,ee])}m(T),window.addEventListener("beforeunload",function(){j(),v.objects().forEach(x=>{v.removeObject(x)})}),it(j),M()}),vt(()=>{const T=tn(k.pan().x,k.pan().y,k.zoom(),k.screen().w,k.screen().h,k.mapSize,k.mapSize);k.setView(new wt(T.x-.5*T.w,T.y-.5*T.h,T.w,T.h));const S=(.5*T.w-T.x)*k.zoom(),A=(.5*T.h-T.y)*k.zoom();r([k.zoom(),0,0,k.zoom(),S,A])}),(()=>{const T=us(),S=T.firstChild;ut(T,t,!1,!0),C(T,I(xi,{class:"absolute top-0 left-0 w-full h-full pointer-events-none opacity-0",onResized:({width:L,height:z})=>{k.setScreen({w:L,h:z,r:L/z})}}),S);const A=n;return typeof A=="function"?mt(A,S):n=S,Ce(L=>{const z=k.mapSize,U=k.mapSize;return z!==L._v$&&Ue(S,"width",L._v$=z),U!==L._v$2&&Ue(S,"height",L._v$2=U),L},{_v$:void 0,_v$2:void 0}),T})()},fs=G('<div class="relative w-52 h-52"><canvas class="absolute w-full h-full top-0 left-0 -z-10">'),Tt=s=>{const[e,t]=_t(s,["onPaintBg"]),n=Ft(()=>t.children),[o,l]=W({width:0,height:0});let u;const f=()=>{if(u){const c=u.getContext("2d"),g=o().width,y=o().height;c&&(c.resetTransform(),c.clearRect(0,0,g,y),e.onPaintBg(c,g,y))}};return vt(f),document.fonts.addEventListener("loadingdone",f),(()=>{const c=fs(),g=c.firstChild;ut(c,t,!1,!0),C(c,I(xi,{class:"absolute w-full h-full -z-10",onResized:l}),g);const y=u;return typeof y=="function"?mt(y,g):u=g,C(c,n,null),Ce(i=>{const r=o().width,d=o().height;return r!==i._v$&&Ue(g,"width",i._v$=r),d!==i._v$2&&Ue(g,"height",i._v$2=d),i},{_v$:void 0,_v$2:void 0}),c})()};var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ai={exports:{}};(function(s,e){(function(t,n){s.exports=n()})(ct,function(){var t=1e3,n=6e4,o=36e5,l="millisecond",u="second",f="minute",c="hour",g="day",y="week",i="month",r="quarter",d="year",m="date",a="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var $=["th","st","nd","rd"],x=U%100;return"["+U+($[(x-20)%10]||$[x]||$[0])+"]"}},w=function(U,$,x){var F=String(U);return!F||F.length>=$?U:""+Array($+1-F.length).join(x)+U},E={s:w,z:function(U){var $=-U.utcOffset(),x=Math.abs($),F=Math.floor(x/60),N=x%60;return($<=0?"+":"-")+w(F,2,"0")+":"+w(N,2,"0")},m:function U($,x){if($.date()<x.date())return-U(x,$);var F=12*(x.year()-$.year())+(x.month()-$.month()),N=$.clone().add(F,i),O=x-N<0,B=$.clone().add(F+(O?-1:1),i);return+(-(F+(x-N)/(O?N-B:B-N))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:i,y:d,w:y,d:g,D:m,h:c,m:f,s:u,ms:l,Q:r}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},D="en",M={};M[D]=_;var j=function(U){return U instanceof L},T=function U($,x,F){var N;if(!$)return D;if(typeof $=="string"){var O=$.toLowerCase();M[O]&&(N=O),x&&(M[O]=x,N=O);var B=$.split("-");if(!N&&B.length>1)return U(B[0])}else{var q=$.name;M[q]=$,N=q}return!F&&N&&(D=N),N||!F&&D},S=function(U,$){if(j(U))return U.clone();var x=typeof $=="object"?$:{};return x.date=U,x.args=arguments,new L(x)},A=E;A.l=T,A.i=j,A.w=function(U,$){return S(U,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var L=function(){function U(x){this.$L=T(x.locale,null,!0),this.parse(x)}var $=U.prototype;return $.parse=function(x){this.$d=function(F){var N=F.date,O=F.utc;if(N===null)return new Date(NaN);if(A.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var B=N.match(p);if(B){var q=B[2]-1||0,ee=(B[7]||"0").substring(0,3);return O?new Date(Date.UTC(B[1],q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,ee)):new Date(B[1],q,B[3]||1,B[4]||0,B[5]||0,B[6]||0,ee)}}return new Date(N)}(x),this.$x=x.x||{},this.init()},$.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},$.$utils=function(){return A},$.isValid=function(){return this.$d.toString()!==a},$.isSame=function(x,F){var N=S(x);return this.startOf(F)<=N&&N<=this.endOf(F)},$.isAfter=function(x,F){return S(x)<this.startOf(F)},$.isBefore=function(x,F){return this.endOf(F)<S(x)},$.$g=function(x,F,N){return A.u(x)?this[F]:this.set(N,x)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(x,F){var N=this,O=!!A.u(F)||F,B=A.p(x),q=function(Xe,Se){var Fe=A.w(N.$u?Date.UTC(N.$y,Se,Xe):new Date(N.$y,Se,Xe),N);return O?Fe:Fe.endOf(g)},ee=function(Xe,Se){return A.w(N.toDate()[Xe].apply(N.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(Se)),N)},te=this.$W,_e=this.$M,ce=this.$D,He="set"+(this.$u?"UTC":"");switch(B){case d:return O?q(1,0):q(31,11);case i:return O?q(1,_e):q(0,_e+1);case y:var Je=this.$locale().weekStart||0,Qe=(te<Je?te+7:te)-Je;return q(O?ce-Qe:ce+(6-Qe),_e);case g:case m:return ee(He+"Hours",0);case c:return ee(He+"Minutes",1);case f:return ee(He+"Seconds",2);case u:return ee(He+"Milliseconds",3);default:return this.clone()}},$.endOf=function(x){return this.startOf(x,!1)},$.$set=function(x,F){var N,O=A.p(x),B="set"+(this.$u?"UTC":""),q=(N={},N[g]=B+"Date",N[m]=B+"Date",N[i]=B+"Month",N[d]=B+"FullYear",N[c]=B+"Hours",N[f]=B+"Minutes",N[u]=B+"Seconds",N[l]=B+"Milliseconds",N)[O],ee=O===g?this.$D+(F-this.$W):F;if(O===i||O===d){var te=this.clone().set(m,1);te.$d[q](ee),te.init(),this.$d=te.set(m,Math.min(this.$D,te.daysInMonth())).$d}else q&&this.$d[q](ee);return this.init(),this},$.set=function(x,F){return this.clone().$set(x,F)},$.get=function(x){return this[A.p(x)]()},$.add=function(x,F){var N,O=this;x=Number(x);var B=A.p(F),q=function(_e){var ce=S(O);return A.w(ce.date(ce.date()+Math.round(_e*x)),O)};if(B===i)return this.set(i,this.$M+x);if(B===d)return this.set(d,this.$y+x);if(B===g)return q(1);if(B===y)return q(7);var ee=(N={},N[f]=n,N[c]=o,N[u]=t,N)[B]||1,te=this.$d.getTime()+x*ee;return A.w(te,this)},$.subtract=function(x,F){return this.add(-1*x,F)},$.format=function(x){var F=this,N=this.$locale();if(!this.isValid())return N.invalidDate||a;var O=x||"YYYY-MM-DDTHH:mm:ssZ",B=A.z(this),q=this.$H,ee=this.$m,te=this.$M,_e=N.weekdays,ce=N.months,He=function(Se,Fe,Kt,Et){return Se&&(Se[Fe]||Se(F,O))||Kt[Fe].slice(0,Et)},Je=function(Se){return A.s(q%12||12,Se,"0")},Qe=N.meridiem||function(Se,Fe,Kt){var Et=Se<12?"AM":"PM";return Kt?Et.toLowerCase():Et},Xe={YY:String(this.$y).slice(-2),YYYY:A.s(this.$y,4,"0"),M:te+1,MM:A.s(te+1,2,"0"),MMM:He(N.monthsShort,te,ce,3),MMMM:He(ce,te),D:this.$D,DD:A.s(this.$D,2,"0"),d:String(this.$W),dd:He(N.weekdaysMin,this.$W,_e,2),ddd:He(N.weekdaysShort,this.$W,_e,3),dddd:_e[this.$W],H:String(q),HH:A.s(q,2,"0"),h:Je(1),hh:Je(2),a:Qe(q,ee,!0),A:Qe(q,ee,!1),m:String(ee),mm:A.s(ee,2,"0"),s:String(this.$s),ss:A.s(this.$s,2,"0"),SSS:A.s(this.$ms,3,"0"),Z:B};return O.replace(h,function(Se,Fe){return Fe||Xe[Se]||B.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(x,F,N){var O,B=A.p(F),q=S(x),ee=(q.utcOffset()-this.utcOffset())*n,te=this-q,_e=A.m(this,q);return _e=(O={},O[d]=_e/12,O[i]=_e,O[r]=_e/3,O[y]=(te-ee)/6048e5,O[g]=(te-ee)/864e5,O[c]=te/o,O[f]=te/n,O[u]=te/t,O)[B]||te,N?_e:A.a(_e)},$.daysInMonth=function(){return this.endOf(i).$D},$.$locale=function(){return M[this.$L]},$.locale=function(x,F){if(!x)return this.$L;var N=this.clone(),O=T(x,F,!0);return O&&(N.$L=O),N},$.clone=function(){return A.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},U}(),z=L.prototype;return S.prototype=z,[["$ms",l],["$s",u],["$m",f],["$H",c],["$W",g],["$M",i],["$y",d],["$D",m]].forEach(function(U){z[U[1]]=function($){return this.$g($,U[0],U[1])}}),S.extend=function(U,$){return U.$i||(U($,L,S),U.$i=!0),S},S.locale=T,S.isDayjs=j,S.unix=function(U){return S(1e3*U)},S.en=M[D],S.Ls=M,S.p={},S})})(Ai);var ps=Ai.exports;const ms=hs(ps),gs=G('<div class="flex-1 flex flex-col-reverse max-h-[220px] overflow-auto terminal-scrollbar"><div class="flex flex-col gap-4">'),ys=G('<p class="text-green-300 font-bold">:#'),vs=G('<div class="flex flex-col h-full gap-0"><div class="flex items-center"><input class="flex-1 bg-transparent p-4 focus:outline-none text-green-600 placeholder-green-300 placeholder-opacity-75 disabled:opacity-25" placeholder="Enter command here or &quot;help&quot; for more info" autocomplete="off">'),_s=G('<p class="px-2 text-green-300 font-bold">#'),bs=G('<div class="flex justify-items-start gap-3 items-start"><p class="text-xs text-white pt-1"></p><textarea class="flex-1 bg-transparent resize-none focus:outline-none overflow-hidden" rows="1" tabindex="-1" readonly>'),ws=()=>{let s;const[e,t]=W(""),[n,o]=W(-1),[l,u]=W(""),f=()=>v.logs().filter(m=>m.type==="input");let c;const g=()=>{v.activeHud()===Y.CONSOLE&&s?.focus()},y=m=>{m.stopPropagation(),m.stopImmediatePropagation(),m.key==="ArrowUp"?d(1):m.key==="ArrowDown"&&d(-1)},i=m=>{if(m.key==="Enter"){const a=e().trim();a&&(v.processCommand(a),u(""),o(-1),t(""))}},r=m=>{const a=m.target.value;u(a),o(-1),t(a)},d=m=>{const p=n()+m,h=Math.max(-1,f().length-1);o(Math.max(-1,Math.min(p,h)))};return vt(()=>{if(n()>-1){const m=f()[f().length-n()-1];t(m?.msg||"")}else t(l())}),at(()=>{s?.focus()}),(()=>{const m=vs(),a=m.firstChild,p=a.firstChild;C(m,I(ie,{get when(){return v.logs().length>0},get children(){const _=gs(),w=_.firstChild,E=c;return typeof E=="function"?mt(E,_):c=_,C(w,I(Ui,{get each(){return v.logs()},children:D=>I(Ts,{log:D})})),_}}),a),C(a,I(ie,{get when(){return!!v.selected()},get fallback(){return _s()},get children(){const _=ys(),w=_.firstChild;return C(_,()=>v.selected()?.name,w),_}}),p),p.addEventListener("blur",g),p.$$keyup=i,p.addEventListener("change",r),p.$$keydown=y;const h=s;return typeof h=="function"?mt(h,p):s=p,Ce(()=>p.disabled=H.isPaused()),Ce(()=>p.value=e()),m})()},Ts=s=>{let e;return at(()=>{e&&(e.style.height=`${e.scrollHeight}px`)}),(()=>{const t=bs(),n=t.firstChild,o=n.nextSibling;C(n,()=>ms(s.log.at).format("HH:mm"));const l=e;return typeof l=="function"?mt(l,o):e=o,C(o,()=>s.log.msg),Ce(u=>{const f=s.log.status==="success",c=s.log.status==="error",g=s.log.status==="info";return f!==u._v$&&o.classList.toggle("text-[#4AF626]",u._v$=f),c!==u._v$2&&o.classList.toggle("text-[#FF0004]",u._v$2=c),g!==u._v$3&&o.classList.toggle("text-[#00BEEF]",u._v$3=g),u},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()};ot(["keydown","keyup"]);const Ss=G('<svg stroke-width="0"></svg>',2),xs=G("<title></title>",2);function je(s,e){const t=We(s.a,e),[n,o]=_t(t,["src"]);return(()=>{const l=Ss.cloneNode(!0);return ut(l,We({get stroke(){return s.a.stroke},get color(){return e.color||"currentColor"},get style(){return{...e.style,overflow:"visible"}}},o,{get height(){return e.size||"1em"},get width(){return e.size||"1em"},get innerHTML(){return s.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),C(l,()=>oi,null),C(l,(()=>{const u=be(()=>!!e.title);return()=>u()&&(()=>{const f=xs.cloneNode(!0);return C(f,()=>e.title),f})()})(),null),l})()}function As(s){return je({a:{viewBox:"0 0 16 16"},c:'<path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/>'},s)}const Cs=G('<div><div class="inspector-entry"><span>Type: </span><span>Starship</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Status: </span><span>'),Os=G('<div><div class="inspector-entry"><span>Type: </span><span>Miner</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Status: </span><span></span></div><div class="inspector-entry"><span>Resources: </span><span>/'),Es=G('<div><div class="inspector-entry"><span>Type: </span><span>Crystal</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Resources: </span><span>/'),Is=G('<div><div class="inspector-entry"><span>Type: </span><span>Planet</span></div><div class="inspector-entry"><span>Name: </span><span>'),ks=G('<p class="text-purple-500 text-sm">! Requesting <strong class="text-purple-400"> units</strong> of <strong class="text-purple-400">Anythium</strong> !'),$s=G('<p class="text-yellow-300 text-sm">! Requesting <strong class="text-yellow-200"> units</strong> of <strong class="text-yellow-200">Divinium</strong> !'),Ns=G('<p class="text-cyan-300 text-sm">! Requesting <strong class="text-cyan-200"> units</strong> of <strong class="text-cyan-200">Materium</strong> !'),Rs=G('<div><div class="inspector-entry"><span>Type: </span><span>Refinery</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Status: </span><span>'),Ps=G('<div><div class="inspector-entry"><span>Type: </span><span>Transporter</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Status: </span><span></span></div><br><div class="inspector-entry"><span>Cargo: </span><span><span>Anythium&nbsp;</span><span>(<!>)</span><span class="mx-1"></span><span>Divinium&nbsp;</span><span>(<!>)</span><span class="mx-1"></span><span>Materium&nbsp;</span><span>(<!>)</span></span></div><br><div class="inspector-entry"><span>Cargo Capacity: </span><span>/'),Ds=G('<div><div class="inspector-entry"><span>Type: </span><span>Hauler</span></div><div class="inspector-entry"><span>Name: </span><span></span></div><div class="inspector-entry"><span>Status: </span><span></span></div><div class="inspector-entry"><span>Loaded: </span><span>'),Ms=G('<p class="text-center text-orange-300"> Select an object to inspect'),Ls=G("<div>"),js=s=>{const e=c=>{let g="Idle";if(c.remainingScanTime>0){const y=Math.trunc(c.remainingScanTime);g=`Scanning. ${wi(y)} remaining`}return(()=>{const y=Cs(),i=y.firstChild,r=i.nextSibling,d=r.firstChild,m=d.nextSibling,a=r.nextSibling,p=a.firstChild,h=p.nextSibling;return C(m,()=>c.name),C(h,g),y})()},t=c=>(()=>{const g=Os(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling,h=m.nextSibling,_=h.firstChild,w=_.nextSibling,E=w.firstChild;return C(d,()=>c.name),C(p,()=>c.status),C(w,()=>Math.round(c.resources),E),C(w,()=>c.capacity,null),g})(),n=c=>(()=>{const g=Es(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling,h=p.firstChild;return C(d,()=>c.name),C(p,()=>Math.round(c.credits),h),C(p,()=>c.totalCredits,null),g})(),o=c=>(()=>{const g=Is(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling;return C(d,()=>c.name),g})(),l=c=>(()=>{const g=Rs(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling;return C(d,()=>c.name),C(p,()=>c.status),C(g,I(ie,{get when(){return!!c.requisition&&c.requisition.anythium>0},get children(){const h=ks(),_=h.firstChild,w=_.nextSibling,E=w.firstChild;return C(w,()=>c.requisition?.anythium,E),h}}),null),C(g,I(ie,{get when(){return!!c.requisition&&c.requisition.divinium>0},get children(){const h=$s(),_=h.firstChild,w=_.nextSibling,E=w.firstChild;return C(w,()=>c.requisition?.divinium,E),h}}),null),C(g,I(ie,{get when(){return!!c.requisition&&c.requisition.materium>0},get children(){const h=Ns(),_=h.firstChild,w=_.nextSibling,E=w.firstChild;return C(w,()=>c.requisition?.materium,E),h}}),null),g})(),u=c=>(()=>{const g=Ps(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling,h=m.nextSibling,_=h.nextSibling,w=_.firstChild,E=w.nextSibling,D=E.firstChild,M=D.nextSibling,j=M.firstChild,T=j.nextSibling;T.nextSibling;const S=M.nextSibling,A=S.nextSibling,L=A.nextSibling,z=L.firstChild,U=z.nextSibling;U.nextSibling;const $=L.nextSibling,x=$.nextSibling,F=x.nextSibling,N=F.firstChild,O=N.nextSibling;O.nextSibling;const B=_.nextSibling,q=B.nextSibling,ee=q.firstChild,te=ee.nextSibling,_e=te.firstChild;return C(d,()=>c.name),C(p,()=>c.status),C(M,()=>c.cargo.anythium,T),C(L,()=>c.cargo.divinium,U),C(F,()=>c.cargo.materium,O),C(te,()=>c.cargoAmount(),_e),C(te,()=>we.transporterCapacity().val,null),Ce(ce=>{const He=`${de.anythium.classname} text-sm`,Je=de.anythium.classname,Qe=`${de.divinium.classname} text-sm`,Xe=de.divinium.classname,Se=`${de.materium.classname} text-sm`,Fe=de.materium.classname;return He!==ce._v$&&Re(D,ce._v$=He),Je!==ce._v$2&&Re(M,ce._v$2=Je),Qe!==ce._v$3&&Re(A,ce._v$3=Qe),Xe!==ce._v$4&&Re(L,ce._v$4=Xe),Se!==ce._v$5&&Re(x,ce._v$5=Se),Fe!==ce._v$6&&Re(F,ce._v$6=Fe),ce},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),g})(),f=c=>(()=>{const g=Ds(),y=g.firstChild,i=y.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling,h=m.nextSibling,_=h.firstChild,w=_.nextSibling;return C(d,()=>c.name),C(p,()=>c.status),C(w,()=>c.isLoaded?"Yes":"No"),g})();return(()=>{const c=Ls();return ut(c,s,!1,!0),C(c,I(ie,{get when(){return!v.selected()},get children(){const g=Ms(),y=g.firstChild;return C(g,I(As,{class:"inline"}),y),g}}),null),C(c,I(ie,{get when(){return v.selected()instanceof ne},get children(){return e(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof J},get children(){return t(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof K},get children(){return n(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof Ae},get children(){return o(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof Z},get children(){return l(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof Oe},get children(){return u(v.selected())}}),null),C(c,I(ie,{get when(){return v.selected()instanceof ae},get children(){return f(v.selected())}}),null),c})()};function Hs(s){return je({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M19.875 6.27A2.225 2.225 0 0 1 21 8.218v7.284c0 .809-.443 1.555-1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1-2.184 0l-6.75-4.27A2.225 2.225 0 0 1 3 15.502V8.217c0-.809.443-1.554 1.158-1.947l6.75-3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z"/>'},s)}function Bs(s){return je({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M10.232 10.707 8.5 12.44V9h-1v3.44l-1.732-1.733-.707.707L7.646 14h.708l2.585-2.586-.707-.707zM5.061 3.586l.707.707L7.5 2.56V6h1V2.56l1.732 1.733.707-.707L8.354 1h-.708L5.061 3.586zm-.268 1.682L3.06 7H6.5v1H3.06l1.733 1.732-.707.707L1.5 7.854v-.708l2.586-2.585.707.707zM9.5 7h3.44l-1.733-1.732.707-.707L14.5 7.146v.708l-2.586 2.585-.707-.707L12.94 8H9.5V7z" clip-rule="evenodd"/>'},s)}function Us(s){return je({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/><path d="M12 8a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-4 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/><path d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-7 6A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z"/>'},s)}const Fs=G('<p class="text-white text-[0.825rem]">Hint: '),Ws=G('<div class="flex items-center gap-3"><div><p class="tracking-wider text-orange-400 font-bold uppercase">'),zs=G('<div class="flex flex-col pt-3 px-6 pb-[1.5em] gap-4"><h3 class="text-xl text-green-500"><strong class="font-bold">Sol Explorer</strong> Console</h3><div class="grid grid-cols-4 gap-x-2 gap-y-1"><div><span class="font-light text-sm">Credits:&nbsp;</span><strong></strong></div><div><span class="font-light text-sm">Anythium:&nbsp;</span><strong></strong></div><div><span class="font-light text-sm">Divinium:&nbsp;</span><strong></strong></div><div><span class="font-light">Materium:&nbsp;</span><strong></strong></div><div class="col-span-4 flex items-center gap-2"><span class="font-light text-white">Hyper Drive (<strong class="font-bold text-green-400">/</strong>)</span><div class="flex-1 h-2 relative rounded-xl overflow-hidden"><div class="absolute h-full w-full bg-gray-300 opacity-25"></div><div class="absolute h-full bg-green-400">'),Gs=G('<p class="text-center text-orange-300"> No objectives at this time'),qs=G('<div><span class="text-sm text-bold text-green-300 font-bold tracking-widest"></span> <hr class="flex-1 border-green-300">'),Xs=s=>{const e=(t,n,o)=>{const f="#00C34B",g=f,y=24,i="#00307B2C";t.scale((n-4)/n,(o-4)/o),t.translate(2,2),t.clearRect(0,0,n,o),t.beginPath(),t.moveTo(0,20),t.lineTo(20,0),t.lineTo(n/2,0),t.lineTo(n/2+20,20),t.lineTo(n-20,20),t.lineTo(n,40),t.lineTo(n,o-20),t.lineTo(n-20,o),t.lineTo(20,o),t.lineTo(0,o-20),t.lineTo(0,20),t.lineJoin="round",t.lineCap="round",t.lineWidth=4,t.shadowBlur=y,t.strokeStyle=f,t.shadowColor=g,t.stroke(),t.fillStyle=i,t.shadowBlur=0,t.fill(),t.beginPath(),t.moveTo(10,o-20),t.lineTo(20,o-20),t.lineTo(35,o-5),t.lineTo(25,o-5),t.fillStyle="#E6FF75",t.shadowColor="#E6FF75",t.shadowBlur=48,t.fill(),t.beginPath(),t.moveTo(30,o-15),t.lineTo(40,o-15),t.lineTo(50,o-5),t.lineTo(40,o-5),t.fillStyle="#E6FF756e",t.fill(),t.beginPath(),t.moveTo(n-10,o-20),t.lineTo(n-20,o-20),t.lineTo(n-35,o-5),t.lineTo(n-25,o-5),t.fillStyle="#E6FF75",t.shadowColor="#E6FF75",t.shadowBlur=48,t.fill(),t.beginPath(),t.moveTo(n-30,o-15),t.lineTo(n-40,o-15),t.lineTo(n-50,o-5),t.lineTo(n-40,o-5),t.fillStyle="#E6FF756e",t.fill()};return I(ie,{get when(){return v.activeHud()===Y.CONSOLE},get children(){return I(Tt,We(s,{class:"fixed w-[480px] bottom-3 right-3",onPaintBg:e,get children(){const t=zs(),n=t.firstChild,o=n.nextSibling,l=o.firstChild,u=l.firstChild,f=u.nextSibling,c=l.nextSibling,g=c.firstChild,y=g.nextSibling,i=c.nextSibling,r=i.firstChild,d=r.nextSibling,m=i.nextSibling,a=m.firstChild,p=a.nextSibling,h=m.nextSibling,_=h.firstChild,w=_.firstChild,E=w.nextSibling,D=E.firstChild,M=_.nextSibling,j=M.firstChild,T=j.nextSibling;return C(t,I(Nt,{label:"CURRENT OBJECTIVE",class:"mt-4"}),o),C(t,I(ie,{get when(){return!!v.currentObjective()},get fallback(){return(()=>{const S=Gs(),A=S.firstChild;return C(S,I(Hs,{class:"inline"}),A),S})()},get children(){const S=Ws(),A=S.firstChild,L=A.firstChild;return C(S,I(Us,{fill:"orange",size:24}),A),C(L,()=>v.currentObjective()?.title),C(A,I(ie,{get when(){return!!v.currentObjective()?.hint},get children(){const z=Fs();return z.firstChild,C(z,()=>v.currentObjective()?.hint,null),z}}),null),S}}),o),C(t,I(Nt,{label:"RESOURCES",class:"mt-4"}),o),C(f,()=>le.credits()),C(y,()=>le.anythium()),C(d,()=>le.divinium()),C(p,()=>le.materium()),C(E,()=>le.hyperDriveParts(),D),C(E,()=>Z.MAX_COUNT,null),T.style.setProperty("transition","width 0.5s"),C(t,I(Nt,{label:"INSPECTOR",class:"mt-4"}),null),C(t,I(js,{}),null),C(t,I(Nt,{label:"TERMINAL",class:"mt-4"}),null),C(t,I(ws,{}),null),Ce(S=>{const A=`flex items-center ${de.credits.classname}`,L=`flex items-center ${de.anythium.classname}`,z=`flex items-center ${de.divinium.classname}`,U=`flex items-center ${de.materium.classname}`,$=`${100*le.hyperDriveParts()/Z.MAX_COUNT}%`;return A!==S._v$&&Re(l,S._v$=A),L!==S._v$2&&Re(c,S._v$2=L),z!==S._v$3&&Re(i,S._v$3=z),U!==S._v$4&&Re(m,S._v$4=U),$!==S._v$5&&((S._v$5=$)!=null?T.style.setProperty("width",$):T.style.removeProperty("width")),S},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),t}}))}})},Nt=s=>{const[e,t]=_t(s,["label","class"]);return(()=>{const n=qs(),o=n.firstChild;return ut(n,We({get class(){return`flex items-center gap-4 ${e.class||""}`}},t),!1,!0),C(o,()=>e.label),n})()},Vs=s=>{let e;const[t,n]=W(0),o="#f2835c",l="#E6FF75",u=(a,p,h)=>{a.beginPath(),a.moveTo(p,h-10),a.lineTo(p,h+10),a.lineWidth=2,a.strokeStyle=o,a.stroke(),a.beginPath(),a.moveTo(p-10,h),a.lineTo(p+10,h),a.strokeStyle=o,a.stroke()},f=(a,p,h)=>{for(let M=-.5*16;M<=.5*16;M++){const j=M%2===0?.5:1;a.beginPath(),a.moveTo(p+M*10,h-70),a.lineTo(p+M*10,h-70-10*j),a.strokeStyle=o,a.globalAlpha=j,a.lineWidth=2*j,a.stroke()}for(let M=-.5*16;M<=.5*16;M++){const j=M%2===0?.5:1;a.beginPath(),a.moveTo(p+M*10,h+70),a.lineTo(p+M*10,h+70+10*j),a.strokeStyle=o,a.globalAlpha=j,a.lineWidth=2*j,a.stroke()}a.globalAlpha=1},c=(a,p,h)=>{a.beginPath(),a.moveTo(p-75,h-120),a.lineTo(p-75,h-100),a.lineTo(p-100,h-75),a.lineTo(p-130,h-75),a.arcTo(p-170,h,p-130,h+75,150),a.lineTo(p-130,h+75),a.lineTo(p-100,h+75),a.lineTo(p-75,h+100),a.lineTo(p-75,h+120),a.lineTo(p+75,h+120),a.lineTo(p+75,h+100),a.lineTo(p+100,h+75),a.lineTo(p+130,h+75),a.arcTo(p+170,h,p+130,h-75,150),a.lineTo(p+130,h-75),a.lineTo(p+100,h-75),a.lineTo(p+75,h-100),a.lineTo(p+75,h-120),a.closePath();const _=a.createLinearGradient(p-170,h,p+170,h);_.addColorStop(0,o),_.addColorStop(.35,"transparent"),_.addColorStop(.65,"transparent"),_.addColorStop(1,o),a.fillStyle=_,a.globalAlpha=.5,a.lineWidth=1,a.fill()},g=(a,p,h,_,w)=>{a.translate(p,h),a.scale((_+100)/_,(w+100)/w),a.translate(-p,-h),a.beginPath(),a.moveTo(p-75,h-120),a.lineTo(p-75,h-100),a.lineTo(p-100,h-75),a.lineTo(p-130,h-75),a.arcTo(p-170,h,p-130,h+75,150),a.lineTo(p-130,h+75),a.lineTo(p-100,h+75),a.lineTo(p-75,h+100),a.lineTo(p-75,h+120),a.globalAlpha=.5,a.lineWidth=1,a.stroke(),a.beginPath(),a.moveTo(p+75,h-120),a.lineTo(p+75,h-100),a.lineTo(p+100,h-75),a.lineTo(p+130,h-75),a.arcTo(p+170,h,p+130,h+75,150),a.lineTo(p+130,h+75),a.lineTo(p+100,h+75),a.lineTo(p+75,h+100),a.lineTo(p+75,h+120),a.globalAlpha=.5,a.lineWidth=1,a.stroke(),a.globalAlpha=1},y=(a,p,h)=>{const j="white";for(let T=-130;T<=-50;T+=2){const S=R(T),A=T%5===0?1:.5;a.beginPath(),a.translate(p,h),a.rotate(S),a.translate(-p,-h),a.moveTo(p,h+180),a.lineTo(p,h+180+A*10),a.strokeStyle=j,a.lineWidth=1,a.stroke(),a.translate(p,h),a.rotate(-S),a.translate(-p,-h)}for(let T=-130;T<=-50;T+=2){const S=R(T),A=T%5===0?1:.5;a.beginPath(),a.translate(p,h),a.rotate(S),a.translate(-p,-h),a.moveTo(p,h-180),a.lineTo(p,h-180-A*10),a.strokeStyle=j,a.lineWidth=1,a.stroke(),a.translate(p,h),a.rotate(-S),a.translate(-p,-h)}},i=(a,p,h)=>{for(let j=-45;j<=225;j+=90){const T=R(j);a.translate(p,h),a.rotate(T),a.translate(-p,-h),a.beginPath(),a.moveTo(p,h+124),a.lineTo(p,h+124+350),a.strokeStyle=o,a.lineWidth=1,a.stroke(),a.beginPath(),a.moveTo(p,h+124+.5*350),a.lineTo(p,h+124+.6*350),a.strokeStyle=o,a.lineWidth=3,a.stroke(),a.beginPath(),a.moveTo(p,h+124+.9*350),a.lineTo(p,h+124+.925*350),a.strokeStyle=o,a.lineWidth=3,a.stroke(),a.beginPath(),a.moveTo(p+15,h+1.45*124),a.lineTo(p+15,h+1.45*124+.7*350),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.beginPath(),a.moveTo(p-15,h+1.45*124),a.lineTo(p-15,h+1.45*124+.4*350),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.translate(p,h),a.rotate(-T),a.translate(-p,-h)}},r=(a,p,h)=>{for(let M=0;M<=360;M+=45){const j=R(M);a.translate(p,h),a.rotate(j),a.translate(-p,-h),a.beginPath(),a.arc(p,h,200,j-R(30),j+R(30)),a.strokeStyle=o,a.lineWidth=.5,a.stroke(),a.beginPath(),a.arc(p,h,200,j-R(10),j+R(10)),a.strokeStyle=o,a.lineWidth=2,a.stroke(),a.translate(p,h),a.rotate(-j),a.translate(-p,-h)}a.beginPath(),a.arc(p,h,200,R(-93),R(-87)),a.lineTo(p,h-200-15),a.closePath(),a.fillStyle=o,a.fill()},d=(a,p,h)=>{const{x:_,y:w,w:E,h:D}=k.view(),M=Math.trunc(_+.5*E),j=-Math.trunc(w+.5*D);a.beginPath(),a.arc(p,h,220,R(-30),R(-10)),a.lineTo(p+340,h-220*Math.sin(R(10))),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.beginPath(),a.arc(p,h,220,R(30),R(10),!0),a.lineTo(p+340,h+220*Math.sin(R(10))),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.beginPath(),a.arc(p,h,220,R(-150),R(-170),!0),a.lineTo(p-340,h-220*Math.sin(R(10))),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.beginPath(),a.arc(p,h,220,R(150),R(170)),a.lineTo(p-340,h+220*Math.sin(R(10))),a.strokeStyle="gray",a.lineWidth=1,a.stroke(),a.beginPath(),a.fillStyle=l,a.font="bold 24px Calculator",a.textBaseline="middle",a.textAlign="left",a.fillText(`[ ${M}au, ${j}au ]`,p+220,h);const T=v.findObject("ship");T&&ze(a,{x:p+220,y:h+20,width:100,height:4,progress:T.weaponsChargePercent,label:T.weaponsChargePercent>0?"Charging":"Ready",trackColor:o+"3f",fillColor:l,shadowColor:o}),a.beginPath(),a.fillStyle=l,a.font="bold 24px Calculator",a.textBaseline="alphabetic",a.textAlign="center",a.font="bold 24px Calculator",a.fillText("O . S . D . A",p,h-245),a.font="normal 18px Calculator",a.fillText("Avenger",p,h-220),a.beginPath(),a.font="normal 16px Ubuntu Mono",a.textBaseline="middle",a.textAlign="right",a.fillStyle=o,a.fillText(",,, to move (Ctrl for precision)",p-220,h-25),a.fillText("PageUp, PageDown to zoom",p-220,h),a.fillText("Hold Space to fire",p-220,h+25),a.beginPath(),a.font="normal 16px Ubuntu Mono",a.textBaseline="top",a.textAlign="center",a.fillStyle=o,a.fillText("Left Shift to disarm",p,h+220)},m=(a,p,h)=>{const[_,w]=[.5*p,.5*h];a.shadowColor=o;const{x:E,y:D,w:M,h:j}=k.view(),T=new P(E+.5*M,D+.5*j).angle();t()>1&&u(a,_,w),t()>2&&f(a,_,w),t()>3&&c(a,_,w),t()>4&&g(a,_,w,p,h),a.translate(_,w),a.rotate(T),a.translate(-_,-w),t()>5&&y(a,_,w),t()>6&&r(a,_,w),a.translate(_,w),a.rotate(-T),a.translate(-_,-w),t()>7&&i(a,_,w),t()>8&&d(a,_,w)};return vt(()=>{v.activeHud()===Y.WEAPONS?(clearInterval(e),e=setInterval(()=>{t()<10?n(t()+1):clearInterval(e)},1250/10)):(clearInterval(e),n(0))}),I(ie,{get when(){return v.activeHud()===Y.WEAPONS},get children(){return I(Tt,We(s,{class:"fixed top-0 left-0 w-full h-full pointer-events-none",onPaintBg:m}))}})};var rt={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(s){(function(){var e=function(){this.init()};e.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var r=this||t;if(i=parseFloat(i),r.ctx||y(),typeof i<"u"&&i>=0&&i<=1){if(r._volume=i,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var d=0;d<r._howls.length;d++)if(!r._howls[d]._webAudio)for(var m=r._howls[d]._getSoundIds(),a=0;a<m.length;a++){var p=r._howls[d]._soundById(m[a]);p&&p._node&&(p._node.volume=p._volume*i)}return r}return r._volume},mute:function(i){var r=this||t;r.ctx||y(),r._muted=i,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(i?0:r._volume,t.ctx.currentTime);for(var d=0;d<r._howls.length;d++)if(!r._howls[d]._webAudio)for(var m=r._howls[d]._getSoundIds(),a=0;a<m.length;a++){var p=r._howls[d]._soundById(m[a]);p&&p._node&&(p._node.muted=i?!0:p._muted)}return r},stop:function(){for(var i=this||t,r=0;r<i._howls.length;r++)i._howls[r].stop();return i},unload:function(){for(var i=this||t,r=i._howls.length-1;r>=0;r--)i._howls[r].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,y()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var r=new Audio;typeof r.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var r=new Audio;r.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,r=null;try{r=typeof Audio<"u"?new Audio:null}catch{return i}if(!r||typeof r.canPlayType!="function")return i;var d=r.canPlayType("audio/mpeg;").replace(/^no$/,""),m=i._navigator?i._navigator.userAgent:"",a=m.match(/OPR\/([0-6].)/g),p=a&&parseInt(a[0].split("/")[1],10)<33,h=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,_=m.match(/Version\/(.*?) /),w=h&&_&&parseInt(_[1],10)<15;return i._codecs={mp3:!!(!p&&(d||r.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var r=function(d){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,i._releaseHtml5Audio(m)}catch{i.noAudio=!0;break}for(var a=0;a<i._howls.length;a++)if(!i._howls[a]._webAudio)for(var p=i._howls[a]._getSoundIds(),h=0;h<p.length;h++){var _=i._howls[a]._soundById(p[h]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}i._autoResume();var w=i.ctx.createBufferSource();w.buffer=i._scratchBuffer,w.connect(i.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),w.onended=function(){w.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var E=0;E<i._howls.length;E++)i._howls[E]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var r=new Audio().play();return r&&typeof Promise<"u"&&(r instanceof Promise||typeof r.then=="function")&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var r=this||t;return i._unlocked&&r._html5AudioPool.push(i),r},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var r=0;r<i._howls.length;r++)if(i._howls[r]._webAudio){for(var d=0;d<i._howls[r]._sounds.length;d++)if(!i._howls[r]._sounds[d]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(i.autoSuspend){i._suspendTimer=null,i.state="suspending";var m=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(m,m)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var r=0;r<i._howls.length;r++)i._howls[r]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new e,n=function(i){var r=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}r.init(i)};n.prototype={init:function(i){var r=this;return t.ctx||y(),r._autoplay=i.autoplay||!1,r._format=typeof i.format!="string"?i.format:[i.format],r._html5=i.html5||!1,r._muted=i.mute||!1,r._loop=i.loop||!1,r._pool=i.pool||5,r._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,r._rate=i.rate||1,r._sprite=i.sprite||{},r._src=typeof i.src!="string"?i.src:[i.src],r._volume=i.volume!==void 0?i.volume:1,r._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=i.onend?[{fn:i.onend}]:[],r._onfade=i.onfade?[{fn:i.onfade}]:[],r._onload=i.onload?[{fn:i.onload}]:[],r._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],r._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],r._onpause=i.onpause?[{fn:i.onpause}]:[],r._onplay=i.onplay?[{fn:i.onplay}]:[],r._onstop=i.onstop?[{fn:i.onstop}]:[],r._onmute=i.onmute?[{fn:i.onmute}]:[],r._onvolume=i.onvolume?[{fn:i.onvolume}]:[],r._onrate=i.onrate?[{fn:i.onrate}]:[],r._onseek=i.onseek?[{fn:i.onseek}]:[],r._onunlock=i.onunlock?[{fn:i.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&r._preload!=="none"&&r.load(),r},load:function(){var i=this,r=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var d=0;d<i._src.length;d++){var m,a;if(i._format&&i._format[d])m=i._format[d];else{if(a=i._src[d],typeof a!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(a),m||(m=/\.([^.]+)$/.exec(a.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&t.codecs(m)){r=i._src[d];break}}if(!r){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=r,i._state="loading",window.location.protocol==="https:"&&r.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new o(i),i._webAudio&&u(i),i},play:function(i,r){var d=this,m=null;if(typeof i=="number")m=i,i=null;else{if(typeof i=="string"&&d._state==="loaded"&&!d._sprite[i])return null;if(typeof i>"u"&&(i="__default",!d._playLock)){for(var a=0,p=0;p<d._sounds.length;p++)d._sounds[p]._paused&&!d._sounds[p]._ended&&(a++,m=d._sounds[p]._id);a===1?i=null:m=null}}var h=m?d._soundById(m):d._inactiveSound();if(!h)return null;if(m&&!i&&(i=h._sprite||"__default"),d._state!=="loaded"){h._sprite=i,h._ended=!1;var _=h._id;return d._queue.push({event:"play",action:function(){d.play(_)}}),_}if(m&&!h._paused)return r||d._loadQueue("play"),h._id;d._webAudio&&t._autoResume();var w=Math.max(0,h._seek>0?h._seek:d._sprite[i][0]/1e3),E=Math.max(0,(d._sprite[i][0]+d._sprite[i][1])/1e3-w),D=E*1e3/Math.abs(h._rate),M=d._sprite[i][0]/1e3,j=(d._sprite[i][0]+d._sprite[i][1])/1e3;h._sprite=i,h._ended=!1;var T=function(){h._paused=!1,h._seek=w,h._start=M,h._stop=j,h._loop=!!(h._loop||d._sprite[i][2])};if(w>=j){d._ended(h);return}var S=h._node;if(d._webAudio){var A=function(){d._playLock=!1,T(),d._refreshBuffer(h);var $=h._muted||d._muted?0:h._volume;S.gain.setValueAtTime($,t.ctx.currentTime),h._playStart=t.ctx.currentTime,typeof S.bufferSource.start>"u"?h._loop?S.bufferSource.noteGrainOn(0,w,86400):S.bufferSource.noteGrainOn(0,w,E):h._loop?S.bufferSource.start(0,w,86400):S.bufferSource.start(0,w,E),D!==1/0&&(d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),D)),r||setTimeout(function(){d._emit("play",h._id),d._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?A():(d._playLock=!0,d.once("resume",A),d._clearTimer(h._id))}else{var L=function(){S.currentTime=w,S.muted=h._muted||d._muted||t._muted||S.muted,S.volume=h._volume*t.volume(),S.playbackRate=h._rate;try{var $=S.play();if($&&typeof Promise<"u"&&($ instanceof Promise||typeof $.then=="function")?(d._playLock=!0,T(),$.then(function(){d._playLock=!1,S._unlocked=!0,r?d._loadQueue():d._emit("play",h._id)}).catch(function(){d._playLock=!1,d._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),h._ended=!0,h._paused=!0})):r||(d._playLock=!1,T(),d._emit("play",h._id)),S.playbackRate=h._rate,S.paused){d._emit("playerror",h._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||h._loop?d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),D):(d._endTimers[h._id]=function(){d._ended(h),S.removeEventListener("ended",d._endTimers[h._id],!1)},S.addEventListener("ended",d._endTimers[h._id],!1))}catch(x){d._emit("playerror",h._id,x)}};S.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(S.src=d._src,S.load());var z=window&&window.ejecta||!S.readyState&&t._navigator.isCocoonJS;if(S.readyState>=3||z)L();else{d._playLock=!0,d._state="loading";var U=function(){d._state="loaded",L(),S.removeEventListener(t._canPlayEvent,U,!1)};S.addEventListener(t._canPlayEvent,U,!1),d._clearTimer(h._id)}}return h._id},pause:function(i){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"pause",action:function(){r.pause(i)}}),r;for(var d=r._getSoundIds(i),m=0;m<d.length;m++){r._clearTimer(d[m]);var a=r._soundById(d[m]);if(a&&!a._paused&&(a._seek=r.seek(d[m]),a._rateSeek=0,a._paused=!0,r._stopFade(d[m]),a._node))if(r._webAudio){if(!a._node.bufferSource)continue;typeof a._node.bufferSource.stop>"u"?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),r._cleanBuffer(a._node)}else(!isNaN(a._node.duration)||a._node.duration===1/0)&&a._node.pause();arguments[1]||r._emit("pause",a?a._id:null)}return r},stop:function(i,r){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(i)}}),d;for(var m=d._getSoundIds(i),a=0;a<m.length;a++){d._clearTimer(m[a]);var p=d._soundById(m[a]);p&&(p._seek=p._start||0,p._rateSeek=0,p._paused=!0,p._ended=!0,d._stopFade(m[a]),p._node&&(d._webAudio?p._node.bufferSource&&(typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),d._cleanBuffer(p._node)):(!isNaN(p._node.duration)||p._node.duration===1/0)&&(p._node.currentTime=p._start||0,p._node.pause(),p._node.duration===1/0&&d._clearSound(p._node))),r||d._emit("stop",p._id))}return d},mute:function(i,r){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(i,r)}}),d;if(typeof r>"u")if(typeof i=="boolean")d._muted=i;else return d._muted;for(var m=d._getSoundIds(r),a=0;a<m.length;a++){var p=d._soundById(m[a]);p&&(p._muted=i,p._interval&&d._stopFade(p._id),d._webAudio&&p._node?p._node.gain.setValueAtTime(i?0:p._volume,t.ctx.currentTime):p._node&&(p._node.muted=t._muted?!0:i),d._emit("mute",p._id))}return d},volume:function(){var i=this,r=arguments,d,m;if(r.length===0)return i._volume;if(r.length===1||r.length===2&&typeof r[1]>"u"){var a=i._getSoundIds(),p=a.indexOf(r[0]);p>=0?m=parseInt(r[0],10):d=parseFloat(r[0])}else r.length>=2&&(d=parseFloat(r[0]),m=parseInt(r[1],10));var h;if(typeof d<"u"&&d>=0&&d<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;typeof m>"u"&&(i._volume=d),m=i._getSoundIds(m);for(var _=0;_<m.length;_++)h=i._soundById(m[_]),h&&(h._volume=d,r[2]||i._stopFade(m[_]),i._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(d,t.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=d*t.volume()),i._emit("volume",h._id))}else return h=m?i._soundById(m):i._sounds[0],h?h._volume:0;return i},fade:function(i,r,d,m){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(i,r,d,m)}}),a;i=Math.min(Math.max(0,parseFloat(i)),1),r=Math.min(Math.max(0,parseFloat(r)),1),d=parseFloat(d),a.volume(i,m);for(var p=a._getSoundIds(m),h=0;h<p.length;h++){var _=a._soundById(p[h]);if(_){if(m||a._stopFade(p[h]),a._webAudio&&!_._muted){var w=t.ctx.currentTime,E=w+d/1e3;_._volume=i,_._node.gain.setValueAtTime(i,w),_._node.gain.linearRampToValueAtTime(r,E)}a._startFadeInterval(_,i,r,d,p[h],typeof m>"u")}}return a},_startFadeInterval:function(i,r,d,m,a,p){var h=this,_=r,w=d-r,E=Math.abs(w/.01),D=Math.max(4,E>0?m/E:m),M=Date.now();i._fadeTo=d,i._interval=setInterval(function(){var j=(Date.now()-M)/m;M=Date.now(),_+=w*j,_=Math.round(_*100)/100,w<0?_=Math.max(d,_):_=Math.min(d,_),h._webAudio?i._volume=_:h.volume(_,i._id,!0),p&&(h._volume=_),(d<r&&_<=d||d>r&&_>=d)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,h.volume(d,i._id),h._emit("fade",i._id))},D)},_stopFade:function(i){var r=this,d=r._soundById(i);return d&&d._interval&&(r._webAudio&&d._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(d._interval),d._interval=null,r.volume(d._fadeTo,i),d._fadeTo=null,r._emit("fade",i)),r},loop:function(){var i=this,r=arguments,d,m,a;if(r.length===0)return i._loop;if(r.length===1)if(typeof r[0]=="boolean")d=r[0],i._loop=d;else return a=i._soundById(parseInt(r[0],10)),a?a._loop:!1;else r.length===2&&(d=r[0],m=parseInt(r[1],10));for(var p=i._getSoundIds(m),h=0;h<p.length;h++)a=i._soundById(p[h]),a&&(a._loop=d,i._webAudio&&a._node&&a._node.bufferSource&&(a._node.bufferSource.loop=d,d&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop,i.playing(p[h])&&(i.pause(p[h],!0),i.play(p[h],!0)))));return i},rate:function(){var i=this,r=arguments,d,m;if(r.length===0)m=i._sounds[0]._id;else if(r.length===1){var a=i._getSoundIds(),p=a.indexOf(r[0]);p>=0?m=parseInt(r[0],10):d=parseFloat(r[0])}else r.length===2&&(d=parseFloat(r[0]),m=parseInt(r[1],10));var h;if(typeof d=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;typeof m>"u"&&(i._rate=d),m=i._getSoundIds(m);for(var _=0;_<m.length;_++)if(h=i._soundById(m[_]),h){i.playing(m[_])&&(h._rateSeek=i.seek(m[_]),h._playStart=i._webAudio?t.ctx.currentTime:h._playStart),h._rate=d,i._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.setValueAtTime(d,t.ctx.currentTime):h._node&&(h._node.playbackRate=d);var w=i.seek(m[_]),E=(i._sprite[h._sprite][0]+i._sprite[h._sprite][1])/1e3-w,D=E*1e3/Math.abs(h._rate);(i._endTimers[m[_]]||!h._paused)&&(i._clearTimer(m[_]),i._endTimers[m[_]]=setTimeout(i._ended.bind(i,h),D)),i._emit("rate",h._id)}}else return h=i._soundById(m),h?h._rate:i._rate;return i},seek:function(){var i=this,r=arguments,d,m;if(r.length===0)i._sounds.length&&(m=i._sounds[0]._id);else if(r.length===1){var a=i._getSoundIds(),p=a.indexOf(r[0]);p>=0?m=parseInt(r[0],10):i._sounds.length&&(m=i._sounds[0]._id,d=parseFloat(r[0]))}else r.length===2&&(d=parseFloat(r[0]),m=parseInt(r[1],10));if(typeof m>"u")return 0;if(typeof d=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var h=i._soundById(m);if(h)if(typeof d=="number"&&d>=0){var _=i.playing(m);_&&i.pause(m,!0),h._seek=d,h._ended=!1,i._clearTimer(m),!i._webAudio&&h._node&&!isNaN(h._node.duration)&&(h._node.currentTime=d);var w=function(){_&&i.play(m,!0),i._emit("seek",m)};if(_&&!i._webAudio){var E=function(){i._playLock?setTimeout(E,0):w()};setTimeout(E,0)}else w()}else if(i._webAudio){var D=i.playing(m)?t.ctx.currentTime-h._playStart:0,M=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(M+D*Math.abs(h._rate))}else return h._node.currentTime;return i},playing:function(i){var r=this;if(typeof i=="number"){var d=r._soundById(i);return d?!d._paused:!1}for(var m=0;m<r._sounds.length;m++)if(!r._sounds[m]._paused)return!0;return!1},duration:function(i){var r=this,d=r._duration,m=r._soundById(i);return m&&(d=r._sprite[m._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var i=this,r=i._sounds,d=0;d<r.length;d++)r[d]._paused||i.stop(r[d]._id),i._webAudio||(i._clearSound(r[d]._node),r[d]._node.removeEventListener("error",r[d]._errorFn,!1),r[d]._node.removeEventListener(t._canPlayEvent,r[d]._loadFn,!1),r[d]._node.removeEventListener("ended",r[d]._endFn,!1),t._releaseHtml5Audio(r[d]._node)),delete r[d]._node,i._clearTimer(r[d]._id);var m=t._howls.indexOf(i);m>=0&&t._howls.splice(m,1);var a=!0;for(d=0;d<t._howls.length;d++)if(t._howls[d]._src===i._src||i._src.indexOf(t._howls[d]._src)>=0){a=!1;break}return l&&a&&delete l[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,r,d,m){var a=this,p=a["_on"+i];return typeof r=="function"&&p.push(m?{id:d,fn:r,once:m}:{id:d,fn:r}),a},off:function(i,r,d){var m=this,a=m["_on"+i],p=0;if(typeof r=="number"&&(d=r,r=null),r||d)for(p=0;p<a.length;p++){var h=d===a[p].id;if(r===a[p].fn&&h||!r&&h){a.splice(p,1);break}}else if(i)m["_on"+i]=[];else{var _=Object.keys(m);for(p=0;p<_.length;p++)_[p].indexOf("_on")===0&&Array.isArray(m[_[p]])&&(m[_[p]]=[])}return m},once:function(i,r,d){var m=this;return m.on(i,r,d,1),m},_emit:function(i,r,d){for(var m=this,a=m["_on"+i],p=a.length-1;p>=0;p--)(!a[p].id||a[p].id===r||i==="load")&&(setTimeout(function(h){h.call(this,r,d)}.bind(m,a[p].fn),0),a[p].once&&m.off(i,a[p].fn,a[p].id));return m._loadQueue(i),m},_loadQueue:function(i){var r=this;if(r._queue.length>0){var d=r._queue[0];d.event===i&&(r._queue.shift(),r._loadQueue()),i||d.action()}return r},_ended:function(i){var r=this,d=i._sprite;if(!r._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(r._ended.bind(r,i),100),r;var m=!!(i._loop||r._sprite[d][2]);if(r._emit("end",i._id),!r._webAudio&&m&&r.stop(i._id,!0).play(i._id),r._webAudio&&m){r._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var a=(i._stop-i._start)*1e3/Math.abs(i._rate);r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),a)}return r._webAudio&&!m&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,r._clearTimer(i._id),r._cleanBuffer(i._node),t._autoSuspend()),!r._webAudio&&!m&&r.stop(i._id,!0),r},_clearTimer:function(i){var r=this;if(r._endTimers[i]){if(typeof r._endTimers[i]!="function")clearTimeout(r._endTimers[i]);else{var d=r._soundById(i);d&&d._node&&d._node.removeEventListener("ended",r._endTimers[i],!1)}delete r._endTimers[i]}return r},_soundById:function(i){for(var r=this,d=0;d<r._sounds.length;d++)if(i===r._sounds[d]._id)return r._sounds[d];return null},_inactiveSound:function(){var i=this;i._drain();for(var r=0;r<i._sounds.length;r++)if(i._sounds[r]._ended)return i._sounds[r].reset();return new o(i)},_drain:function(){var i=this,r=i._pool,d=0,m=0;if(!(i._sounds.length<r)){for(m=0;m<i._sounds.length;m++)i._sounds[m]._ended&&d++;for(m=i._sounds.length-1;m>=0;m--){if(d<=r)return;i._sounds[m]._ended&&(i._webAudio&&i._sounds[m]._node&&i._sounds[m]._node.disconnect(0),i._sounds.splice(m,1),d--)}}},_getSoundIds:function(i){var r=this;if(typeof i>"u"){for(var d=[],m=0;m<r._sounds.length;m++)d.push(r._sounds[m]._id);return d}else return[i]},_refreshBuffer:function(i){var r=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=l[r._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),r},_cleanBuffer:function(i){var r=this,d=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),d))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,r},_clearSound:function(i){var r=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);r||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(i){this._parent=i,this.init()};o.prototype={init:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,r._sounds.push(i),i.create(),i},create:function(){var i=this,r=i._parent,d=t._muted||i._muted||i._parent._muted?0:i._volume;return r._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(d,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=r._src,i._node.preload=r._preload===!0?"auto":r._preload,i._node.volume=d*t.volume(),i._node.load()),i},reset:function(){var i=this,r=i._parent;return i._muted=r._muted,i._loop=r._loop,i._volume=r._volume,i._rate=r._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,r=i._parent;r._duration=Math.ceil(i._node.duration*10)/10,Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,r=i._parent;r._duration===1/0&&(r._duration=Math.ceil(i._node.duration*10)/10,r._sprite.__default[1]===1/0&&(r._sprite.__default[1]=r._duration*1e3),r._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var l={},u=function(i){var r=i._src;if(l[r]){i._duration=l[r].duration,g(i);return}if(/^data:[^;]+;base64,/.test(r)){for(var d=atob(r.split(",")[1]),m=new Uint8Array(d.length),a=0;a<d.length;++a)m[a]=d.charCodeAt(a);c(m.buffer,i)}else{var p=new XMLHttpRequest;p.open(i._xhr.method,r,!0),p.withCredentials=i._xhr.withCredentials,p.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(h){p.setRequestHeader(h,i._xhr.headers[h])}),p.onload=function(){var h=(p.status+"")[0];if(h!=="0"&&h!=="2"&&h!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+p.status+".");return}c(p.response,i)},p.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete l[r],i.load())},f(p)}},f=function(i){try{i.send()}catch{i.onerror()}},c=function(i,r){var d=function(){r._emit("loaderror",null,"Decoding audio data failed.")},m=function(a){a&&r._sounds.length>0?(l[r._src]=a,g(r,a)):d()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(m).catch(d):t.ctx.decodeAudioData(i,m,d)},g=function(i,r){r&&!i._duration&&(i._duration=r.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},y=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=r?parseInt(r[1],10):null;if(i&&d&&d<9){var m=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!m&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};s.Howler=t,s.Howl=n,typeof ct<"u"?(ct.HowlerGlobal=e,ct.Howler=t,ct.Howl=n,ct.Sound=o):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=o)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var o=n._howls.length-1;o>=0;o--)n._howls[o].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;if(n=typeof n!="number"?l._pos[1]:n,o=typeof o!="number"?l._pos[2]:o,typeof t=="number")l._pos=[t,n,o],typeof l.ctx.listener.positionX<"u"?(l.ctx.listener.positionX.setTargetAtTime(l._pos[0],Howler.ctx.currentTime,.1),l.ctx.listener.positionY.setTargetAtTime(l._pos[1],Howler.ctx.currentTime,.1),l.ctx.listener.positionZ.setTargetAtTime(l._pos[2],Howler.ctx.currentTime,.1)):l.ctx.listener.setPosition(l._pos[0],l._pos[1],l._pos[2]);else return l._pos;return l},HowlerGlobal.prototype.orientation=function(t,n,o,l,u,f){var c=this;if(!c.ctx||!c.ctx.listener)return c;var g=c._orientation;if(n=typeof n!="number"?g[1]:n,o=typeof o!="number"?g[2]:o,l=typeof l!="number"?g[3]:l,u=typeof u!="number"?g[4]:u,f=typeof f!="number"?g[5]:f,typeof t=="number")c._orientation=[t,n,o,l,u,f],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(l,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(u,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(f,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(t,n,o,l,u,f);else return g;return c},Howl.prototype.init=function(t){return function(n){var o=this;return o._orientation=n.orientation||[1,0,0],o._stereo=n.stereo||null,o._pos=n.pos||null,o._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},o._onstereo=n.onstereo?[{fn:n.onstereo}]:[],o._onpos=n.onpos?[{fn:n.onpos}]:[],o._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(t,n)}}),o;var l=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")o._stereo=t,o._pos=[t,0,0];else return o._stereo;for(var u=o._getSoundIds(n),f=0;f<u.length;f++){var c=o._soundById(u[f]);if(c)if(typeof t=="number")c._stereo=t,c._pos=[t,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&e(c,l),l==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(t,0,0):c._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),o._emit("stereo",c._id);else return c._stereo}return o},Howl.prototype.pos=function(t,n,o,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"pos",action:function(){u.pos(t,n,o,l)}}),u;if(n=typeof n!="number"?0:n,o=typeof o!="number"?-.5:o,typeof l>"u")if(typeof t=="number")u._pos=[t,n,o];else return u._pos;for(var f=u._getSoundIds(l),c=0;c<f.length;c++){var g=u._soundById(f[c]);if(g)if(typeof t=="number")g._pos=[t,n,o],g._node&&((!g._panner||g._panner.pan)&&e(g,"spatial"),typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):g._panner.setPosition(t,n,o)),u._emit("pos",g._id);else return g._pos}return u},Howl.prototype.orientation=function(t,n,o,l){var u=this;if(!u._webAudio)return u;if(u._state!=="loaded")return u._queue.push({event:"orientation",action:function(){u.orientation(t,n,o,l)}}),u;if(n=typeof n!="number"?u._orientation[1]:n,o=typeof o!="number"?u._orientation[2]:o,typeof l>"u")if(typeof t=="number")u._orientation=[t,n,o];else return u._orientation;for(var f=u._getSoundIds(l),c=0;c<f.length;c++){var g=u._soundById(f[c]);if(g)if(typeof t=="number")g._orientation=[t,n,o],g._node&&(g._panner||(g._pos||(g._pos=u._pos||[0,0,-.5]),e(g,"spatial")),typeof g._panner.orientationX<"u"?(g._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),g._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),g._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):g._panner.setOrientation(t,n,o)),u._emit("orientation",g._id);else return g._orientation}return u},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,o,l,u;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")o=n[0],typeof l>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),t._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:t._panningModel});else return u=t._soundById(parseInt(n[0],10)),u?u._pannerAttr:t._pannerAttr;else n.length===2&&(o=n[0],l=parseInt(n[1],10));for(var f=t._getSoundIds(l),c=0;c<f.length;c++)if(u=t._soundById(f[c]),u){var g=u._pannerAttr;g={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:g.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:g.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:g.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:g.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:g.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:g.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:g.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:g.panningModel};var y=u._panner;y?(y.coneInnerAngle=g.coneInnerAngle,y.coneOuterAngle=g.coneOuterAngle,y.coneOuterGain=g.coneOuterGain,y.distanceModel=g.distanceModel,y.maxDistance=g.maxDistance,y.refDistance=g.refDistance,y.rolloffFactor=g.rolloffFactor,y.panningModel=g.panningModel):(u._pos||(u._pos=t._pos||[0,0,-.5]),e(u,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,o=n._parent;n._orientation=o._orientation,n._stereo=o._stereo,n._pos=o._pos,n._pannerAttr=o._pannerAttr,t.call(this),n._stereo?o.stereo(n._stereo):n._pos&&o.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,o=n._parent;return n._orientation=o._orientation,n._stereo=o._stereo,n._pos=o._pos,n._pannerAttr=o._pannerAttr,n._stereo?o.stereo(n._stereo):n._pos?o.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,o._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(rt);const Ys="/sol-testing/assets/dialog-open-3467aa1c.wav",Zs="/sol-testing/assets/dialog-close-5ab4712d.wav",Ks="/sol-testing/assets/click-2ab6cd74.mp3",Js="/sol-testing/assets/hover-5c3c113e.mp3",Qs="/sol-testing/assets/data-reveal-597be9cf.mp3",er="/sol-testing/assets/europa-6b226682.mp3",tr="/sol-testing/assets/dystopian-ca696d18.mp3",nr="/sol-testing/assets/siren-8cc4a7cf.mp3",ir="/sol-testing/assets/alpha-ed70f3a0.mp3",or="/sol-testing/assets/los-angeles-36549192.mp3",sr="/sol-testing/assets/cybertruck-19dca2a4.mp3",rr="/sol-testing/assets/take-the-wheel-064c8ed7.mp3";class ge{static CURRENT;path;volume;h;constructor(e,t){this.path=e,this.volume=t?.volume||1,this.h=new rt.Howl({src:[this.path],volume:this.volume,rate:t?.rate,loop:t?.loop})}static current(){return ge.CURRENT}onEnd(e){this.h.on("end",e)}play(){this.h.play(),ge.CURRENT=this}pause(){this.h.pause()}fade(e,t){this.h.fade(this.volume,e,t*1e3)}crossFade(e,t){e.play(),e.h.fade(0,e.volume,t*1e3),this.h.fade(this.volume,0,t*1e3),H.schedule(()=>{this.stop()},t)}stop(){this.h.stop(),ge.CURRENT===this&&(ge.CURRENT=void 0)}}function ar(){const s=new rt.Howl({src:[Ks],volume:.35}),e=new rt.Howl({src:[Js],volume:.35}),t=new rt.Howl({src:[Ys],volume:.5}),n=new rt.Howl({src:[Zs],volume:.25}),o=new rt.Howl({src:[Qs],volume:.75}),l=new ge(er,{volume:.7,loop:!0}),u=new ge(tr,{volume:.5,loop:!0}),f=new ge(nr,{volume:1,loop:!0}),c=new ge(ir,{volume:1}),g=new ge(or,{volume:.35}),y=new ge(sr,{volume:.5}),i=new ge(rr,{volume:.5});function r(){s.play()}function d(){e.play()}function m(){t.play()}function a(){n.play()}function p(){o.play()}return{europaTrack:l,dystopianTrack:u,sirenTrack:f,alphaTrack:c,losAngelesTrack:g,cybertruckTrack:y,takeTheWheelTrack:i,playClick:r,playHover:d,playDialogOpen:m,playDialogClose:a,playTextReveal:p}}const oe=ar();function lr(){const[s,e]=W(),[t,n]=W();function o(f){H.schedule(()=>{e(f),n(f.dialogs[0]),H.broadcastEvent(new he({type:"storyload",data:{story:f}})),oe.playDialogOpen()},f.delaySeconds)}function l(){const f=s(),c=t();if(f&&c){const g=f.dialogs.indexOf(c),y=f.dialogs[g+1];y?(n(void 0),H.schedule(()=>{n(y)},y.delaySeconds),H.broadcastEvent(new he({type:"storydialogchange",data:{story:f,from:c,to:y}})),oe.playClick()):(e(void 0),n(void 0),H.broadcastEvent(new he({type:"storyend",data:{story:f}})),oe.playDialogClose())}}function u(){const f=s();f&&(e(void 0),n(void 0),H.broadcastEvent(new he({type:"storyend",data:{story:f}})),oe.playDialogClose())}return{current:s,dialog:t,load:o,showNextDialog:l,skip:u}}const X=lr(),Ci="/sol-testing/assets/ghana-ec6c400b.png",ur=G('<div class="w-6 h-6 rounded-full overflow-hidden -m-3 z-10"><img class="w-full h-full object-cover" alt="Ghana flag">'),dr=G("<p>"),cr=G('<div><div class="flex items-start gap-4 mb-6"><div class="flex flex-col items-center"><div class="relative grid place-items-center w-16 h-16 rounded-full overflow-hidden"><img class="w-full h-full object-cover" alt="Ghana flag"></div></div><div class="flex-1"><p></p><div class="flex items-center"><h1 class="flex-1 text-4xl font-bold"></h1></div><hr class="my-2 opacity-25"><div class="relative mb-4"><p class="opacity-0"></p><p class="absolute top-0 left-0 w-full"></p></div><div class="flex items-center justify-between"><button class="py-3 px-6 bg-green-500 border-2 border-green-600 font-bold active:bg-green-600 hover:border-green-700 focus:outline-0 focus:border-green-700">Continue'),fr=G('<button class="py-3 px-6 font-bold underline">Skip'),gn=()=>{const[e,t]=W(0),[n,o]=W("");let l;const u=(c,g,y)=>{const d=X.dialog(),m=2,a=24,p=d?.borderColor||"#00C34B",h=d?.backgroundColor||"#00307B2C",_=d?.innerBorderColor||"#2a3c59",w=d?.innerBackgroundColor||"#402D5F6e",E=d?.vertexColor||"#7af455",D=[[0,0],[g,0],[g,y-50],[g-40,y-20],[100,y-20],[80,y],[20,y],[0,y-20]];c.scale((g-6)/g,(y-6)/y),c.translate(3,3),c.beginPath(),c.moveTo(0,0),c.lineTo(g,0),c.lineTo(g,y-50),c.lineTo(g-40,y-20),c.lineTo(100,y-20),c.lineTo(80,y),c.lineTo(20,y),c.lineTo(0,y-20),c.closePath(),c.lineJoin="round",c.lineCap="round",c.lineWidth=m,c.shadowBlur=a,c.shadowColor=p,c.strokeStyle=p,c.stroke(),c.stroke(),c.stroke(),c.fillStyle=h,c.shadowBlur=0,c.fill();for(const[T,S]of D)c.beginPath(),c.arc(T,S,3,R(0),R(360)),c.fillStyle=E,c.fill();const M=20,j=.5*M;c.resetTransform(),c.scale((g-M)/g,(y-M)/y),c.translate(j,j),c.beginPath(),c.moveTo(0,0),c.lineTo(g,0),c.lineTo(g,y-50),c.lineTo(g-40,y-20),c.lineTo(90,y-20),c.lineTo(70,y),c.lineTo(20,y),c.lineTo(0,y-20),c.closePath(),c.strokeStyle=_,c.shadowColor=_,c.shadowBlur=48,c.lineWidth=.5,c.stroke(),c.fillStyle=w,c.fill()};function f(c,g){function y(d){g>0?(g-=d.data.length,g<=0&&(d.data=d.substringData(0,d.data.length+g))):d.data=""}function i(d,m){let a=d.firstChild;if(a)do{const p=a.nodeType;p===Node.TEXT_NODE?m(a):p===Node.ELEMENT_NODE&&a.childNodes?.[0]&&i(a,m)}while(a=a.nextSibling)}const r=document.createElement("div");return r.innerHTML=c,i(r,y),r.innerHTML}return vt(()=>{X.dialog()&&(clearInterval(l),t(-1),o(f(X.dialog()?.content||"",9999)),oe.playTextReveal(),l=setInterval(()=>{e()<n().length?t(e()+1):clearInterval(l)},1e3/65))}),I(ie,{get when(){return!!X.dialog()},fallback:null,get children(){return I(Tt,{class:"fixed w-[480px] min-h-[96px] top-1/2 left-[calc(50vw-240px)] -translate-y-1/2",onPaintBg:u,get children(){const c=cr(),g=c.firstChild,y=g.firstChild,i=y.firstChild,r=i.firstChild,d=y.nextSibling,m=d.firstChild,a=m.nextSibling,p=a.firstChild,h=a.nextSibling,_=h.nextSibling,w=_.firstChild,E=w.nextSibling,D=_.nextSibling,M=D.firstChild;return C(y,I(ie,{get when(){return!!X.dialog()?.flagIcon},get children(){const j=ur(),T=j.firstChild;return Ue(T,"src",Ci),j}}),null),C(m,()=>X.dialog()?.type),C(p,()=>X.dialog()?.owner),C(a,()=>X.dialog()?.rightIcon,null),C(d,I(ie,{get when(){return!!X.dialog()?.location},get children(){const j=dr();return C(j,()=>X.dialog()?.location),j}}),h),Bt(M,"click",X.showNextDialog,!0),C(D,(()=>{const j=be(()=>!!X.current()?.skippable);return()=>j()&&(()=>{const T=fr();return Bt(T,"click",X.skip,!0),T})()})(),null),Ce(j=>{const T=`px-6 pt-6 pb-10 text-white text-md ${X.dialog()?.fontClass||""}`,S=X.dialog()?.leftIconSrc,A=`font-[calculator] uppercase tracking-widest font-bold text-sm ${X.dialog()?.fontClass||""}`,L=n(),z=f(X.dialog()?.content||"",e());return T!==j._v$&&Re(c,j._v$=T),S!==j._v$2&&Ue(r,"src",j._v$2=S),A!==j._v$3&&Re(m,j._v$3=A),L!==j._v$4&&(w.innerHTML=j._v$4=L),z!==j._v$5&&(E.innerHTML=j._v$5=z),j},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),c}})}})};ot(["click"]);class pe extends mn{static COUNT=0;static HEALTH=40;static NAME_PREFIX="D";static COLOR="#ff1c1c";static TARGETING_RADIUS=300;static NEXT_TARGET_POSITION_DISTANCE=125;static TARGET_POSITION_JITTER_RADIUS=60;static MIN_SPEED=120;static MAX_SPEED=150;direction;speed;targetPosition;targetRotation;target;weaponsChargePercent;constructor(e,t){super(`${pe.NAME_PREFIX}${pe.COUNT++}`,e,pe.HEALTH),this.direction=t.normalize(),this.targetPosition=e.clone(),this.speed=V(pe.MIN_SPEED,pe.MAX_SPEED),this.targetRotation=0,this.target=void 0,this.weaponsChargePercent=0;const o=Math.sqrt(2*k.mapSize*k.mapSize)/this.speed;H.schedule(()=>{v.removeObject(this)},o)}onUpdate(e){super.onUpdate(e);const t=this.targetPosition.subtract(this.position).angle();this.targetRotation=Jo(this.targetRotation,t,5*e),this.translate(P.fromAngle(this.targetRotation).multiply(this.speed*e,!0)),this.position.distanceTo(this.targetPosition)<5&&this.updateTargetPosition();const n=v.findObjects(o=>o instanceof st&&o.position.distanceTo(this.position)<pe.TARGETING_RADIUS);if(n.length>0){const o=V(0,n.length,!0);this.target=n[o]}else this.target=void 0;this.target?(this.weaponsChargePercent+=e*we.droneFireRate().val,this.weaponsChargePercent>=1&&(this.weaponsChargePercent=0,this.fireWeapon(this.target.position))):this.weaponsChargePercent>0&&(this.weaponsChargePercent-=e*we.droneFireRate().val,this.weaponsChargePercent=Math.max(this.weaponsChargePercent,0))}onMessage(e){if(super.onMessage(e),e.damage&&this.health<=0){const t=new Be(this.position,2.5);v.addObject(t),v.removeObject(this)}}onCollision(e){if(super.onCollision(e),e.object instanceof tt){const t=new Be(this.position,2.5);v.addObject(t),v.removeObject(this)}}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),e.beginPath(),e.moveTo(t,n-6),e.lineTo(t-2,n-6),e.lineTo(t-10,n+10),e.lineTo(t-7,n+12),e.lineTo(t-4,n+8),e.lineTo(t+4,n+8),e.lineTo(t+7,n+12),e.lineTo(t+10,n+10),e.lineTo(t+2,n-6),e.lineTo(t,n-6),e.strokeStyle=pe.COLOR,e.lineJoin="round",e.lineCap="round",e.stroke(),e.beginPath(),e.roundRect(t-2,n-2,4,7,2),e.fillStyle=pe.COLOR,e.fill(),e.beginPath(),e.moveTo(t-3,n+11),e.lineTo(t+3,n+11),e.lineTo(t,n+16),e.closePath(),e.fillStyle=pe.COLOR,e.fill(),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n),ze(e,{x:t-10,y:n+15,width:20,height:2,progress:this.health/pe.HEALTH,fillColor:Ke("#ff0000","#00ff00",this.health/pe.HEALTH),trackColor:"#ff000044"})}getBounds(){return new Me(this.position.x,this.position.y,10)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:10},e)}updateTargetPosition(){this.targetPosition=this.targetPosition.add(this.direction.multiply(pe.NEXT_TARGET_POSITION_DISTANCE)).add(new P(V(-pe.TARGET_POSITION_JITTER_RADIUS,pe.TARGET_POSITION_JITTER_RADIUS),V(-pe.TARGET_POSITION_JITTER_RADIUS,pe.TARGET_POSITION_JITTER_RADIUS)))}fireWeapon(e){const t=e.subtract(this.position).normalize(!0),n=P.fromAngle(t.angle()),o=new Ve(this.position,n,"enemy");v.addObject(o)}}class me extends Ot{static COUNT=0;static NAME_PREFIX="A";static MIN_RADIUS=4;static MAX_RADIUS=16;static SPLIT_RADIUS_THRESHOLD=6;static MAX_SPLIT_COUNT=4;static MIN_RADIUS_RATIO=.75;static MIN_POINTS=24;static MAX_POINTS=48;static MIN_SPEED=100;static MAX_SPEED=180;static COLOR="gray";radius;color;points;rotationAnimation;velocity;constructor(e,t,n){super(`${me.NAME_PREFIX}${me.COUNT++}`,e),this.radius=n||V(me.MIN_RADIUS,me.MAX_RADIUS),this.color=bi(.85),this.velocity=t.normalize().multiply(V(me.MIN_SPEED,me.MAX_SPEED)),this.points=[],this.rotationAnimation=new Le({duration:V(3e3,8e3),repeat:!0}).play();const o=k.mapSize/this.velocity.size();H.schedule(()=>{v.removeObject(this)},o);const l=me.MIN_RADIUS_RATIO*this.radius,u=V(me.MIN_POINTS,me.MAX_POINTS),f=2*Math.PI/u;for(let c=0;c<2*Math.PI;c+=f){const g=V(l,this.radius),y=g*Math.cos(c),i=g*Math.sin(c);this.points.push([y,i])}}onUpdate(e){super.onUpdate(e),this.translate(this.velocity.multiply(e)),this.rotationAnimation.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=2*Math.PI*this.rotationAnimation.value;e.translate(t,n),e.rotate(o),e.translate(-t,-n),e.beginPath(),e.moveTo(t+this.points[0][0],n+this.points[0][1]),this.points.forEach(([l,u])=>{e.lineTo(t+l,n+u)}),e.closePath(),e.lineCap="round",e.lineJoin="round",e.fillStyle=me.COLOR,e.fill(),e.strokeStyle=this.color,e.stroke(),e.translate(t,n),e.rotate(-o),e.translate(-t,-n)}onCollision(e){e.object instanceof me||e.object instanceof pe||(this.splitOrDestroy(e.point),e.object.onMessage({damage:we.asteroidDamage().val*(this.radius/me.MAX_RADIUS)}))}getBounds(){return new Me(this.position.x,this.position.y,this.radius)}qtIndex(e){return De.prototype.qtIndex.call({x:this.position.x,y:this.position.y,r:this.radius},e)}splitOrDestroy(e){if(this.radius>=me.SPLIT_RADIUS_THRESHOLD){const n=V(0,me.MAX_SPLIT_COUNT,!0),o=this.velocity.angle();for(let l=0;l<n;l++){const u=R(V(-5,5)),f=P.fromAngle(o+u),c=new me(this.position,f,.5*this.radius);v.addObject(c)}}const t=new Be(e,this.radius/me.MIN_RADIUS);v.removeObject(this),v.addObject(t)}}const hr=s=>{const e=n=>{const l=k.view(),u=k.zoom(),f=.5*l.w,c=.5*l.h,g=v.findObjects(y=>(y instanceof me||y instanceof pe||y instanceof K)&&!k.view().contains(y.position.x,y.position.y));for(const y of g){const i=new P(l.x+f,l.y+c).subtract(y.position),r=(f-$e(i.x,-f+0,f-0))*u,d=(c-$e(i.y,-c+0,c-0))*u,m=i.angle()+Math.PI;n.translate(r,d),n.rotate(m),n.translate(-r,-d),n.beginPath(),n.moveTo(r,d),n.lineTo(r+7,d+20),n.arcTo(r,d+13,r-7,d+20,10),n.fillStyle=y instanceof K?"#f3ff0099":"#ff000099",n.fill(),n.translate(r,d),n.rotate(-m),n.translate(-r,-d)}};return I(Tt,We(s,{class:"fixed top-0 left-0 w-full h-full pointer-events-none",onPaintBg:n=>{e(n)}}))},pr=s=>{const e=(t,n,o)=>{const l="#31ffe9",u="#31ffe933",f="#31ffe966",c="#31ffe9";t.beginPath(),t.fillStyle=u,t.roundRect(50,o-48,n-100,8,8),t.fill();const g=v.repairProgress();t.beginPath(),t.shadowBlur=12,t.shadowColor=l,t.fillStyle=c,t.roundRect(50,o-48,g*(n-100),8,8),t.fill(),t.beginPath(),t.textAlign="right",t.font='bold 16px "Monospace"',t.fillText(`REPAIR ${Math.trunc(g*100)}%`,n-50,o-64),t.beginPath(),t.moveTo(40,o-44),t.lineTo(24,o-44),t.arcTo(0,o-56,28,o-68,12),t.lineTo(n-165,o-68),t.strokeStyle=f,t.stroke(),t.beginPath(),t.arc(40,o-44,4,R(0),R(360)),t.fill(),t.beginPath(),t.arc(n-165,o-68,4,R(0),R(360)),t.fill(),t.beginPath(),t.moveTo(n-40,o-44),t.lineTo(n-24,o-44),t.arcTo(n,o-56,n-24,o-68,12),t.lineTo(n-40,o-68),t.strokeStyle=f,t.stroke(),t.beginPath(),t.arc(n-40,o-44,4,R(0),R(360)),t.fill(),t.beginPath(),t.arc(n-40,o-68,4,R(0),R(360)),t.fill();for(let y=0;y<6;y++)t.beginPath(),t.roundRect(50+y*12,o-32,8,8,2),t.fillStyle=l,t.globalAlpha=(6-y)/6,t.fill();t.globalAlpha=1};return I(ie,{get when(){return le.hyperDriveParts()===Z.MAX_COUNT},get children(){return I(Tt,We(s,{class:"fixed w-[720px] max-w-[75%] h-24 bottom-0 left-1/2 -translate-x-1/2 pointer-events-none",onPaintBg:e}))}})};function mr(s){return je({a:{viewBox:"0 0 1024 1024"},c:'<path d="M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9z"/>'},s)}function gr(s){return je({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm215.3 337.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 0 1-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 0 1-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 0 0 229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"/>'},s)}function yr(s){return je({a:{viewBox:"0 0 1024 1024"},c:'<path d="m290 236.4 43.9-43.9a8.01 8.01 0 0 0-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0 0 13.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 0 0 0 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 0 0-11.3 0l-42.4 42.3a8.03 8.03 0 0 0 0 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 0 0 4.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 0 0-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 0 0-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"/>'},s)}const vr="/sol-testing/assets/mixkit-02980774.png",_r="/sol-testing/assets/uppbeat-c6c4e68b.png",br="/sol-testing/assets/opengameart-696794e2.jpg";function wr(s){return je({a:{viewBox:"0 0 512 512"},c:'<path d="M48 256c0 114.87 93.13 208 208 208s208-93.13 208-208S370.87 48 256 48 48 141.13 48 256Zm212.65-91.36a16 16 0 0 1 .09 22.63L208.42 240H342a16 16 0 0 1 0 32H208.42l52.32 52.73A16 16 0 1 1 238 347.27l-79.39-80a16 16 0 0 1 0-22.54l79.39-80a16 16 0 0 1 22.65-.09Z"/>'},s)}function Tr(s){return je({a:{viewBox:"0 0 512 512"},c:'<path d="M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"/>'},s)}function Sr(s){return je({a:{viewBox:"0 0 448 512"},c:'<path d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7l137.4-137.3c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"/>'},s)}function xr(s){return je({a:{viewBox:"0 0 448 512"},c:'<path d="M246.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 109.3l137.4 137.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160zm160 352-160-160c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 301.3l137.4 137.3c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3z"/>'},s)}const Ar=G('<div class="fixed z-10 w-full h-screen top-0 left-0 bg-white bg-opacity-5 backdrop-blur-xl p-16 overflow-auto"><div class="min-w-[640px] w-1/2"><div class="flex items-end gap-4 mb-12"><button></button><h1 class="text-6xl text-white">Credits</h1></div><div class="mb-12"><p class="text-white">Designed &amp; Developed By</p><div class="flex items-center gap-4"><p class="text-white text-2xl font-bold">Kwame Opare Asiedu</p><a href="https://twitter.com/KOpareAsiedu" class="inline-block" target="_blank"></a></div></div><div class="mb-12"><p class="text-white">Additional Assets</p><div class="flex items-center gap-4"><div class="h-20"><img class="w-full h-full object-contain" alt="Mixkit"></div><div class="h-20"><img class="w-full h-full object-contain" alt="Mixkit"></div><div class="h-20"><img class="w-full h-full object-contain" alt="Mixkit"></div></div></div><div class="mb-12"><p class="text-white">Special Thanks</p><div class="flex flex-col gap-3"><div class="flex items-center gap-2"><p class="text-white text-2xl font-bold">Ekua</p></div><p class="text-white text-2xl font-bold">Video Game Developers GH</p><p class="text-white text-2xl font-bold">Deep-Fold <small class="align-mdidle">(Pixel Space Background Generator)</small></p><p class="text-white text-2xl font-bold">Little Robot Sound Factory <small class="align-middle">(UI sound effects)</small></p></div></div><div><p class="text-white">Support</p><p class="text-white text-lg mb-8">Thank you for playing my game! It really means a lot to me. This game is meant to be the first entry in the <strong>Sol Explorer</strong> universe. The next entry builds upon this with and extensive story and many more features. With or without support, I will keep working on this. However If you&apos;d like to support in speeding up development, consider becoming a patron.</p><a class="inline-block bg-[#F73C52] py-4 px-8 text-white font-bold" href="https://www.patreon.com/kwameopareasiedu" target="_blank"> Support on Patreon'),Cr=s=>(at(()=>{const e=t=>{t.key==="Escape"&&s.onClose()};window.addEventListener("keyup",e),it(()=>{window.removeEventListener("keyup",e)})}),(()=>{const e=Ar(),t=e.firstChild,n=t.firstChild,o=n.firstChild,l=n.nextSibling,u=l.firstChild,f=u.nextSibling,c=f.firstChild,g=c.nextSibling,y=l.nextSibling,i=y.firstChild,r=i.nextSibling,d=r.firstChild,m=d.firstChild,a=d.nextSibling,p=a.firstChild,h=a.nextSibling,_=h.firstChild,w=y.nextSibling,E=w.firstChild,D=E.nextSibling,M=D.firstChild;M.firstChild;const j=w.nextSibling,T=j.firstChild,S=T.nextSibling,A=S.nextSibling,L=A.firstChild;return Bt(o,"click",s.onClose,!0),C(o,I(wr,{size:48,fill:"white"})),C(g,I(gr,{fill:"white",size:36})),Ue(m,"src",vr),Ue(p,"src",_r),Ue(_,"src",br),C(M,I(mr,{class:"inline align-middle",fill:"red"}),null),C(A,I(Tr,{class:"inline"}),L),e})());ot(["click"]);const Or=G('<div class="text-white"><h1 class="text-[5.5em] font-[Hacked] bold text-center leading-none">System Failure</h1><p class="font-sans text-center mb-4">A moment of silence for the fallen crew of the <strong>Sol Explorer</strong></p><div class="flex items-center w-[520px] gap-2 mx-auto"><button class="flex-1 py-3 px-6 bg-gray-500 border-2 border-gray-600 font-bold active:bg-gray-600 hover:border-gray-700 focus:outline-0 focus:border-gray-700">Restart</button><button class="flex-1 py-3 px-6 bg-red-500 border-2 border-red-600 font-bold active:bg-red-600 hover:border-red-700 focus:outline-0 focus:border-red-700">Quit To Main Menu'),Er=s=>{const e=(o,l,u)=>{const g="#C3004B",i=g,r=24,d="#7B00302C";o.scale((l-4)/l,(u-4)/u),o.translate(2,2),o.clearRect(0,0,l,u),o.beginPath(),o.moveTo(0,20),o.lineTo(20,0),o.lineTo(l-20,0),o.lineTo(l,20),o.lineTo(l,u-20),o.lineTo(l-20,u),o.lineTo(20,u),o.lineTo(0,u-20),o.lineTo(0,20),o.lineJoin="round",o.lineCap="round",o.lineWidth=4,o.shadowBlur=r,o.strokeStyle=g,o.shadowColor=i,o.stroke(),o.fillStyle=d,o.shadowBlur=0,o.fill(),o.beginPath(),o.moveTo(10,u-20),o.lineTo(20,u-20),o.lineTo(35,u-5),o.lineTo(25,u-5),o.fillStyle="#FF3300",o.shadowColor="#FF3300",o.shadowBlur=48,o.fill(),o.beginPath(),o.moveTo(30,u-15),o.lineTo(40,u-15),o.lineTo(50,u-5),o.lineTo(40,u-5),o.fillStyle="#FF33006e",o.fill(),o.beginPath(),o.moveTo(l-10,u-20),o.lineTo(l-20,u-20),o.lineTo(l-35,u-5),o.lineTo(l-25,u-5),o.fillStyle="#FF3300",o.shadowColor="#FF3300",o.shadowBlur=48,o.fill(),o.beginPath(),o.moveTo(l-30,u-15),o.lineTo(l-40,u-15),o.lineTo(l-50,u-5),o.lineTo(l-40,u-5),o.fillStyle="#FF33006e",o.fill()},t=()=>{window.location.reload()},n=()=>{window.location.hash=qt,window.location.reload()};return I(ie,{get when(){return v.isOver()},get children(){return I(Tt,We(s,{class:"fixed top-0 left-0 w-screen h-screen grid place-items-center",onPaintBg:e,get children(){const o=Or(),l=o.firstChild,u=l.nextSibling,f=u.nextSibling,c=f.firstChild,g=c.nextSibling;return c.$$click=t,g.$$click=n,o}}))}})};ot(["click"]);function Ir(s){return je({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M6 9a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3A.5.5 0 0 1 6 9zM3.854 4.146a.5.5 0 1 0-.708.708L4.793 6.5 3.146 8.146a.5.5 0 1 0 .708.708l2-2a.5.5 0 0 0 0-.708l-2-2z"/><path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h12z"/>'},s)}function kr(s){return je({a:{viewBox:"0 0 24 24"},c:'<circle cx="12" cy="12" r="3"/><path d="M13 4.069V2h-2v2.069A8.008 8.008 0 0 0 4.069 11H2v2h2.069A8.007 8.007 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"/>'},s)}const $r=G('<div class="active-hud fixed top-3 right-3"><div class="flex items-center gap-4"></div><p class="text-white text-sm mt-2 text-right"><code class="font-mono tracking-widest">SHIFT</code> to cycle HUDs'),Nr=G("<div>"),Rr=G("<div><p>"),Pr=()=>(()=>{const s=Nr();return C(s,I(ie,{get when(){return!v.isOver()},get children(){const e=$r(),t=e.firstChild;return C(t,I(nn,{label:"Free Roam",get icon(){return I(Bs,{size:16})},get active(){return v.activeHud()===Y.NONE}}),null),C(t,I(nn,{label:"Console",get icon(){return I(Ir,{size:16})},get active(){return v.activeHud()===Y.CONSOLE}}),null),C(t,I(nn,{label:"Weapons",get icon(){return I(kr,{})},get active(){return v.activeHud()===Y.WEAPONS}}),null),e}})),s})(),nn=s=>(()=>{const e=Rr(),t=e.firstChild;return C(e,()=>s.icon,t),C(t,()=>s.label),Ce(()=>Re(e,`flex items-center gap-2 text-white ${s.active?"font-bold uppercase":"opacity-25"}`)),e})(),Dr=G('<div class="fixed top-0 left-0 w-screen h-screen grid place-items-center backdrop-blur-lg"><div class="text-white"><h1 class="text-[5.5em] font-[Hacked] bold text-center leading-none">Paused</h1><p class="font-sans text-center mb-4">PRESS <code class="font-mono font-bold">ESCAPE</code> TO RESUME</p><div class="flex items-center w-[520px] gap-2 mx-auto"><button class="flex-1 py-3 px-6 bg-gray-500 border-2 border-gray-600 font-bold active:bg-gray-600 hover:border-gray-700 focus:outline-0 focus:border-gray-700">RESUME</button><button class="flex-1 py-3 px-6 bg-red-500 border-2 border-red-600 font-bold active:bg-red-600 hover:border-red-700 focus:outline-0 focus:border-red-700">QUIT TO MAIN MENU'),Mr=()=>{const s=()=>{H.resume()},e=()=>{window.location.hash=qt,window.location.reload()};return I(ie,{get when(){return H.isPaused()},get children(){const t=Dr(),n=t.firstChild,o=n.firstChild,l=o.nextSibling,u=l.nextSibling,f=u.firstChild,c=f.nextSibling;return f.$$click=s,c.$$click=e,t}})};ot(["click"]);class et extends Te{static INSTANCE;static PAN_SCALE=500;anim;constructor(){super("Menu Scene Manager"),this.anim=new Le({duration:1e4,repeat:!0}).play()}static instance(){return et.INSTANCE||(et.INSTANCE=new et),et.INSTANCE}onStart(){super.onStart(),k.showOutput(),oe.europaTrack.play()}onUpdate(e){super.onUpdate(e),this.anim.update(.1*e);const t=R(this.anim.value*360),[n,o]=[Math.cos(t),Math.sin(t)];k.setPan(new P(n*et.PAN_SCALE,o*et.PAN_SCALE))}}const Lr=G('<div class="w-screen h-screen overflow-hidden"><div class="fixed w-full h-full z-10 backdrop-blur"><div class="fixed top-16 left-16 text-white"><h1 class="font-[GameOfSquids] text-[5rem] leading-none">Sol Explorer</h1><p class="text-xs tracking-[0.65rem] mt-4 uppercase font-[Speedy] opacity-40">A Terminal Style Space Strategy Game</p></div><div class="fixed left-16 bottom-4 text-white"><p class="text-sm">Developed by <strong>Kwame Opare Asiedu</strong></p><p class="text-xs">v0.5.0</p></div><div class="fixed top-1/2 left-16 flex items-start ps-12 -translate-y-1/2"><h2 class="absolute -left-[15rem] text-white text-4xl uppercase font-[Speedy] origin-right -rotate-90 leading-none opacity-50">Main Menu</h2><div class="bg-gray-700 bg-opacity-20">'),jr=G('<button><p class="leading-none mb-2"></p><p class="text-[0.65rem] leading-none font-mono">'),Hr=()=>{v.init({objects:[et.instance(),new ne(P.zero()),new J(ne.NAME),new J(ne.NAME),new J(ne.NAME),new J(ne.NAME),new J(ne.NAME),new Ae("Eris",new P(250,-250),9,"#F3A505"),new Ae("Alecto",new P(-500,-300),15,"#434B4D"),new Ae("Artemi",new P(-640,109),9.5,"#7FB5B5"),new Ae("Pholus",new P(400,195),13.5,"#6C3B2A"),new Ae("Boreas",new P(-275,298),18,"#969992"),new K(new P(100,100),3e5),new K(new P(-512,240),5e4),new K(new P(390,400),5e5),new K(new P(-320,-280),125e3),new K(new P(462,-194),4e5)]});const[s,e]=wo(),[t,n]=W(!1),o=()=>{n(!0),k.hideOutput(),ge.current()?.fade(0,2.5),H.schedule(()=>{window.location.hash=mi,window.location.reload()},2.5)},l=()=>{window.electron?.quit()};return(()=>{const u=Lr(),f=u.firstChild,c=f.firstChild,g=c.nextSibling,y=g.nextSibling,i=y.firstChild,r=i.nextSibling;return C(u,I(Zt,{class:"fixed top-0 left-0 w-full h-full",backgroundImagePath:Si,initialOpacity:0}),f),C(r,I(on,{description:"Start A New Game Session",onclick:o,get disabled(){return t()},children:"New Game"}),null),C(r,I(on,{description:"Explore The Developer Information",onclick:()=>e({dialog:"credits"},{replace:!0}),get disabled(){return t()},children:"Credits"}),null),C(r,I(on,{description:"Quit To Desktop",get disabled(){return t()},onclick:l,children:"Exit"}),null),C(u,I(ie,{get when(){return s.dialog==="credits"},get children(){return I(Cr,{onClose:()=>{e({dialog:void 0},{replace:!0}),oe.playClick()}})}}),null),u})()},on=s=>{const[e,t]=_t(s,["description","children","class","onmouseenter","onclick"]),n=()=>{oe.playHover(),e.onmouseenter?.()},o=()=>{oe.playClick(),e.onclick?.()};return(()=>{const l=jr(),u=l.firstChild,f=u.nextSibling;return l.$$click=o,l.addEventListener("mouseenter",n),ut(l,We({get class(){return`menu-btn ${t.disabled?"pointer-events-none":""}`}},t),!1,!0),C(u,()=>e.children),C(f,()=>e.description),l})()};ot(["click"]);const Br="/sol-testing/assets/earth-a8607d59.png";class Ur extends Ae{bgImg;rotationAnimation;constructor(e,t){super("Earth",e,t,"#00000000"),this.bgImg=new Image,this.bgImg.src=Br,this.rotationAnimation=new Le({duration:12e5,repeat:!0}).play(),this.isRevealed=!0}onUpdate(e){super.onUpdate(e),this.rotationAnimation.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=this.rotationAnimation.value*2*Math.PI;this.bgImg.complete&&(e.translate(t,n),e.rotate(o),e.translate(-t,-n),e.drawImage(this.bgImg,t-this.size,n-this.size,2*this.size,2*this.size),e.translate(t,n),e.rotate(-o),e.translate(-t,-n))}renderOutsideView(){return!0}}const Fr="/sol-testing/assets/globe-f346a77c.png",Wr="/sol-testing/assets/spaceship-658ab552.png",zr="/sol-testing/assets/ufo-b3eef075.png",Gr={["Incoming Transmission"]:I(Sr,{fill:"#33ff00"}),["Outgoing Transmission"]:I(xr,{fill:"#ffaa55"}),["Intercom Transmission"]:I(yr,{fill:"#6755ff"})};class b{type;owner;location;content;delaySeconds;leftIconSrc;rightIcon;flagIcon;data;borderColor;backgroundColor;innerBorderColor;innerBackgroundColor;vertexColor;fontClass;constructor({type:e,owner:t,location:n,content:o,delaySeconds:l,data:u,danger:f,fontClass:c}){this.type=e,this.owner=t,this.content=o,this.location=n,this.delaySeconds=l||0,this.leftIconSrc=t!=="Primarch"?e==="Incoming Transmission"?Fr:Wr:zr,this.rightIcon=Gr[e],this.flagIcon=t!=="Primarch"?Ci:void 0,this.data=u||{},this.borderColor=f?"#C3004B":void 0,this.backgroundColor=f?"#7B00302C":void 0,this.innerBorderColor=f?"#3c2a59":void 0,this.innerBackgroundColor=f?"#5F402D6e":void 0,this.vertexColor=f?"#f47a55":void 0,this.fontClass=c}static forCommanderOutgoing(e){return new b({...e,type:"Outgoing Transmission",owner:"Commander",location:"Bridge, Sol Explorer"})}static forCommanderIntercom(e){return new b({...e,type:"Intercom Transmission",owner:"Commander",location:"Bridge, Sol Explorer"})}static forNavigation(e){return new b({...e,type:"Intercom Transmission",owner:"Navigation",location:"Bridge, Sol Explorer"})}static forEngineering(e){return new b({...e,type:"Intercom Transmission",owner:"Engineering",location:"Engineering Deck, Sol Explorer"})}static forMissionControl(e){return new b({...e,type:"Incoming Transmission",owner:"Mission Control",location:"Asiedu Space Station, Accra, Ghana"})}static forMotherShip(e){return new b({...e,type:"Intercom Transmission",owner:"Primarch",location:"Alien Mothership"})}}class ve{title;hint;constructor(e,t){this.title=e,this.hint=t}}class fe{dialogs;delaySeconds;objective;skippable;constructor(e,t,n){if(t.length===0)throw new Error("Story must contain at least one dialog");this.dialogs=t,this.objective=e,this.delaySeconds=n?.delaySeconds||0,this.skippable=n?.skippable!==void 0?n?.skippable:!0}}const kn=new fe(void 0,[b.forCommanderOutgoing({content:"Mission control, this is Sol Explorer. We have completed the final run to the target orbit. Running diagnostics on all sub-systems. Standby for status update. Over!"}),b.forCommanderOutgoing({content:"Mission control, diagnostics completed. All sub-systems operating nominally. Hyper-drive payload has 100% structural integrity. Over!"}),b.forMissionControl({content:"Roger that Sol Explorer. We have your visuals on satellite! Standby for further instructions. Over!"}),b.forCommanderOutgoing({content:"Acknowledged. Over!"}),b.forMissionControl({content:`
        <p>Sol Explorer, you are clear to commence hyper-drive test procedure.</p>
        <br>
        <p>Authorization sequence is
          <strong>Bravo</strong>,
          <strong>Echo</strong>,
          <strong>Whiskey</strong>,
          <strong>Foxtrot</strong>,
          <strong>Hotel</strong>,
          <strong>Delta</strong>,
          <strong>Zulu</strong>,
          <strong>Romeo</strong>.
        </p>
        <br>
        <p>I repeat: 
          <strong>Bravo</strong>,
          <strong>Echo</strong>,
          <strong>Whiskey</strong>,
          <strong>Foxtrot</strong>,
          <strong>Hotel</strong>,
          <strong>Delta</strong>,
          <strong>Zulu</strong>,
          <strong>Romeo</strong>.
        </p>
        <p>Over!</p>
      `}),b.forCommanderOutgoing({content:`
        <p>Mission control, authorization sequence confirmed: </p>
        <br>
        <p>
          <strong>Bravo</strong>,
          <strong>Echo</strong>,
          <strong>Whiskey</strong>,
          <strong>Foxtrot</strong>,
          <strong>Hotel</strong>,
          <strong>Delta</strong>,
          <strong>Zulu</strong>,
          <strong>Romeo</strong>.
        </p>
        <p>Over!</p>
      `}),b.forMissionControl({content:"Affirmative Sol Explorer. You may begin when ready. Good luck and Godspeed. Over!"}),b.forCommanderOutgoing({content:"Roger that mission control. Sol Explorer Out!"}),b.forCommanderIntercom({content:"Bridge to all sectors! Initiate protocol 741. Prepare for hyper-drive test!"}),b.forCommanderIntercom({content:"Commencing test in T minus 5.. 4.. 3.. 2.. 1.. Now.",data:{activateHyperDriveField:0}}),b.forEngineering({content:"Command. The hyper-drive's flux density is increasing too quickly!",delaySeconds:4,data:{activateHyperDriveField:1}}),b.forEngineering({content:"Command. We have unusually high readings for the hyper-drive's flux density. I recommend aborting the test and reporting to mission control!",delaySeconds:1.5}),b.forCommanderIntercom({content:"Mission control has already indicated that we may experience recurring flux spikes. Proceed as planned",data:{activateHyperDriveField:2}}),b.forEngineering({content:"COMMAND! THE FLUX DENSITY IS OFF THE CHARTS! I STRONGLY RECOMMEND ABORTING NOW BEFORE...!",delaySeconds:1.5,data:{triggerHyperDriveExplosion:!0}}),b.forEngineering({content:"Oh dear God. Explosion in the hyper-drive bay! All emergency personnel respond to the engineering deck immediately!",delaySeconds:4,danger:!0}),b.forCommanderIntercom({content:"Engineering, report! What the hell just happened down there?!!!",danger:!0}),b.forEngineering({content:"THE FUCKING HYPER-DRIVE OVERLOADED, THAT'S WHAT!!!",danger:!0}),b.forEngineering({content:"I warned you. We should have aborted the test when flux density rose too high!!!",danger:!0,data:{activateWarpTunnel:!0}}),b.forNavigation({content:"Command, we're picking up an anomaly just outside the ship and it's growing in size!",delaySeconds:2,danger:!0}),b.forNavigation({content:"WHAT THE HELL! IT'S PULLING THE SHIP TOWARDS IT!!!",delaySeconds:2,danger:!0}),b.forCommanderIntercom({content:`
        <p>
          Mayday! Mayday! Mayday! Mission control!
          <br>
          Hyper-drive has experienced a catastrophic failure!
          <br>
          Anomaly detected nearby pulling us towards it!
          <br>
          ALL SECTORS!, CODE RED!! BRACE FOR IMPACT!!!
        </p>
      `,danger:!0,data:{hideDisplay:!0}}),b.forMissionControl({content:"Sol Explorer, respond!!!",delaySeconds:4}),b.forMissionControl({content:"..."}),b.forMissionControl({content:"Anyone?!!!"}),b.forMissionControl({content:"..."})],{delaySeconds:3.5,skippable:!1}),$n=new fe(new ve("Scan the star system to identify objects","Select your ship to initiate a scan"),[b.forCommanderIntercom({content:"Ugh..."}),b.forCommanderIntercom({content:"Is everyone alright?"}),b.forCommanderIntercom({content:"I want a complete status update on the entire ship and crew now!"}),b.forNavigation({content:"Errm, command, I'm not picking up the EARTH on our scanners",delaySeconds:1}),b.forCommanderIntercom({content:"What do you mean you are not picking up the earth? It's a very big blue ball!"}),b.forNavigation({content:"I'm not picking up anything actually. Earth, moon, planets, satellites, nothing!"}),b.forCommanderIntercom({content:"Bring up the visual feed from all external cameras"}),b.forCommanderIntercom({content:"How is this possible? The earth is supposed to be right there!",delaySeconds:1}),b.forEngineering({content:"Unless we are not in our space anymore"}),b.forCommanderIntercom({content:"How do you mean?"}),b.forEngineering({content:"Think about it. This hyper-drive is essentially a quantum device that overloaded and then we detected that anomaly."}),b.forEngineering({content:"I think that may have been a wormhole that has sucked us to a different part of space"}),b.forCommanderIntercom({content:"A wormhole! Seriously?!"}),b.forEngineering({content:"That is the only plausible explanation of why the FUCKING PLANET and MOON are not outside!"}),b.forEngineering({content:"The earth did not disappear. We got ripped to a different part of the universe!"}),b.forNavigation({content:"Command, our scanners have picked up several bodies that don't match anything in our solar system!"}),b.forEngineering({content:"It seems I was right. Not that, that's any consolation though!"}),b.forCommanderIntercom({content:"How do we fix this and get back?"}),b.forEngineering({content:"Hmm. It's a long shot, but I THINK we can fix the hyper-drive and fire it up again!"}),b.forCommanderIntercom({content:"I'm sorry, What?!!"}),b.forEngineering({content:"In theory, we didn't just teleport here, we switched locations with something here and we are still ENTANGLED with it. If we can repeat the trigger, we can switch back with it and get home."}),b.forCommanderIntercom({content:"And you are sure this will work?"}),b.forEngineering({content:"If anyone has a better idea, I'll be glad to hear it. It's the best I can think of and also, if we had aborted the test earlier, we wouldn't be in this mess!"}),b.forCommanderIntercom({content:"Acknowledged. How do we fix the hyper-drive then?"}),b.forNavigation({content:"You should first <strong>run a deep space SCAN</strong> to classify these new bodies in this space"}),b.forNavigation({content:'You can enter commands in the terminal on the bottom right of the screen. Type "help" to bring up the help menu!'})],{delaySeconds:5}),Nn=new fe(new ve("Build a MINER unit","Select your ship to build units"),[b.forNavigation({content:"Command, deep space scan completed! All bodies have been classified and named so you can refer to them"}),b.forEngineering({content:"So far, so good. Next, <strong>build a miner</strong> unit!"})],{delaySeconds:1}),Rn=new fe(new ve("Mine crystals for resources","Select your miner to mine"),[b.forEngineering({content:"Miners can dock to crystals and mine for resources."}),b.forEngineering({content:`
        <strong>Select the miner</strong> and instruct it to <strong>mine a crystal</strong>!
        <br>
        <strong class="italic">Remember, You can type "help" to see the commands supported by the unit!</strong>
      `})],{delaySeconds:1}),Pn=new fe(new ve("Build a REFINERY unit","Select your ship to build"),[b.forEngineering({content:`
        <p>Commander, in your console resources tab, there are 4 types of resources:</p>
        <br>
        <p>
          <strong class="${de.credits.classname}">Credits</strong> are used up when you build units.
        </p>
        <p>
          <strong class="${de.anythium.classname}">Anythium</strong>,
          <strong class="${de.divinium.classname}">Divinium</strong> and
          <strong class="${de.materium.classname}">Materium</strong> are
          used to power your <strong>refinery</strong> units.
        </p>
      `}),b.forEngineering({content:"Your refineries will create the replacement parts for the hyper-drive!"}),b.forEngineering({content:"Now let's <strong>build a refinery</strong> unit"})],{delaySeconds:1}),Dn=new fe(new ve("Deploy you REFINERY unit to a planet","Select your refinery to deploy"),[b.forEngineering({content:"Now you are getting the hang of things!"}),b.forEngineering({content:"Refineries generate excess radiation when working. As such they need to operate far from the ship"}),b.forEngineering({content:"To begin operation, <strong>deploy your refinery</strong> to a nearby planet!"})],{delaySeconds:1}),Mn=new fe(new ve("Build a TRANSPORTER unit","Select your ship to build"),[b.forEngineering({content:"Success! The refinery is now docked at a sufficient distance from the ship"}),b.forCommanderIntercom({delaySeconds:2.5,content:'Why is the refinery flashing a red exclamation mark (<strong class="text-red-700">!</strong>)?'}),b.forEngineering({content:`
        <p>At multiple times, your refineries will request for more resources to continue building the parts for the hyper-drive</p>
        <br>
        <p>The red flashing exclamation mark (<strong class="text-red-700">!</strong>) means the refinery needs more resources from the ship.</p>
      `}),b.forEngineering({content:"To transport resources to the refinery, <strong>build a transporter</strong> unit"})],{delaySeconds:1}),Ln=new fe(new ve("Load resources unto a TRANSPORTER unit","Select your transporter to load"),[b.forEngineering({content:"Now you can select the transporter and load resources unto it"}),b.forEngineering({content:`
        <p>Load the resources like this:</p>
        <br>
        <code class="font-mono text-sm">
          <span>load</span>
          <strong class="${de.anythium.classname}">&lt;anythium&gt;</strong>
          <strong class="${de.divinium.classname}">&lt;divinium&gt;</strong>
          <strong class="${de.materium.classname}">&lt;materium&gt;</strong>
        </code>
        <br>
        <code class="font-mono text-sm">
          <span>Eg: load</span>
          <strong class="${de.anythium.classname}">10</strong>
          <strong class="${de.divinium.classname}">12</strong>
          <strong class="${de.materium.classname}">13</strong>
        </code>
      `}),b.forEngineering({content:'Remember, type "help" to see what commands are supported by the selected unit!'})],{delaySeconds:1}),jn=new fe(new ve("Deploy your TRANSPORTER unit to a REFINERY","Select your transporter to deploy"),[b.forEngineering({content:"Good! The resources have been moved to your transporter"}),b.forEngineering({content:"Now, <strong>deploy your transporter</strong> to your refinery"})],{delaySeconds:1}),Hn=new fe(new ve("Unload resources to a Refinery unit","Select your transporter to unload"),[b.forEngineering({content:"The transporter has docked to the refinery"}),b.forEngineering({content:"Next, <strong>unload the transporter</strong> to the refinery"})],{delaySeconds:1}),sn=new fe(new ve("Build hyper-drive part","Mine and supply resources to refinery"),[b.forEngineering({content:"Well done command! The refinery has started operating. Our plan may actually work!"}),b.forEngineering({content:'Keep an eye on the refineries. When you see the red flashing exclamation mark (<strong class="text-red-700">!</strong>), it means they need resources to continue'}),b.forEngineering({content:"I'll check in later on your progress. I have to attend to other matters down here!"}),b.forEngineering({content:"Good luck!"}),b.forNavigation({content:"Command! Our scanners have detected several asteroids headed in our general direction",delaySeconds:1.5,danger:!0}),b.forNavigation({content:"Physical impact can and will damage our ship and units",danger:!0}),b.forNavigation({content:"I am bringing the ship's weapons online",danger:!0}),b.forEngineering({content:"Use <code>SHIFT</code> to <strong>engage the ships weapons</strong>!",danger:!0})],{delaySeconds:1}),Bn=new fe(new ve("Build HAULER unit","Select your ship to build"),[b.forEngineering({content:"Command! One of the refineries has just finished building the first hyper-drive part!"}),b.forEngineering({content:"You need to haul it back to the ship so repairs can begin"}),b.forEngineering({content:"To haul the component back to the ship, <strong>build a hauler</strong> unit"})],{delaySeconds:1}),Un=new fe(new ve("Deploy your HAULER unit to a completed REFINERY","Select your hauler to deploy"),[b.forEngineering({content:"Now, <strong>select the new hauler</strong> and <strong>deploy the hauler</strong> to your completed refinery!"})],{delaySeconds:1}),Fn=new fe(new ve("Haul the hyper-drive part from a completed refinery","Select your hauler to haul"),[b.forEngineering({content:"The hauler has successfully docked to the refinery!"}),b.forEngineering({content:"Instruct the hauler to <strong>haul the hyper-drive part from the refinery</strong>!"})],{delaySeconds:1}),Wn=new fe(new ve("Return the hyper-drive part to your ship","Select your hauler to deploy"),[b.forEngineering({content:"So far, so good!"}),b.forEngineering({content:"The hyper-drive part has been transferred to your hauler!"}),b.forEngineering({content:"Now, instruct your hauler to <strong>return to the ship</strong> so repairs can begin!"})],{delaySeconds:1}),zn=new fe(new ve("Unload the hyper-drive part","Select your hauler to unload"),[b.forEngineering({content:"The hauler is in the ship's docking area!"}),b.forEngineering({content:"<strong>Unload the hyper-drive part</strong> so we begin repairs down here!"})],{delaySeconds:1}),rn=new fe(new ve("Build 2nd hyper-drive part","Mine resources, transport to refinery and haul back the hyper-drive part when done"),[b.forEngineering({content:"Well done command! That's 1 out of 3 parts required!"}),b.forEngineering({content:"Myself and the other engineers have begun repairs!"}),b.forEngineering({content:"The existing refinery's radiation is too much to continue using!"}),b.forEngineering({content:"Build a new refinery, deploy it and supply resources to it!"}),b.forEngineering({content:"I have to get back to work down here. Good luck!"}),b.forNavigation({content:"Command! Also keep watch for asteroids. Remember to use <code>SHIFT</code> to activate the weapons!",delaySeconds:.5})],{delaySeconds:1}),Gn=new fe(new ve("Return the 2nd hyper-drive part to the ship","Deploy a hauler to a completed refinery"),[b.forEngineering({content:"Command! Another refinery has just finished building the second hyper-drive part!"}),b.forEngineering({content:"<strong>Deploy a hauler</strong> to return the hyper-drive part to the ship!"})],{delaySeconds:1}),an=new fe(new ve("Build 3rd and final hyper-drive part","Mine resources, transport to refinery and haul back the hyper-drive part when done"),[b.forEngineering({content:"That's 2 out of 3 parts built!"}),b.forEngineering({content:"Now, build the final hyper-drive part so we can end this damn drive and leave this space!"})],{delaySeconds:1}),qn=new fe(new ve("Defend your SHIP until repairs are finished","Arm the ship's weapons"),[b.forEngineering({content:"YES!!! We have the final hyper-drive part"}),b.forEngineering({content:"Repairs are going on smoothly. We are working as quickly as we can!"}),b.forCommanderIntercom({content:"Well done crew! We will soon be back home!"}),b.forNavigation({content:"Command! I'm detecting some unusual activity",delaySeconds:1.5}),b.forCommanderIntercom({content:"What is it?"}),b.forNavigation({content:"The scanners are picking up an increased asteroid rate"}),b.forNavigation({content:"The consistent direction of these asteroid, it almost seems like...",delaySeconds:1.5}),b.forCommanderIntercom({content:"Seems like what?"}),b.forNavigation({content:"It almost seems intentional!"}),b.forCommanderIntercom({content:"What are you saying exactly?!"}),b.forNavigation({content:"It might be a long shot, but I think something is intentionally sending them our way!"}),b.forNavigation({content:"A moment, sir..."}),b.forNavigation({content:"COMMAND! We are picking up several asteroids heading our way... and other objects we can't identify",delaySeconds:1.5,danger:!0}),b.forCommanderIntercom({content:"I see that. All sectors, multiple hostiles inbound. Raising threat level to zero. Battle stations everyone! This is not a drill!",danger:!0}),b.forCommanderIntercom({content:"We defend our ship till engineering is done with the repairs!!",danger:!0})],{delaySeconds:1}),Xn=new fe(void 0,[b.forEngineering({content:"FUCK YEEAHH!!! Take that you sons of bitches!!!!"}),b.forCommanderIntercom({content:"What was that?!!"}),b.forEngineering({content:"We fixed it! We fixed the fucking hyper-drive!"}),b.forEngineering({content:"We vented the excess energy as a blast wave"}),b.forCommanderIntercom({content:"Well played!"}),b.forCommanderIntercom({content:"Can we leave this damned space now?"}),b.forEngineering({content:"Yes... yes we can!"}),b.forCommanderIntercom({content:"Navigation, plot a course home!"}),b.forNavigation({content:"Waaay ahead of you, command!"}),b.forNavigation({content:"Opening a warp tunnel in 3... 2... 1... Now!",delaySeconds:1.5})],{delaySeconds:1}),Vn=new fe(void 0,[b.forMotherShip({content:"What news do you have on the wretches?",fontClass:"font-[Roswreck]"}),b.forMotherShip({content:"They just opened a warp tunnel and fled!",fontClass:"font-[Roswreck]"}),b.forMotherShip({content:"We have discovered their origin space, my liege!",fontClass:"font-[Roswreck]"}),b.forMotherShip({content:"Gather our forces! We will eradicate the vermin from the face of the universe!",fontClass:"font-[Roswreck]"}),b.forMotherShip({content:"I am at your service, great primarch!",fontClass:"font-[Roswreck]"})],{delaySeconds:5});class ke extends Te{static DURATION=12500;static NAME="Warp Tunnel";static MIN_POINTS=32;static MAX_POINTS=64;static MIN_SIZE=0;static MAX_SIZE=96;static INNER_RATIO=.85;anim;numPoints;constructor(e){super(ke.NAME),this.position.copy(e),this.anim=new Le({duration:ke.DURATION,onStatusChanged:t=>{t==="idle"&&H.broadcastEvent(new he({type:"warptunnelend",data:void 0}))}}),this.numPoints=V(ke.MIN_POINTS,ke.MAX_POINTS,!0)}activate(){this.anim.status==="idle"&&this.anim.play()}onUpdate(e){super.onUpdate(e),this.anim.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=qe(ke.MIN_SIZE,ke.INNER_RATIO*ke.MAX_SIZE,this.anim.value),l=qe(ke.MIN_SIZE,ke.MAX_SIZE,this.anim.value),u=2*Math.PI/this.numPoints;e.beginPath();for(let c=0;c<=2*Math.PI;c+=u){e.translate(t,n),e.rotate(c),e.translate(-t,-n);const g=V(o,l);c===0?e.moveTo(t,n-g):e.lineTo(t,n-g),e.translate(t,n),e.rotate(-c),e.translate(-t,-n)}const f=e.createRadialGradient(t,n,0,t,n,l);f.addColorStop(0,"#000000"),f.addColorStop(.65,"#000000"),f.addColorStop(.95,"#270e54"),e.shadowColor="#3d216f",e.shadowBlur=16,e.fillStyle=f,e.fill()}}class Ze extends Te{static DURATION=7500;static NAME="HyperDriveExplosion";static RADIUS=500;anim;constructor(e){super(Ze.NAME),this.position.copy(e),this.anim=new Le({duration:Ze.DURATION})}activate(){this.anim.status==="idle"&&this.anim.play()}onUpdate(e){super.onUpdate(e),this.anim.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=this.anim.value,l=qe(0,Ze.RADIUS,Math.sin(.5*Math.PI*o));e.beginPath(),e.arc(t,n,l,R(0),R(360));const u=e.createRadialGradient(t,n,0,t,n,l);u.addColorStop(0,"#ffffff"),u.addColorStop(.25,"#d5fff7"),u.addColorStop(.75,"#a1ffef"),u.addColorStop(.85,"#00000000"),e.globalAlpha=1-o,e.shadowColor="#ffffff",e.shadowBlur=16,e.fillStyle=u,e.fill()}}class Ne extends Te{static DURATION=4500;static NAME="Hyper Drive Field";static MIN_POINTS=32;static MAX_POINTS=64;static MIN_SIZE=0;static MAX_SIZE=12;static INSTABILITY_BAND_RATIO_1=0;static INSTABILITY_BAND_RATIO_2=.2;static INSTABILITY_BAND_RATIO_3=.4;anim;numPoints;instabilityBandRatio;constructor(e){super(Ne.NAME),this.position.copy(e),this.instabilityBandRatio=0,this.numPoints=V(Ne.MIN_POINTS,Ne.MAX_POINTS,!0),this.anim=new Le({duration:Ne.DURATION})}activate(e){this.instabilityBandRatio=[Ne.INSTABILITY_BAND_RATIO_1,Ne.INSTABILITY_BAND_RATIO_2,Ne.INSTABILITY_BAND_RATIO_3][e],this.anim.play()}stop(){this.anim.stop()}onUpdate(e){super.onUpdate(e),this.anim.update(e)}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y,o=qe(Ne.MIN_SIZE,Ne.MAX_SIZE,this.anim.value),l=2*Math.PI/this.numPoints;e.beginPath(),e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n);for(let f=0;f<=2*Math.PI;f+=l){e.translate(t,n),e.rotate(f),e.translate(-t,-n);const c=V((1-this.instabilityBandRatio)*o,o);f===0?e.moveTo(t,n-c):e.lineTo(t,n-c),e.translate(t,n),e.rotate(-f),e.translate(-t,-n)}e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n);const u=e.createRadialGradient(t,n,0,t,n,o);u.addColorStop(0,"#000000"),u.addColorStop(.65,"#000000"),u.addColorStop(.7,"#009489"),u.addColorStop(.95,"#09ffea"),e.shadowColor="#09ffea",e.shadowBlur=16,e.fillStyle="white",e.fill()}}class ft extends Te{static INSTANCE;shakeAnim;constructor(){super("Intro Scene Manager"),this.shakeAnim=new Le({duration:1.25*Ze.DURATION}),H.onEvent("storydialogchange",this.onNextStoryDialog.bind(this)),H.onEvent("storyend",this.onEndStory.bind(this))}static instance(){return ft.INSTANCE||(ft.INSTANCE=new ft),ft.INSTANCE}onStart(){super.onStart(),k.showOutput(),X.load(kn),oe.dystopianTrack.play()}onUpdate(e){if(super.onUpdate(e),this.shakeAnim.update(e),this.shakeAnim.status==="playing"){const t=this.shakeAnim.value,n=Math.exp(-5*t)*Math.sin(150*Math.PI*t);k.setPan(new P(0,25*n))}}onNextStoryDialog(e){const t=e.data.from;if(t.data.activateHyperDriveField!==void 0&&v.findObject(o=>o instanceof Ne)?.activate(t.data.activateHyperDriveField),t.data.triggerHyperDriveExplosion){const n=v.findObject(l=>l instanceof Ne),o=v.findObject(l=>l instanceof Ze);n?.stop(),o?.activate(),this.shakeAnim.play(),oe.dystopianTrack.fade(.3,5),H.schedule(()=>{oe.sirenTrack.play()},3)}t.data.activateWarpTunnel&&v.findObject(o=>o instanceof ke)?.activate(),t.data.hideDisplay&&k.hideOutput()}onEndStory(e){e.data.story===kn&&(oe.sirenTrack.fade(0,2.5),oe.dystopianTrack.fade(0,2.5),H.schedule(()=>{window.location.hash=gi,window.location.reload()},2.5))}}const qr="/sol-testing/assets/bg2-1b44599a.png",Xr=G('<div class="w-screen h-screen overflow-hidden bg-black">'),Vr=()=>(v.init({objects:[ft.instance(),new ne(P.zero()),new Ne(new P(-36,0)),new Ze(new P(-36,0)),new ke(new P(-36,0)),new Ur(new P(0,1700),1500)]}),(()=>{const s=Xr();return C(s,I(Zt,{class:"fixed top-0 left-0 w-full h-full",backgroundImagePath:qr,initialOpacity:0}),null),C(s,I(gn,{}),null),s})());var Pt=(s=>(s[s.LOW=1]="LOW",s[s.MID=1.75]="MID",s[s.HIGH=2.5]="HIGH",s[s.EXTREME=20]="EXTREME",s))(Pt||{});class Q extends Te{static INSTANCE;static MIN_SPAWN_TIMEOUT=120;static MAX_SPAWN_TIMEOUT=180;static MAX_ASTEROID_SPAWN_COUNT=10;static MAX_DRONE_SPAWN_COUNT=10;static TARGET_JITTER_RADIUS=24;static STARSHIP_TARGET_PROB=.75;static CRYSTAL_CLEARANCE_RADIUS=200;rate;enableAsteroids;enableDrones;constructor(){super("Spawn Manager"),this.isRevealed=!1,this.rate=1,this.enableAsteroids=!1,this.enableDrones=!1}static instance(){return Q.INSTANCE||(Q.INSTANCE=new Q),Q.INSTANCE}configure(e){this.enableAsteroids=e.enableAsteroids||!1,this.enableDrones=e.enableDrones||!1,this.rate=e.rate||1,this.spawnAsteroidsAndDrones()}spawnNewCrystal(){return new Promise(e=>{const t=v.findObjects(n=>n instanceof ne||n instanceof Ae||n instanceof K).map(n=>new Me(n.position.x,n.position.y,Q.CRYSTAL_CLEARANCE_RADIUS));for(console.log("Here!");;){const[n,o]=[V(-.125*k.mapSize,.125*k.mapSize),V(-.125*k.mapSize,.125*k.mapSize)];let l=!0;for(const u of t)if(u.contains(n,o)){l=!1;break}if(l){const u=new K(new P(n,o));return v.addObject(u),e()}}})}spawnAsteroidsAndDrones(){if(this.enableAsteroids||this.enableDrones){const e=new wt(-.5*k.mapSize,-.5*k.mapSize,k.mapSize,k.mapSize).edgePoint(Math.random()),t=v.findObjects(n=>n instanceof st||n instanceof Ot&&!(n instanceof me));if(this.enableAsteroids){const n=v.findObject(l=>l instanceof ne),o=V(0,Q.MAX_ASTEROID_SPAWN_COUNT,!0);for(let l=0;l<o;l++){const u=Math.random()<=Q.STARSHIP_TARGET_PROB&&n?t.indexOf(n):V(0,t.length-1,!0),c=t[u].position.add(new P(V(-Q.TARGET_JITTER_RADIUS,Q.TARGET_JITTER_RADIUS),V(-Q.TARGET_JITTER_RADIUS,Q.TARGET_JITTER_RADIUS)));v.addObject(new me(e,c.subtract(e)))}}if(this.enableDrones){const n=V(0,Q.MAX_DRONE_SPAWN_COUNT,!0);for(let o=0;o<n;o++){const l=V(0,t.length-1,!0),f=t[l].position.add(new P(V(-Q.TARGET_JITTER_RADIUS,Q.TARGET_JITTER_RADIUS),V(-Q.TARGET_JITTER_RADIUS,Q.TARGET_JITTER_RADIUS)));v.addObject(new pe(e,f.subtract(e)))}}H.schedule(this.spawnAsteroidsAndDrones.bind(this),V(Q.MIN_SPAWN_TIMEOUT/this.rate,Q.MAX_SPAWN_TIMEOUT/this.rate))}else this.rate=1}}class ht extends Te{static INSTANCE;enableRepair;repairRate;constructor(){super("Play Scene Manager"),this.isRevealed=!1,this.enableRepair=!1,this.repairRate=1/600,H.onEvent("storyend",this.onEndStory.bind(this)),H.onEvent("scancomplete",this.onCompletedScan.bind(this)),H.onEvent("objectadd",this.onAddObject.bind(this)),H.onEvent("objectremove",this.onRemoveObject.bind(this)),H.onEvent("resourcesadd",this.onResourceAdd.bind(this)),H.onEvent("refinerydock",this.onRefineryDock.bind(this)),H.onEvent("transporterload",this.onTransporterLoad.bind(this)),H.onEvent("transporterdock",this.onTransporterDock.bind(this)),H.onEvent("transporterunload",this.onTransporterUnload.bind(this)),H.onEvent("hyperdrivepartbuild",this.onHyperDrivePartBuild.bind(this)),H.onEvent("haulerdock",this.onHaulerDock.bind(this)),H.onEvent("haulerhaul",this.onHaulerHaul.bind(this)),H.onEvent("haulerunload",this.onHaulerUnload.bind(this)),H.onEvent("repaircomplete",this.onRepairComplete.bind(this)),H.onEvent("hyperdriveempend",this.onEndHyperDriveEmp.bind(this)),H.onEvent("warptunnelend",this.onEndWarpTunnel.bind(this)),H.onEvent("crystalexhaust",this.onCrystalExhausted.bind(this))}static instance(){return ht.INSTANCE||(ht.INSTANCE=new ht),ht.INSTANCE}onStart(){super.onStart(),X.load($n),v.cycleHud(Y.NONE),k.showOutput(),oe.alphaTrack.onEnd(()=>{oe.losAngelesTrack.play()}),oe.losAngelesTrack.onEnd(()=>{oe.alphaTrack.play()}),oe.cybertruckTrack.onEnd(()=>{oe.takeTheWheelTrack.play()}),oe.takeTheWheelTrack.onEnd(()=>{oe.cybertruckTrack.play()}),oe.alphaTrack.play()}onUpdate(e){super.onUpdate(e),this.enableRepair&&v.updateRepairProgress(this.repairRate*e)}onCrystalExhausted(){H.schedule(()=>{Q.instance().spawnNewCrystal()},V(2.5,5))}onEndStory(e){v.updateObjective(e.data.story.objective),v.cycleHud(Y.CONSOLE),e.data.story===sn?(Q.instance().configure({enableAsteroids:!0}),v.activateWeapons()):e.data.story===rn?Q.instance().configure({enableAsteroids:!0,rate:Pt.MID}):e.data.story===an?Q.instance().configure({enableAsteroids:!0,enableDrones:!0,rate:Pt.HIGH}):e.data.story===qn?(v.processCommand("select ship"),v.cycleHud(Y.WEAPONS),Q.instance().configure({enableAsteroids:!0,enableDrones:!0,rate:Pt.EXTREME}),ge.current()?.crossFade(oe.cybertruckTrack,5),this.enableRepair=!0):e.data.story===Xn&&(v.cycleHud(Y.NONE),v.findObject(n=>n instanceof ke)?.activate())}onCompletedScan(){v.currentObjective()===$n.objective&&(X.load(Nn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onAddObject(e){const t=e.data.object,n=v.currentObjective();t instanceof J&&n===Nn.objective&&(X.load(Rn),v.updateObjective(void 0),v.cycleHud(Y.NONE)),t instanceof Z&&n===Pn.objective&&(X.load(Dn),v.updateObjective(void 0),v.cycleHud(Y.NONE)),t instanceof Oe&&n===Mn.objective&&(X.load(Ln),v.updateObjective(void 0),v.cycleHud(Y.NONE)),t instanceof ae&&n===Bn.objective&&(X.load(Un),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onRemoveObject(e){e.data.object instanceof ne&&(this.enableRepair=!1,ge.current()?.fade(0,5),H.schedule(()=>{ge.current()?.stop()},5),Q.instance().configure({enableAsteroids:!1,enableDrones:!1}),X.skip(),v.cycleHud(Y.NONE),H.setInputScale(0),H.schedule(()=>{v.end()},1.5))}onResourceAdd(e){const t=e.data.resource,n=v.currentObjective();t.credits>=Z.COST&&n===Rn.objective&&(X.load(Pn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onRefineryDock(){v.currentObjective()===Dn.objective&&(X.load(Mn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onTransporterLoad(){v.currentObjective()===Ln.objective&&(X.load(jn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onTransporterDock(){v.currentObjective()===jn.objective&&(X.load(Hn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onTransporterUnload(){v.currentObjective()===Hn.objective&&(X.load(sn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onHyperDrivePartBuild(e){const t=v.currentObjective();t===sn.objective?(X.load(Bn),v.updateObjective(void 0),v.cycleHud(Y.NONE)):t===rn.objective&&e.data.count===2&&(X.load(Gn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onHaulerDock(e){const t=v.currentObjective();t===Un.objective&&e.data.unit instanceof Z?(X.load(Fn),v.updateObjective(void 0),v.cycleHud(Y.NONE)):t===Wn.objective&&e.data.unit instanceof ne&&(X.load(zn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onHaulerHaul(){v.currentObjective()===Fn.objective&&(X.load(Wn),v.updateObjective(void 0),v.cycleHud(Y.NONE))}onHaulerUnload(e){const t=v.currentObjective();t===zn.objective?(X.load(rn),v.updateObjective(void 0),v.cycleHud(Y.NONE),Q.instance().configure({enableAsteroids:!1,enableDrones:!1})):t===Gn.objective&&e.data.count===2?(X.load(an),v.updateObjective(void 0),v.cycleHud(Y.NONE),Q.instance().configure({enableAsteroids:!1,enableDrones:!1})):t===an.objective&&e.data.count===3&&(X.load(qn),v.updateObjective(void 0),v.cycleHud(Y.NONE),Q.instance().configure({enableAsteroids:!1,enableDrones:!1}))}onRepairComplete(){this.enableRepair=!1,v.cycleHud(Y.NONE),Q.instance().configure({enableAsteroids:!1,enableDrones:!1}),ge.current()?.crossFade(oe.alphaTrack,5),v.findObject(t=>t instanceof tt)?.activate()}onEndHyperDriveEmp(){X.load(Xn),v.updateObjective(void 0),v.cycleHud(Y.NONE)}onEndWarpTunnel(){k.hideOutput(),H.schedule(()=>{window.location.hash=yi,window.location.reload()},7)}}const Yr="/sol-testing/assets/bg1-171121e6.png",Zr=G('<div class="w-screen h-screen overflow-hidden bg-black">'),Kr=()=>(le.init({credits:200,anythium:0,divinium:0,materium:0}),v.init({objects:[ht.instance(),Q.instance(),new ne(P.zero()),new Ae("Eris",new P(250,-250),9,"#F3A505"),new Ae("Alecto",new P(-500,-300),15,"#434B4D"),new Ae("Artemi",new P(-640,109),9.5,"#7FB5B5"),new Ae("Pholus",new P(400,195),13.5,"#6C3B2A"),new Ae("Boreas",new P(-275,298),18,"#969992"),new K(new P(100,100),300),new K(new P(-512,240),50),new K(new P(390,400),500),new K(new P(-320,-280),125),new K(new P(462,-194),400),new ke(new P(-36,0)),new tt(P.zero())]}),at(()=>{const s=e=>{e.key==="Shift"?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),v.cycleHud()):e.key==="Escape"&&(H.isPaused()?(H.resume(),ge.current()?.play()):(H.pause(),ge.current()?.pause()))};window.addEventListener("keyup",s),it(()=>{window.removeEventListener("keyup",s)})}),(()=>{const s=Zr();return C(s,I(as,{}),null),C(s,I(Zt,{class:"fixed top-0 left-0 w-full h-full",backgroundImagePath:Yr,initialOpacity:0}),null),C(s,I(Xs,{}),null),C(s,I(Vs,{}),null),C(s,I(hr,{}),null),C(s,I(pr,{}),null),C(s,I(gn,{}),null),C(s,I(Er,{}),null),C(s,I(Pr,{}),null),C(s,I(Mr,{}),null),s})());class ye extends mn{static NAME="MotherShip";static MAX_SPEED=500;static COLOR="#200a38";static BORDER_COLOR="#6200d5";static DECAL_COLOR="#19042f";static DECAL_COLOR_2="#6200d59e";colorAnim;speed=0;constructor(e){super(ye.NAME,e,15e3),this.rotation=R(90),this.colorAnim=new Le({duration:1500})}activate(){this.colorAnim.play()}onUpdate(e){super.onUpdate(e),this.colorAnim.update(e),this.speed=$e(this.speed+this.colorAnim.value*e,0,ye.MAX_SPEED),this.speed>0&&this.translate(new P(1,0).multiply(this.speed,!0))}onDraw(e){super.onDraw(e);const t=this.position.x,n=this.position.y;e.translate(t,n),e.rotate(this.rotation),e.translate(-t,-n),[150,210].forEach(l=>{const u=R(l);e.translate(t,n),e.rotate(u),e.translate(-t,-n);const f=e.createLinearGradient(t,n-250,t,n-540);f.addColorStop(V(0,.15),Ke("#00000000",ye.BORDER_COLOR,this.colorAnim.value)),f.addColorStop(.9,"#00000000"),e.beginPath(),e.moveTo(t-60,n-250),e.lineTo(t-25,n-540),e.lineTo(t+25,n-540),e.lineTo(t+60,n-250),e.closePath(),e.fillStyle=f,e.fill(),e.translate(t,n),e.rotate(-u),e.translate(-t,-n)}),e.beginPath(),e.arc(t,n,250,R(0),R(360)),e.fillStyle=ye.COLOR,e.lineWidth=2,e.fill();const o=6;for(let l=0;l<360;l+=360/o){const u=R(l-30);e.translate(t,n),e.rotate(u),e.translate(-t,-n),e.beginPath(),e.moveTo(t-85,n-200),e.lineTo(t-75,n-270),e.arcTo(t,n-310,t+75,n-270,150),e.lineTo(t+85,n-200),e.lineJoin="round",e.lineWidth=5,e.strokeStyle=ye.BORDER_COLOR,e.shadowColor=ye.BORDER_COLOR,e.shadowBlur=48,e.stroke(),e.fillStyle=ye.COLOR,e.shadowBlur=0,e.fill(),e.beginPath(),e.arc(t,n,175,R(l-30),R(l+30)),e.lineWidth=2,e.stroke(),e.translate(t,n),e.rotate(-u),e.translate(-t,-n)}e.beginPath(),e.arc(t,n,120,R(0),R(360)),e.fillStyle=ye.DECAL_COLOR,e.fill(),e.beginPath(),e.arc(t,n-60,50,R(0),R(360)),e.fillStyle=ye.COLOR,e.fill(),e.strokeStyle=ye.BORDER_COLOR,e.stroke(),e.beginPath(),e.arc(t-60,n+15,10,R(0),R(360)),e.fillStyle=ye.COLOR,e.fill(),e.strokeStyle=ye.DECAL_COLOR_2,e.stroke(),e.beginPath(),e.arc(t,n+40,20,R(0),R(360)),e.fillStyle=ye.COLOR,e.fill(),e.strokeStyle=ye.DECAL_COLOR_2,e.stroke(),e.beginPath(),e.arc(t+60,n+15,10,R(0),R(360)),e.fillStyle=ye.COLOR,e.fill(),e.strokeStyle=ye.DECAL_COLOR_2,e.stroke(),e.translate(t,n),e.rotate(-this.rotation),e.translate(-t,-n)}renderOutsideView(){return!0}}class pt extends Te{static INSTANCE;shakeAnim;constructor(){super("Outro Scene Manager"),this.shakeAnim=new Le({duration:1.25*Ze.DURATION}),H.onEvent("storyend",this.onEndStory.bind(this))}static instance(){return pt.INSTANCE||(pt.INSTANCE=new pt),pt.INSTANCE}onStart(){super.onStart(),k.showOutput(),X.load(Vn),oe.dystopianTrack.play()}onUpdate(e){if(super.onUpdate(e),this.shakeAnim.update(e),this.shakeAnim.status==="playing"){const t=this.shakeAnim.value,n=Math.exp(-5*t)*Math.sin(150*Math.PI*t);k.setPan(new P(0,25*n))}}onDraw(e){super.onDraw(e),e.textAlign="center",e.font="bold 26px Calculator",e.fillStyle="white",e.fillText("Approximately 2,500AU from the Sol Explorer location, something silently observes...",k.view().x+.5*k.view().w,k.view().y+70)}onEndStory(e){e.data.story===Vn&&(v.findObject(n=>n instanceof ye)?.activate(),H.schedule(()=>{k.hideOutput(),ge.current()?.fade(0,5),H.schedule(()=>{window.location.replace(qt+"?dialog=credits")},5)},7.5))}}const Jr=G('<div class="w-screen h-screen overflow-hidden bg-black">'),Qr=()=>(v.init({objects:[pt.instance(),new Ne(new P(-36,0)),new Ze(new P(-36,0)),new ke(new P(-36,0)),new ye(P.zero())]}),(()=>{const s=Jr();return C(s,I(Zt,{class:"fixed top-0 left-0 w-full h-full",backgroundImagePath:Si,initialOpacity:0}),null),C(s,I(gn,{}),null),s})()),ea=()=>I(Io,{get children(){return[I(kt,{path:qt,get element(){return I(Hr,{})}}),I(kt,{path:mi,get element(){return I(Vr,{})}}),I(kt,{path:gi,get element(){return I(Kr,{})}}),I(kt,{path:yi,get element(){return I(Qr,{})}})]}}),ta=document.getElementById("root");Ki(()=>I(Eo,{get source(){return lo()},get children(){return I(ea,{})}}),ta);
